$wnd.gwtmaterialdemo.runAsyncCallback7("function $extractOptions(options){\n  var jsOptions, option, option$index, option$max;\n  jsOptions = [];\n  for (option$index = 0 , option$max = options.length; option$index < option$max; ++option$index) {\n    option = options[option$index];\n    $push_1(jsOptions, option.id_0);\n  }\n  return jsOptions;\n}\n\nfunction $getHeight(this$static){\n  var height;\n  height = ($clinit_DOM() , this$static.element).style['height'];\n  (height == null || !height.length) && (height = '550px');\n  return height;\n}\n\nfunction $setMiscOptions(this$static, miscOptions){\n  this$static.miscOptions = miscOptions;\n}\n\nfunction $setParaOptions(this$static, paraOptions){\n  this$static.paraOptions = paraOptions;\n}\n\nfunction $setStyleOptions(this$static, styleOptions){\n  this$static.styleOptions = styleOptions;\n}\n\nfunction $setUndoOptions(this$static, undoOptions){\n  this$static.undoOptions = undoOptions;\n}\n\ndefineClass(1378, 23, $intern_62);\n_.airMode = false;\nvar Lgwt_material_design_addins_client_richeditor_base_MaterialRichEditorBase_2_classLit = createForClass('gwt.material.design.addins.client.richeditor.base', 'MaterialRichEditorBase', 1378);\nfunction $clinit_MaterialRichEditor(){\n  $clinit_MaterialRichEditor = emptyMethod;\n  if (debug) {\n    injectJs(($clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugJsInitializer() , richEditorDebugJs), false, true, true);\n    injectCss(($clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugCssInitializer() , richEditorDebugCss));\n  }\n   else {\n    injectJs(($clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorJsInitializer() , richEditorJs), true, false, true);\n    injectCss(($clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorCssInitializer() , richEditorCss));\n  }\n}\n\nfunction $clear_4(this$static){\n  $clear_5(($clinit_DOM() , this$static.element));\n}\n\nfunction $clear_5(e){\n  $wnd.jQuery(document).ready(function(){\n    $wnd.jQuery(e).materialnote('reset');\n  }\n  );\n}\n\nfunction $initRichEditor(this$static){\n  $initRichEditor_0(($clinit_DOM() , this$static.element), this$static.airMode, this$static.placeholder, $getHeight(this$static), $extractOptions(this$static.styleOptions), $extractOptions(this$static.fontOptions), $extractOptions(this$static.colorOptions), $extractOptions(this$static.undoOptions), $extractOptions(this$static.ckMediaOptions), $extractOptions(this$static.miscOptions), $extractOptions(this$static.paraOptions), $extractOptions(this$static.heightOptions), this$static.html_0);\n}\n\nfunction $initRichEditor_0(e, airMode, placeholder, height, styleOptions, fontOptions, colorOptions, undoOptions, ckMediaOptions, miscOptions, paraOptions, heightOptions, html){\n  $wnd.jQuery(document).ready(function(){\n    var toolbar_0 = [['style', styleOptions], ['para', paraOptions], ['height', heightOptions], ['undo', undoOptions], ['fonts', fontOptions], ['color', colorOptions], ['ckMedia', ckMediaOptions], ['misc', miscOptions]];\n    $wnd.jQuery(e).materialnote({toolbar:toolbar_0, airMode:airMode, followingToolbar:false, placeholder:placeholder, height:height, minHeight:200, defaultBackColor:'#777', defaultTextColor:'#fff'});\n    $wnd.jQuery(e).materialnote('html', html);\n  }\n  );\n}\n\nfunction $insertText(e, text_0){\n  $wnd.jQuery(document).ready(function(){\n    $wnd.jQuery(e).materialnote('insertText', text_0);\n  }\n  );\n}\n\nfunction $insertText_0(this$static){\n  $insertText(($clinit_DOM() , this$static.element), 'Material Design');\n}\n\nfunction $setHTML(this$static, html){\n  this$static.html_0 = html;\n  this$static.attached?$initRichEditor_0(($clinit_DOM() , this$static.element), this$static.airMode, this$static.placeholder, $getHeight(this$static), $extractOptions(this$static.styleOptions), $extractOptions(this$static.fontOptions), $extractOptions(this$static.colorOptions), $extractOptions(this$static.undoOptions), $extractOptions(this$static.ckMediaOptions), $extractOptions(this$static.miscOptions), $extractOptions(this$static.paraOptions), $extractOptions(this$static.heightOptions), this$static.html_0):$addHandler_0(this$static, new MaterialRichEditor$1(this$static), (!TYPE_14 && (TYPE_14 = new GwtEvent$Type) , TYPE_14));\n}\n\nfunction MaterialRichEditor(){\n  $clinit_MaterialRichEditor();\n  MaterialWidget_0.call(this, $doc.createElement('div'));\n  this.placeholder = '';\n  this.styleOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [($clinit_ToolbarButton() , STYLE), BOLD_0, ITALIC, UNDERLINE, STRIKETHROUGH, CLEAR, SUPERSCRIPT, SUBSCRIPT]);\n  this.fontOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [FONT_SIZE, FONT_NAME]);\n  this.colorOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [COLOR]);\n  this.undoOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [UNDO, REDO, HELP_0]);\n  this.ckMediaOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [CK_IMAGE_UPLOAD, CK_IMAGE_VIDEO]);\n  this.miscOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [LINK_0, PICTURE, TABLE_1, HR, CODE_VIEW, FULLSCREEN]);\n  this.paraOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [UL, OL, PARAGRAPH, LEFT_2, CENTER_3, RIGHT_3, JUSTIFY_1, OUTDENT, INDENT]);\n  this.heightOptions = initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [LINE_HEIGHT]);\n  $setClassName(($clinit_DOM() , this.element), 'editor');\n  this.html_0 = '';\n}\n\ndefineClass(222, 1378, $intern_62, MaterialRichEditor);\n_.clear_0 = function clear_7(){\n  $clear_4(this);\n}\n;\n_.onLoad = function onLoad_14(){\n  $initRichEditor_0(($clinit_DOM() , this.element), this.airMode, this.placeholder, $getHeight(this), $extractOptions(this.styleOptions), $extractOptions(this.fontOptions), $extractOptions(this.colorOptions), $extractOptions(this.undoOptions), $extractOptions(this.ckMediaOptions), $extractOptions(this.miscOptions), $extractOptions(this.paraOptions), $extractOptions(this.heightOptions), this.html_0);\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditor_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditor', 222);\nfunction MaterialRichEditor$1(this$0){\n  this.this$01 = this$0;\n}\n\ndefineClass(1379, 1, $intern_57, MaterialRichEditor$1);\n_.onAttachOrDetach = function onAttachOrDetach_3(event_0){\n  event_0.attached && $initRichEditor(this.this$01);\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditor$1_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditor/1', 1379);\nvar richEditorCss, richEditorJs;\nfunction MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$1(){\n}\n\ndefineClass(1735, 1, {}, MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$1);\n_.getName = function getName_32(){\n  return 'richEditorCss';\n}\n;\n_.getText = function getText_23(){\n  var builder;\n  builder = new StringBuilder;\n  builder.string += '.editorDialogs .modal,.note-editor .modal{background-color:#FFF;color:#404040;z-index:1057!important;backface-visibility:hidden}.editorDialogs .modal .input-field input.datepicker,.editorDialogs .modal .input-field input:not([readonly]),.note-editor .modal .input-field input.datepicker,.note-editor .modal .input-field input:not([readonly]){border-color:#000!important}.editorDialogs .modal .input-field input.datepicker:focus,.editorDialogs .modal .input-field input:focus:not([readonly]),.editorDialogs .modal textarea.materialize-textarea:focus:not([readonly]),.note-editor .modal .input-field input.datepicker:focus,.note-editor .modal .input-field input:focus:not([readonly]),.note-editor .modal textarea.materialize-textarea:focus:not([readonly]){box-shadow:0 1px 0 0 grey!important;border-color:grey!important}.editorDialogs .modal .input-field .prefix,.editorDialogs .modal .input-field input.datepicker+label,.editorDialogs .modal .input-field input:not([readonly])+label,.editorDialogs .modal .note-editor+label,.editorDialogs .modal label,.note-editor .modal .input-field .prefix,.note-editor .modal .input-field input.datepicker+label,.note-editor .modal .input-field input:not([readonly])+label,.note-editor .modal .note-editor+label,.note-editor .modal label{color:#000!important}.editorDialogs .modal .input-field .prefix.active,.editorDialogs .modal .input-field input.datepicker:focus+label,.editorDialogs .modal .input-field input:focus:not([readonly])+label,.editorDialogs .modal textarea.materialize-textarea:focus:not([readonly])+label,.note-editor .modal .input-field .prefix.active,.note-editor .modal .input-field input.datepicker:focus+label,.note-editor .modal .input-field input:focus:not([readonly])+label,.note-editor .modal textarea.materialize-textarea:focus:not([readonly])+label{color:grey}.editorDialogs .modal .btn,.editorDialogs .modal .btn-large,.note-editor .modal .btn,.note-editor .modal .btn-large{background-color:#2196F3;color:#fff;cursor:pointer}.editorDialogs .modal .btn-large:hover,.editorDialogs .modal .btn:hover,.note-editor .modal .btn-large:hover,.note-editor .modal .btn:hover{background-color:#2196F3!important;color:#fff}.editorDialogs .modal .modal-footer,.note-editor .modal .modal-footer{background-color:#E9E9E9}.editorDialogs .modal .modal-footer .btnClose,.note-editor .modal .modal-footer .btnClose{margin-right:15px;background-color:transparent!important;color:grey}.editorDialogs .modal .modal-footer .btnClose:hover,.note-editor .modal .modal-footer .btnClose:hover{color:grey;background-color:transparent!important}.editorDialogs .modal .canvasContainerEmpty,.note-editor .modal .canvasContainerEmpty{border:5px solid #9c27b0}.note-editor{position:relative;border-left:3px solid #e9e9e9;border-bottom:3px solid #e9e9e9;border-right:3px solid #e9e9e9;background:#E9E9E9}.note-editor .img-circle{border-radius:50%}.note-editor .img-rounded{border-radius:5%}.note-editor .img-thumbnail{border:5px solid #e9e9e9;height:200px}.note-editor .img-bordered{border:5px solid #e9e9e9}.note-editor .btn-large:hover,.note-editor .btn:hover{background-color:#E9E9E9!important}.note-editor .active.btn-large,.note-editor .btn.active{background-color:#E0E0E0}.note-editor .note-editable ul li{list-style-type:square!important;display:list-item;list-style-position:inside}.note-editor .note-dialog>div,.note-editor .note-toolbar .btn.disabled,.note-editor .note-toolbar .disabled.btn-large,.note-editor .note-toolbar button.disabled{display:none}.note-editor .note-dialog .form-group{margin-right:0;margin-left:0}.note-editor .note-dialog .note-modal-form{margin:0}.note-editor .note-dialog .note-image-dialog .note-dropzone{min-height:100px;margin-bottom:10px;font-size:30px;line-height:4;color:#d3d3d3;text-align:center;border:4px dashed #d3d3d3}.note-editor .transparent{opacity:0}.note-editor .note-resizebar{background-color:#e9e9e9;width:100%;height:13px;cursor:ns-resize;padding-top:1px}.note-editor .note-resizebar .note-icon-bar{width:20px;margin:2px auto;border-top:2px solid #545454}.note-editor .note-toolbar{position:relative;color:#000;background-color:#e9e9e9;margin:0;z-index:995!important;padding:2%}.note-editor .note-toolbar ul{padding:0}.note-editor .note-toolbar .dropdown{cursor:pointer}.note-editor .note-toolbar .note-current-fontname{min-width:134px;display:inline-block;text-align:left}.note-editor .note-handle .note-control-selection{position:absolute;display:none;border:2px solid #e9e9e9}.note-editor .note-handle .note-control-selection .note-control-selection-bg{width:100%;height:100%;z-index:3;background-color:rgba(117,117,117,.3)}.note-editor .note-handle .note-control-selection>div{position:absolute}.note-editor .note-handle .note-control-selection .note-control-handle,.note-editor .note-handle .note-control-selection .note-control-holder{width:7px;height:7px;border:1px solid #000}.note-editor .note-handle .note-control-selection .note-control-sizing{width:15px;height:15px;background-color:#e9e9e9;z-index:5;cursor:se-resize}.note-editor .note-handle .note-control-selection .note-control-nw{top:-5px;left:-5px;border-right:0;border-bottom:0}.note-editor .note-handle .note-control-selection .note-control-ne{top:-5px;right:-5px;border-bottom:0;border-left:none}.note-editor .note-handle .note-control-selection .note-control-sw{bottom:-5px;left:-5px;border-top:0;border-right:0}.note-editor .note-handle .note-control-selection .note-control-se{right:-5px;bottom:-5px}.note-editor .note-handle .note-control-selection .note-control-selection-info{right:0;bottom:0;padding:5px;margin:17px;font-size:15px;color:#000;background-color:#e9e9e9;z-index:5}.note-dialog .note-help-dialog{color:#777}.note-dialog .note-help-dialog h4{color:#000}.note-dialog .note-help-dialog thead{background-color:#777;color:#fff}.note-dialog .note-help-dialog tbody{background-color:#e0e0e0}.note-editor .btn-group,.popover .btn-group{display:inline-block;margin-right:10px;position:relative}.note-editor .btn-group ul,.popover .btn-group ul{padding:0}.note-editor .btn-group .closeLeft,.popover .btn-group .closeLeft{padding-right:0!important;margin-right:0!important}.note-editor .btn-group .closeLeft i,.popover .btn-group .closeLeft i{margin-right:0!important}.note-editor .btn-group i.left,.popover .btn-group i.left{margin-right:5px}.note-editor .btn,.note-editor .btn-large,.popover .btn,.popover .btn-large{border-radius:0!important;box-shadow:none!important;padding:0 9px!important;color:#7F7A7A;background:#fff}.note-editor .btnSecond,.popover .btnSecond{background-color:#B71C1C!important}.note-editor .btnThird,.popover .btnThird{background-color:#4a148c!important}.note-editor button,.note-editor note-toolbar button,.popover button,.popover note-toolbar button{border:none;height:36px;text-transform:none}.note-editor [type=checkbox]:checked+label:before,.popover [type=checkbox]:checked+label:before{border-right-color:#9e9e9e!important;border-bottom-color:#9e9e9e!important}.note-editor .note-palette-title,.popover .note-palette-title{padding:0!important}.note-editor .colorName,.popover .colorName{display:inline-block;color:#000}@media only screen and (max-width:600px){.note-editor .colorName,.popover .colorName{display:none}}.note-editor .note-color-palette,.popover .note-color-palette{line-height:10px;border:3px solid #e9e9e9;padding:0!important;overflow-x:scroll;overflow-y:hidden}.note-editor .note-color-palette .note-color-row,.popover .note-color-palette .note-color-row{padding:0!important;min-width:300px}.note-editor .note-color-palette button.note-color-btn,.popover .note-color-palette button.note-color-btn{width:20px;height:20px;padding:0;margin:0}.note-editor .note-color-palette .note-color-btn:hover:after,.popover .note-color-palette .note-color-btn:hover:after{position:absolute;width:30px;height:30px;content:\"\";background-color:inherit;margin-top:-15px;margin-left:-15px}.note-editor .note-dimension-picker,.popover .note-dimension-picker{overflow:hidden}.note-editor .largeDropdown,.popover .largeDropdown{width:290px}.note-editor .dropdown-menu,.popover .dropdown-menu{z-index:1033}.note-editor .dropdown-menu.note-check,.popover .dropdown-menu.note-check{min-width:80px}.note-editor .dropdown-menu label,.popover .dropdown-menu label{color:#000!important}.note-editor ul.dropdown-menu,.popover ul.dropdown-menu{position:absolute;top:20px;background-color:#FFF;box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.note-editor ul.dropdown-menu#colors,.popover ul.dropdown-menu#colors{width:342px}.note-editor ul.dropdown-menu#colors .indicator,.popover ul.dropdown-menu#colors .indicator{width:50%;left:0}.note-editor ul.dropdown-menu .colorTable,.popover ul.dropdown-menu .colorTable{padding:3px 0}.popover ul.dropdown-menu .tabs:hover{background-color:#e9e9e9}.note-editor ul.dropdown-menu .tabs .tab a,.note-editor ul.dropdown-menu .tabs .tab a:hover,.popover ul.dropdown-menu .tabs .tab a,.popover ul.dropdown-menu .tabs .tab a:hover{color:#7F7A7A}.note-editor ul.dropdown-menu .tabs .indicator,.popover ul.dropdown-menu .tabs .indicator{background-color:#868181}.note-editor ul.dropdown-menu li,.popover ul.dropdown-menu li{list-style-type:none;padding:0!important}.note-editor ul.dropdown-menu li div,.popover ul.dropdown-menu li div{padding:3px 15px;cursor:pointer}.note-popover .popover{position:absolute;max-width:none;color:#000}.note-popover .popover .arrow{width:0;height:0;border-style:solid;border-width:0 10px 10px;border-color:transparent transparent #e9e9e9}.note-popover .popover .popover-content{background-color:#e9e9e9}.note-popover .popover .popover-content>a{margin-left:12px}.note-popover .popover .popover-content a{display:inline-block;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle}.note-popover .popover .popover-content .arrow{left:20px}.note-popover .popover .popover-content .btn-group{display:inline-block}.note-popover .popover .popover-content .btn-group .btn,.note-popover .popover .popover-content .btn-group .btn-large{border-radius:0!important;box-shadow:none!important;padding:0 9px!important;background-color:#e9e9e9}.note-popover .popover .popover-content .note-para .dropdown-menu,.note-toolbar .note-para .dropdown-menu{min-width:172px;padding:5px}.note-popover .popover .popover-content .note-para .dropdown-menu>div:first-child,.note-toolbar .note-para .dropdown-menu>div:first-child{margin-right:5px}.note-editor .note-dropzone{position:absolute;z-index:100;display:none;color:#87cefa;background-color:#fff;border:2px dashed #87cefa;opacity:.95;pointer-event:none}.note-editor .note-dropzone .note-dropzone-message{display:table-cell;font-size:28px;font-weight:700;text-align:center;vertical-align:middle}.note-editor .note-dropzone.hover{color:#098ddf;border:2px dashed #098ddf}.note-editor.dragover .note-dropzone{display:table}.note-editor.fullscreen{position:fixed;top:0;left:0;z-index:2021;width:100%}.note-editor.fullscreen .note-editable{background-color:#fff}.note-editor.codeview .note-editable,.note-editor.fullscreen .note-resizebar{display:none}.note-editor.codeview .note-codable{display:block}.note-editor .note-statusbar{background-color:#f5f5f5}.note-editor .note-editable[contenteditable=true]:empty:not(:focus):before{color:#a9a9a9;content:attr(data-placeholder)}.note-editor .note-editable{padding:10px;overflow:auto;outline:0;background:#fff;margin:2%;box-shadow:0 8px 17px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.note-editor .note-editable[contenteditable=false]{background-color:#e5e5e5}.note-editor .note-codable{display:none;width:100%;padding:10px;margin-bottom:0;font-family:Menlo,Monaco,monospace,sans-serif;font-size:14px;color:#ccc;background-color:#222;border:0;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;box-shadow:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;resize:none}.note-air-editor{outline:0}.note-popover .popover .popover-content,.note-toolbar{padding:0;margin:0}.note-popover .popover .popover-content>.btn-group,.note-toolbar>.btn-group{background:#fff;margin:4px;box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12)}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group,.note-popover .popover .popover-content .note-style blockquote,.note-popover .popover .popover-content .note-style h1,.note-popover .popover .popover-content .note-style h2,.note-popover .popover .popover-content .note-style h3,.note-popover .popover .popover-content .note-style h4,.note-popover .popover .popover-content .note-style h5,.note-popover .popover .popover-content .note-style h6,.note-toolbar .note-color .dropdown-menu .btn-group,.note-toolbar .note-style blockquote,.note-toolbar .note-style h1,.note-toolbar .note-style h2,.note-toolbar .note-style h3,.note-toolbar .note-style h4,.note-toolbar .note-style h5,.note-toolbar .note-style h6{margin:0}.note-popover .popover .popover-content .btn-group .note-table,.note-toolbar .btn-group .note-table{min-width:0;padding:5px}.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker,.note-toolbar .btn-group .note-table .note-dimension-picker{font-size:18px}.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-mousecatcher,.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-mousecatcher{position:absolute!important;z-index:3;width:260px;height:260px;cursor:pointer}.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-unhighlighted,.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-unhighlighted{position:relative!important;z-index:1;width:312px;height:130px;background-size:26px 26px;background-image:repeating-linear-gradient(0deg,#FFF,#FFF 2px,transparent 2px,transparent 26px),repeating-linear-gradient(-90deg,transparent,transparent 2px,#E9E9E9 2px,#E9E9E9 26px)}.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-highlighted,.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-highlighted{position:absolute!important;z-index:2;width:26px;height:26px;background-size:26px 26px;background-image:repeating-linear-gradient(0deg,#fff,#fff 2px,transparent 2px,transparent 26px),repeating-linear-gradient(-90deg,transparent,transparent 2px,#9e9e9e 2px,#9e9e9e 26px)}.note-popover .popover .popover-content .note-color .dropdown-toggle,.note-toolbar .note-color .dropdown-toggle{width:20px;padding-left:5px}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group:first-child,.note-toolbar .note-color .dropdown-menu .btn-group:first-child{margin:0 5px}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-palette-title,.note-toolbar .note-color .dropdown-menu .btn-group .note-palette-title{margin:2px 7px;font-size:12px;text-align:center;border-bottom:1px solid #eee}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-reset,.note-toolbar .note-color .dropdown-menu .btn-group .note-color-reset{padding:0 3px;margin:3px;font-size:11px;cursor:pointer;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-row,.note-toolbar .note-color .dropdown-menu .btn-group .note-color-row{height:20px}.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-reset:hover,.note-toolbar .note-color .dropdown-menu .btn-group .note-color-reset:hover{background:#eee}.note-popover .popover .popover-content .dropdown-menu.right,.note-toolbar .dropdown-menu.right{right:0;left:auto}.note-popover .popover .popover-content .dropdown-menu.right::before,.note-toolbar .dropdown-menu.right::before{right:9px;left:auto!important}.note-popover .popover .popover-content .dropdown-menu.right::after,.note-toolbar .dropdown-menu.right::after{right:10px;left:auto!important}.note-popover .popover .popover-content .dropdown-menu.note-check li a i,.note-toolbar .dropdown-menu.note-check li a i{color:#00bfff;visibility:hidden}.note-popover .popover .popover-content .dropdown-menu.note-check li a.checked i,.note-toolbar .dropdown-menu.note-check li a.chec';\n  builder.string += 'ked i{visibility:visible}.note-popover .popover .popover-content .note-fontsize-10,.note-toolbar .note-fontsize-10{font-size:10px}.codeview .note-color,.codeview .note-fonts,.codeview .note-height,.codeview .note-para,.codeview .note-style,.codeview .note-undo{display:none}.codeview .note-misc{background:#E0E0E0!important;padding-right:12px!important}';\n  return builder.string;\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditorClientBundle_1default_1InlineClientBundleGenerator$1_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditorClientBundle_default_InlineClientBundleGenerator/1', 1735);\nfunction MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$2(){\n}\n\ndefineClass(1736, 1, {}, MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$2);\n_.getName = function getName_33(){\n  return 'richEditorJs';\n}\n;\n_.getText = function getText_24(){\n  var builder;\n  builder = new StringBuilder;\n  builder.string += '!function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(window.jQuery)}(function(e){Array.prototype.reduce||(Array.prototype.reduce=function(e){var t,n=Object(this),i=n.length>>>0,o=0;if(2===arguments.length)t=arguments[1];else{for(;i>o&&!(o in n);)o++;if(o>=i)throw new TypeError(\"Reduce of empty array with no initial value\");t=n[o++]}for(;i>o;o++)o in n&&(t=e(t,n[o],o,n));return t}),\"function\"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=Object(this),n=t.length>>>0,i=[],o=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)if(r in t){var a=t[r];e.call(o,a,r,t)&&i.push(a)}return i});var t,n=\"function\"==typeof define&&define.amd,i=function(t){if(\"Roboto\"===t)return!0;var n=\"Comic Sans MS\"===t?\"Courier New\":\"Comic Sans MS\",i=e(\"<div>\").css({position:\"absolute\",left:\"-9999px\",top:\"-9999px\",fontSize:\"200px\"}).text(\"mmmmmmmmmwwwwwww\").appendTo(document.body),o=i.css(\"fontFamily\",n).width(),r=i.css(\"fontFamily\",t+\",\"+n).width();return i.remove(),o!==r},o=navigator.userAgent,r={isMac:navigator.appVersion.indexOf(\"Mac\")>-1,isMSIE:/MSIE|Trident/i.test(o),isFF:/firefox/i.test(o),isWebkit:/webkit/i.test(o),isSafari:/safari/i.test(o),jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified(\"CodeMirror\"):!!window.CodeMirror,isFontInstalled:i,isW3CRangeSupport:!!document.createRange},a=function(){var t=function(e){return function(t){return e===t}},n=function(e,t){return e===t},i=function(e){return function(t,n){return t[e]===n[e]}},o=function(){return!0},r=function(){return!1},a=function(e){return function(){return!e.apply(e,arguments)}},s=function(e,t){return function(n){return e(n)&&t(n)}},l=function(e){return e},d=0,c=function(e){var t=++d+\"\";return e?e+t:t},u=function(t){var n=e(document);return{top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top}},f=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},h=function(e,t){return t=t||\"\",t+e.split(\".\").map(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}).join(\"\")};return{eq:t,eq2:n,peq2:i,ok:o,fail:r,self:l,not:a,and:s,uniqueId:c,rect2bnd:u,invertObject:f,namespaceToCamel:h}}(),s=function(){var t=function(e){return e[0]},n=function(e){return e[e.length-1]},i=function(e){return e.slice(0,e.length-1)},o=function(e){return e.slice(1)},r=function(e,t){for(var n=0,i=e.length;i>n;n++){var o=e[n];if(t(o))return o}},s=function(e,t){for(var n=0,i=e.length;i>n;n++)if(!t(e[n]))return!1;return!0},l=function(t,n){return-1!==e.inArray(n,t)},d=function(e,t){return t=t||a.self,e.reduce(function(e,n){return e+t(n)},0)},c=function(e){for(var t=[],n=-1,i=e.length;++n<i;)t[n]=e[n];return t},u=function(e,i){if(!e.length)return[];var r=o(e);return r.reduce(function(e,t){var o=n(e);return i(n(o),t)?o[o.length]=t:e[e.length]=[t],e},[[t(e)]])},f=function(e){for(var t=[],n=0,i=e.length;i>n;n++)e[n]&&t.push(e[n]);return t},h=function(e){for(var t=[],n=0,i=e.length;i>n;n++)l(t,e[n])||t.push(e[n]);return t},p=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n+1]},v=function(e,t){var n=e.indexOf(t);return-1===n?null:e[n-1]};return{head:t,last:n,initial:i,tail:o,prev:v,next:p,find:r,contains:l,all:s,sum:d,from:c,clusterBy:u,compact:f,unique:h}}(),l=String.fromCharCode(160),d=\"\\\\ufeff\",c=function(){var t=function(t){return t&&e(t).hasClass(\"note-editable\")},n=function(t){return t&&e(t).hasClass(\"note-control-sizing\")},i=function(t){var n;if(t.hasClass(\"note-air-editor\")){var i=s.last(t.attr(\"id\").split(\"-\"));return n=function(t){return function(){return e(t+i)}},{editor:function(){return t},holder:function(){return t.data(\"holder\")},editable:function(){return t},popover:n(\"#note-popover-\"),handle:n(\"#note-handle-\"),dialog:n(\"#note-dialog-\")}}return n=function(e){return function(){return t.find(e)}},{editor:function(){return t},holder:function(){return t.data(\"holder\")},dropzone:n(\".note-dropzone\"),toolbar:n(\".note-toolbar\"),editable:n(\".note-editable\"),codable:n(\".note-codable\"),statusbar:n(\".note-statusbar\"),popover:n(\".note-popover\"),handle:n(\".note-handle\"),dialog:n(\".note-dialog\")}},o=function(t){var n=e(t).closest(\".note-editor, .note-air-editor, .note-air-layout\");if(!n.length)return null;var o;return o=n.is(\".note-editor, .note-air-editor\")?n:e(\"#note-editor-\"+s.last(n.attr(\"id\").split(\"-\"))),i(o)},u=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}},f=function(e){return e&&3===e.nodeType},h=function(e){return e&&/^BR|^IMG|^HR/.test(e.nodeName.toUpperCase())},p=function(e){return t(e)?!1:e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},v=u(\"LI\"),g=function(e){return p(e)&&!v(e)},m=u(\"TABLE\"),b=function(e){return!(x(e)||k(e)||p(e)||m(e)||C(e))},k=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())},y=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())},C=u(\"BLOCKQUOTE\"),x=function(e){return y(e)||C(e)||t(e)},w=u(\"A\"),T=function(e){return b(e)&&!!H(e,p)},N=function(e){return b(e)&&!H(e,p)},P=u(\"BODY\"),L=function(e,t){return e.nextSibling===t||e.previousSibling===t},S=function(e,t){t=t||a.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},I=r.isMSIE?\"&nbsp;\":\"<br>\",M=function(e){return f(e)?e.nodeValue.length:e.childNodes.length},R=function(e){var t=M(e);return 0===t?!0:f(e)||1!==t||e.innerHTML!==I?s.all(e.childNodes,f)&&\"\"===e.innerHTML?!0:!1:!0},E=function(e){h(e)||M(e)||(e.innerHTML=I)},H=function(e,n){for(;e;){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},A=function(e,n){for(e=e.parentNode;e&&1===M(e);){if(n(e))return e;if(t(e))break;e=e.parentNode}return null},D=function(e,n){n=n||a.fail;var i=[];return H(e,function(e){return t(e)||i.push(e),n(e)}),i},F=function(e,t){var n=D(e);return s.last(n.filter(t))},B=function(t,n){for(var i=D(t),o=n;o;o=o.parentNode)if(e.inArray(o,i)>-1)return o;return null},U=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},z=function(e,t){t=t||a.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n},O=function(e,t){var n=[];return t=t||a.ok,function i(o){e!==o&&t(o)&&n.push(o);for(var r=0,a=o.childNodes.length;a>r;r++)i(o.childNodes[r])}(e),n},j=function(t,n){var i=t.parentNode,o=e(\"<\"+n+\">\")[0];return i.insertBefore(o,t),o.appendChild(t),o},_=function(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e},q=function(t,n){return e.each(n,function(e,n){t.appendChild(n)}),t},W=function(e){return 0===e.offset},K=function(e){return e.offset===M(e.node)},V=function(e){return W(e)||K(e)},Q=function(e,t){for(;e&&e!==t;){if(0!==J(e))return!1;e=e.parentNode}return!0},Z=function(e,t){for(;e&&e!==t;){if(J(e)!==M(e.parentNode)-1)return!1;e=e.parentNode}return!0},J=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},Y=function(e){return!!(e&&e.childNodes&&e.childNodes.length)},G=function(e,n){var i,o;if(0===e.offset){if(t(e.node))return null;i=e.node.parentNode,o=J(e.node)}else Y(e.node)?(i=e.node.childNodes[e.offset-1],o=M(i)):(i=e.node,o=n?0:e.offset-1);return{node:i,offset:o}},X=function(e,n){var i,o;if(M(e.node)===e.offset){if(t(e.node))return null;i=e.node.parentNode,o=J(e.node)+1}else Y(e.node)?(i=e.node.childNodes[e.offset],o=0):(i=e.node,o=n?M(e.node):e.offset+1);return{node:i,offset:o}},$=function(e,t){return e.node===t.node&&e.offset===t.offset},ee=function(e){if(f(e.node)||!Y(e.node)||R(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return t&&!h(t)||n&&!h(n)?!1:!0},te=function(e,t){for(;e;){if(t(e))return e;e=G(e)}return null},ne=function(e,t){for(;e;){if(t(e))return e;e=X(e)}return null},ie=function(e){if(!f(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&\" \"!==t&&t!==l},oe=function(e,t,n,i){for(var o=e;o&&(n(o),!$(o,t));){var r=i&&e.node!==o.node&&t.node!==o.node;o=X(o,r)}},re=function(t,n){var i=D(n,a.eq(t));return e.map(i,J).reverse()},ae=function(e,t){for(var n=e,i=0,o=t.length;o>i;i++)n=n.childNodes.length<=t[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[i]];return n},se=function(e,t){var n=t&&t.isSkipPaddingBlankHTML,i=t&&t.isNotSplitEdgePoint;if(V(e)&&(f(e.node)||i)){if(W(e))return e.node;if(K(e))return e.node.nextSibling}if(f(e.node))return e.node.splitText(e.offset);var o=e.node.childNodes[e.offset],r=_(e.node.cloneNode(!1),e.node);return q(r,z(o)),n||(E(e.node),E(r)),r},le=function(e,t,n){var i=D(t.node,a.eq(e));return i.length?1===i.length?se(t,n):i.reduce(function(e,i){return e===t.node&&(e=se(t,n)),se({node:i,offset:e?c.position(e):M(i)},n)}):null},de=function(e,t){var n,i,o=t?p:x,r=D(e.node,o),a=s.last(r)||e.node;o(a)?(n=r[r.length-2],i=a):(n=a,i=n.parentNode);var l=n&&le(n,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return l||i!==e.node||(l=e.node.childNodes[e.offset]),{rightNode:l,container:i}},ce=function(e){return document.createElement(e)},ue=function(e){return document.createTextNode(e)},fe=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var i,o,r=[];for(i=0,o=e.childNodes.length;o>i;i++)r.push(e.childNodes[i]);for(i=0,o=r.length;o>i;i++)n.insertBefore(r[i],e)}n.removeChild(e)}},he=function(e,n){for(;e&&!t(e)&&n(e);){var i=e.parentNode;fe(e),e=i}},pe=function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=ce(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),q(n,s.from(e.childNodes)),_(n,e),fe(e),n},ve=u(\"TEXTAREA\"),ge=function(e,t){var n=ve(e[0])?e.val():e.html();return t?n.replace(/[\\\\n\\\\r]/g,\"\"):n},me=function(t,n){var i=ge(t);if(n){var o=/<(\\\\/?)(\\\\b(?!!)[^>\\\\s]*)(.*?)(\\\\s*\\\\/?>)/g;i=i.replace(o,function(e,t,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,o=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(i||o?\"\\\\n\":\"\")}),i=e.trim(i)}return i};return{NBSP_CHAR:l,ZERO_WIDTH_NBSP_CHAR:d,blank:I,emptyPara:\"<p>\"+I+\"<\\/p>\",makePredByNodeName:u,isEditable:t,isControlSizing:n,buildLayoutInfo:i,makeLayoutInfo:o,isText:f,isVoid:h,isPara:p,isPurePara:g,isInline:b,isBlock:a.not(b),isBodyInline:N,isBody:P,isParaInline:T,isList:k,isTable:m,isCell:y,isBlockquote:C,isBodyContainer:x,isAnchor:w,isDiv:u(\"DIV\"),isLi:v,isBR:u(\"BR\"),isSpan:u(\"SPAN\"),isB:u(\"B\"),isU:u(\"U\"),isS:u(\"S\"),isI:u(\"I\"),isImg:u(\"IMG\"),isTextarea:ve,isEmpty:R,isEmptyAnchor:a.and(w,R),isClosestSibling:L,withClosestSiblings:S,nodeLength:M,isLeftEdgePoint:W,isRightEdgePoint:K,isEdgePoint:V,isLeftEdgeOf:Q,isRightEdgeOf:Z,prevPoint:G,nextPoint:X,isSamePoint:$,isVisiblePoint:ee,prevPointUntil:te,nextPointUntil:ne,isCharPoint:ie,walkPoint:oe,ancestor:H,singleChildAncestor:A,listAncestor:D,lastAncestor:F,listNext:z,listPrev:U,listDescendant:O,commonAncestor:B,wrap:j,insertAfter:_,appendChildNodes:q,position:J,hasChildren:Y,makeOffsetPath:re,fromOffsetPath:ae,splitTree:le,splitPoint:de,create:ce,createText:ue,remove:fe,removeWhile:he,replace:pe,html:me,value:ge}}(),u=function(){var t=function(e,t){var n,i,o=e.parentElement(),r=document.body.createTextRange(),a=s.from(o.childNodes);for(n=0;n<a.length;n++)if(!c.isText(a[n])){if(r.moveToElementText(a[n]),r.compareEndPoints(\"StartToStart\",e)>=0)break;i=a[n]}if(0!==n&&c.isText(a[n-1])){var l=document.body.createTextRange(),d=null;l.moveToElementText(i||o),l.collapse(!i),d=i?i.nextSibling:o.firstChild;var u=e.duplicate();u.setEndPoint(\"StartToStart\",l);for(var f=u.text.replace(/[\\\\r\\\\n]/g,\"\").length;f>d.nodeValue.length&&d.nextSibling;)f-=d.nodeValue.length,d=d.nextSibling;d.nodeValue;t&&d.nextSibling&&c.isText(d.nextSibling)&&f===d.nodeValue.length&&(f-=d.nodeValue.length,d=d.nextSibling),o=d,n=f}return{cont:o,offset:n}},n=function(e){var t=function(e,n){var i,o;if(c.isText(e)){var r=c.listPrev(e,a.not(c.isText)),l=s.last(r).previousSibling;i=l||e.parentNode,n+=s.sum(s.tail(r),c.nodeLength),o=!l}else{if(i=e.childNodes[n]||e,c.isText(i))return t(i,0);n=0,o=!1}return{node:i,collapseToStart:o,offset:n}},n=document.body.createTextRange(),i=t(e.node,e.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart(\"character\",i.offset),n},i=function(t,o,l,d){this.sc=t,this.so=o,this.ec=l,this.eo=d;var u=function(){if(r.isW3CRangeSupport){var e=document.createRange();return e.setStart(t,o),e.setEnd(l,d),e}var i=n({node:t,offset:o});return i.setEndPoint(\"EndToEnd\",n({node:l,offset:d})),i};this.getPoints=function(){return{sc:t,so:o,ec:l,eo:d}},this.getStartPoint=function(){return{node:t,offset:o}},this.getEndPoint=function(){return{node:l,offset:d}},this.select=function(){var e=u();if(r.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},this.normalize=function(){var e=function(e){return c.isVisiblePoint(e)||(e=c.isLeftEdgePoint(e)?c.nextPointUntil(e,c.isVisiblePoint):c.prevPointUntil(e,c.isVisiblePoint)),e},t=e(this.getStartPoint()),n=e(this.getEndPoint());return new i(t.node,t.offset,n.node,n.offset)},this.nodes=function(e,t){e=e||a.ok;var n=t&&t.includeAncestor,i=t&&t.fullyContains,o=this.getStartPoint(),r=this.getEndPoint(),l=[],d=[];return c.walkPoint(o,r,function(t){if(!c.isEditable(t.node)){var o;i?(c.isLeftEdgePoint(t)&&d.push(t.node),c.isRightEdgePoint(t)&&s.contains(d,t.node)&&(o=t.node)):o=n?c.ancestor(t.node,e):t.node,o&&e(o)&&l.push(o)}},!0),s.unique(l)},this.commonAncestor=function(){return c.commonAncestor(t,l)},this.expand=function(e){var n=c.ancestor(t,e),r=c.ancestor(l,e);if(!n&&!r)return new i(t,o,l,d);var a=this.getPoints();return n&&(a.sc=n,a.so=0),r&&(a.ec=r,a.eo=c.nodeLength(r)),new i(a.sc,a.so,a.ec,a.eo)},this.collapse=function(e){return e?new i(t,o,t,o):new i(l,d,l,d)},this.splitText=function(){var e=t===l,n=this.getPoints();return c.isText(l)&&!c.isEdgePoint(this.getEndPoint())&&l.splitText(d),c.isText(t)&&!c.isEdgePoint(this.getStartPoint())&&(n.sc=t.splitText(o),n.so=0,e&&(n.ec=n.sc,n.eo=d-o)),new i(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),n=t.nodes(null,{fullyContains:!0}),o=c.prevPointUntil(t.getStartPoint(),function(e){return!s.contains(n,e.node)}),r=[];return e.each(n,function(e,t){var n=t.parentNode;o.node!==n&&1===c.nodeLength(n)&&r.push(n),c.remove(t,!1)}),e.each(r,function(e,t){c.remove(t,!1)}),new i(o.node,o.offset,o.node,o.offset).normalize()};var f=function(e){return function(){var n=c.ancestor(t,e);return!!n&&n===c.ancestor(l,e)}};this.isOnEditable=f(c.isEditable),this.isOnList=f(c.isList),this.isOnAnchor=f(c.isAnchor),this.isOnCell=f(c.isCell),this.isLeftEdgeOf=function(e){if(!c.isLeftEdgePoint(this.getStartPoint()))return!1;var t=c.ancestor(this.sc,e);return t&&c.isLeftEdgeOf(this.sc,t)},this.isCollapsed=function(){return t===l&&o===d},this.wrapBodyInlineWithPara=function(){if(c.isBodyContainer(t)&&c.isEmpty(t))return t.innerHTML=c.emptyPara,new i(t.firstChild,0,t.firstChild,0);if(c.isParaInline(t)||c.isPara(t))return this.normalize();var e;if(c.isInline(t)){var n=c.listAncestor(t,a.not(c.isInline));e=s.last(n),c.isInline(e)||(e=n[n.length-2]||t.childNodes[o])}else e=t.childNodes[o>0?o-1:0];var r=c.listPrev(e,c.isParaInline).reverse();if(r=r.concat(c.listNext(e.nextSibling,c.isParaInline)),r.length){var l=c.wrap(s.head(r),\"p\");c.appendChildNodes(l,s.tail(r))}return this.normalize()},this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=c.splitPoint(t.getStartPoint(),c.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},this.pasteHTML=function(t){var n=this,i=e(\"<div><\\/div>\").html(t)[0],o=s.from(i.childNodes);return this.wrapBodyInlineWithPara().deleteContents(),e.map(o.reverse(),function(e){return n.insertNode(e)}).reverse()},this.toString=function(){var e=u();return r.isW3CRangeSupport?e.toString():e.text},this.getWordRange=function(e){var t=this.getEndPoint();if(!c.isCharPoint(t))return this;var n=c.prevPointUntil(t,function(e){return!c.isCharPoint(e)});return e&&(t=c.nextPointUntil(t,function(e){return!c.isCharPoint(e)})),new i(n.node,n.offset,t.node,t.offset)},this.bookmark=function(e){return{s:{path:c.makeOffsetPath(e,t),offset:o},e:{path:c.makeOffsetPath(e,l),offset:d}}},this.paraBookmark=function(e){return{s:{path:s.tail(c.makeOffsetPath(s.head(e),t)),offset:o},e:{path:s.tail(c.makeOffsetPath(s.last(e),l)),offset:d}';\n  builder.string += '}},this.getClientRects=function(){var e=u();return e.getClientRects()}};return{create:function(e,n,o,a){if(arguments.length)2===arguments.length&&(o=e,a=n);else if(r.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(c.isBody(s.anchorNode))return null;var l=s.getRangeAt(0);e=l.startContainer,n=l.startOffset,o=l.endContainer,a=l.endOffset}else{var d=document.selection.createRange(),u=d.duplicate();u.collapse(!1);var f=d;f.collapse(!0);var h=t(f,!0),p=t(u,!1);c.isText(h.node)&&c.isLeftEdgePoint(h)&&c.isTextNode(p.node)&&c.isRightEdgePoint(p)&&p.node.nextSibling===h.node&&(h=p),e=h.cont,n=h.offset,o=p.cont,a=p.offset}return new i(e,n,o,a)},createFromNode:function(e){var t=e,n=0,i=e,o=c.nodeLength(i);return c.isVoid(t)&&(n=c.listPrev(t).length-1,t=t.parentNode),c.isBR(i)?(o=c.listPrev(i).length-1,i=i.parentNode):c.isVoid(i)&&(o=c.listPrev(i).length,i=i.parentNode),this.create(t,n,i,o)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=c.fromOffsetPath(e,t.s.path),o=t.s.offset,r=c.fromOffsetPath(e,t.e.path),a=t.e.offset;return new i(n,o,r,a)},createFromParaBookmark:function(e,t){var n=e.s.offset,o=e.e.offset,r=c.fromOffsetPath(s.head(t),e.s.path),a=c.fromOffsetPath(s.last(t),e.e.path);return new i(r,n,a,o)}}}(),f={version:\"0.6.9\",options:{defaultTextColor:\"#212121\",defaultBackColor:\"#ddd\",followingToolbar:!0,otherStaticBarClass:\"staticTop\",width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:\"\",icons:{font:{bold:\"format_bold\",italic:\"format_italic\",underline:\"format_underlined\",clear:\"clear\",height:\"format_size\",strikethrough:\"strikethrough_s\",superscript:\"vertical_align_top\",subscript:\"vertical_align_bottom\"},image:{image:\"image\",floatLeft:\"format_align_left\",floatRight:\"format_align_right\",floatNone:\"format_align_justify\",shapeRounded:\"crop_3_2\",shapeCircle:\"panorama_fish_eye\",shapeThumbnail:\"collections\",bordered:\"border_outer\",shapeNone:\"image\",remove:\"delete\"},link:{link:\"insert_link\",unlink:\"clear\",edit:\"create\"},table:{table:\"border_all\"},hr:{insert:\"add\"},style:{style:\"border_color\"},lists:{unordered:\"format_list_bulleted\",ordered:\"format_list_numbered\"},options:{help:\"help\",fullscreen:\"settings_overscan\",codeview:\"code\"},paragraph:{paragraph:\"format_textdirection_l_to_r\",outdent:\"format_indent_decrease\",indent:\"format_indent_increase\",left:\"format_align_left\",center:\"format_align_center\",right:\"format_align_right\",justify:\"format_align_justify\"},color:{recent:\"format_color_text\"},history:{undo:\"undo\",redo:\"redo\"},misc:{check:\"check\"}},codemirror:{mode:\"text/html\",htmlMode:!0,indentWithTabs:!0,tabSize:4,lineNumbers:!0,theme:\"monokai\",maxHighlightLength:\"Infinity\"},lang:\"en-US\",direction:null,toolbar:[[\"style\",[\"style\"]],[\"font\",[\"bold\",\"italic\",\"underline\",\"clear\"]],[\"fontname\",[\"fontname\"]],[\"fontsize\",[\"fontsize\"]],[\"color\",[\"color\"]],[\"para\",[\"ul\",\"ol\",\"paragraph\"]],[\"height\",[\"height\"]],[\"table\",[\"table\"]],[\"insert\",[\"link\",\"picture\",\"hr\"]],[\"view\",[\"fullscreen\",\"codeview\"]],[\"help\",[\"help\"]]],plugin:{},airMode:!1,airPopover:[[\"color\",[\"color\"]],[\"font\",[\"bold\",\"underline\",\"clear\"]],[\"para\",[\"ul\",\"paragraph\"]],[\"table\",[\"table\"]],[\"insert\",[\"link\",\"picture\"]]],styleTags:[\"p\",\"blockquote\",\"pre\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\"],defaultFontName:\"Roboto\",fontNames:[\"Roboto\",\"Arial\",\"Arial Black\",\"Comic Sans MS\",\"Courier New\",\"Helvetica Neue\",\"Helvetica\",\"Impact\",\"Times New Roman\",\"Verdana\"],fontNamesIgnoreCheck:[],fontSizes:[\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"25\",\"37\"],colors:[[\"#fafafa\",\"#efebe9\",\"#7e57c2\",\"#ab47bc\",\"#5c6bc0\",\"#42a5f5\",\"#26c6da\",\"#66bb6a\",\"#9ccc65\",\"#ffee58\",\"#ffca28\",\"#ffa726\",\"#ff7043\",\"#ef5350\",\"#ec407a\"],[\"#f5f5f5\",\"#d7ccc8\",\"#673ab7\",\"#9c27b0\",\"#3f51b5\",\"#2196f3\",\"#00bcd4\",\"#4caf50\",\"#8bc34a\",\"#ffeb3b\",\"#ffc107\",\"#ff9800\",\"#ff5722\",\"#f44336\",\"#e91e63\"],[\"#eeeeee\",\"#bcaaa4\",\"#5e35b1\",\"#8e24aa\",\"#3949ab\",\"#1e88e5\",\"#00acc1\",\"#43a047\",\"#7cb342\",\"#fdd835\",\"#ffb300\",\"#fb8c00\",\"#f4511e\",\"#e53935\",\"#d81b60\"],[\"#e0e0e0\",\"#a1887f\",\"#512da8\",\"#7b1fa2\",\"#303f9f\",\"#1976d2\",\"#0097a7\",\"#388e3c\",\"#689f38\",\"#fbc02d\",\"#ffa000\",\"#f57c00\",\"#e64a19\",\"#d32f2f\",\"#c2185b\"],[\"#bdbdbd\",\"#8d6e63\",\"#4527a0\",\"#6a1b9a\",\"#283593\",\"#1565c0\",\"#00838f\",\"#2e7d32\",\"#558b2f\",\"#f9a825\",\"#ff8f00\",\"#ef6c00\",\"#d84315\",\"#c62828\",\"#ad1457\"],[\"#9e9e9e\",\"#795548\",\"#311b92\",\"#4a148c\",\"#1a237e\",\"#0d47a1\",\"#006064\",\"#1b5e20\",\"#33691e\",\"#f57f17\",\"#ff6f00\",\"#e65100\",\"#bf360c\",\"#b71c1c\",\"#880e4f\"],[\"#757575\",\"#6d4c41\",\"#b388ff\",\"#ea80fc\",\"#8c9eff\",\"#82b1ff\",\"#84ffff\",\"#b9f6ca\",\"#ccff90\",\"#ffff8d\",\"#ffe57f\",\"#ffd180\",\"#ff9e80\",\"#ff8a80\",\"#ff80ab\"],[\"#616161\",\"#5d4037\",\"#7c4dff\",\"#e040fb\",\"#536dfe\",\"#448aff\",\"#18ffff\",\"#69f0ae\",\"#b2ff59\",\"#ffff00\",\"#ffd740\",\"#ffab40\",\"#ff6e40\",\"#ff5252\",\"#ff4081\"],[\"#424242\",\"#4e342e\",\"#651fff\",\"#d500f9\",\"#3d5afe\",\"#2979ff\",\"#00e5ff\",\"#00e676\",\"#76ff03\",\"#ffea00\",\"#ffc400\",\"#ff9100\",\"#ff3d00\",\"#ff1744\",\"#f50057\"],[\"#212121\",\"#3e2723\",\"#6200ea\",\"#aa00ff\",\"#304ffe\",\"#2962ff\",\"#00b8d4\",\"#00c853\",\"#64dd17\",\"#ffd600\",\"#ffab00\",\"#ff6d00\",\"#dd2c00\",\"#d50000\",\"#c51162\"]],colorTitles:[[\"grey lighten5\",\"brown lighten5\",\"deep-purple lighten1\",\"purple lighten1\",\"indigo lighten1\",\"blue lighten1\",\"cyan lighten1\",\"green lighten1\",\"light-green lighten1\",\"yellow lighten1\",\"amber lighten1\",\"orange lighten1\",\"deep-orange lighten1\",\"red lighten1\",\"pink lighten1\"],[\"grey lighten4\",\"brown lighten4\",\"deep-purple\",\"purple\",\"indigo\",\"blue\",\"cyan\",\"green\",\"light-green\",\"yellow\",\"amber\",\"orange\",\"deep-orange\",\"red\",\"pink\"],[\"grey lighten3\",\"brown lighten3\",\"deep-purple darken1\",\"purple darken1\",\"indigo darken1\",\"blue darken1\",\"cyan darken1\",\"green darken1\",\"light-green darken1\",\"yellow darken1\",\"amber darken1\",\"orange darken1\",\"deep-orange darken1\",\"red darken1\",\"pink darken1\"],[\"grey lighten2\",\"brown lighten2\",\"deep-purple darken2\",\"purple darken2\",\"indigo darken2\",\"blue darken2\",\"cyan darken2\",\"green darken2\",\"light-green darken2\",\"yellow darken2\",\"amber darken2\",\"orange darken2\",\"deep-orange darken2\",\"red darken2\",\"pink darken2\"],[\"grey lighten1\",\"brown lighten1\",\"deep-purple darken3\",\"purple darken3\",\"indigo darken3\",\"blue darken3\",\"cyan darken3\",\"green darken3\",\"light-green darken3\",\"yellow darken3\",\"amber darken3\",\"orange darken3\",\"deep-orange darken3\",\"red darken3\",\"pink darken3\"],[\"grey\",\"brown\",\"deep-purple darken4\",\"purple darken4\",\"indigo darken4\",\"blue darken4\",\"cyan darken4\",\"green darken4\",\"light-green darken4\",\"yellow darken4\",\"amber darken4\",\"orange darken4\",\"deep-orange darken4\",\"red darken4\",\"pink darken4\"],[\"grey darken1\",\"brown darken1\",\"deep-purple accent1\",\"purple accent1\",\"indigo accent1\",\"blue accent1\",\"cyan accent1\",\"green accent1\",\"light-green accent1\",\"yellow accent1\",\"amber accent1\",\"orange accent1\",\"deep-orange accent1\",\"red accent1\",\"pink accent1\"],[\"grey darken2\",\"brown darken2\",\"deep-purple accent2\",\"purple accent2\",\"indigo accent2\",\"blue accent2\",\"cyan accent2\",\"green accent2\",\"light-green accent2\",\"yellow accent2\",\"amber accent2\",\"orange accent2\",\"deep-orange accent2\",\"red accent2\",\"pink accent2\"],[\"grey darken3\",\"brown darken3\",\"deep-purple accent3\",\"purple accent3\",\"indigo accent3\",\"blue accent3\",\"cyan accent3\",\"green accent3\",\"light-green accent3\",\"yellow accent3\",\"amber accent3\",\"orange accent3\",\"deep-orange accent3\",\"red accent3\",\"pink accent3\"],[\"grey darken4\",\"brown darken4\",\"deep-purple accent4\",\"purple accent4\",\"indigo accent4\",\"blue accent4\",\"cyan accent4\",\"green accent4\",\"light-green accent4\",\"yellow accent4\",\"amber accent4\",\"orange accent4\",\"deep-orange accent4\",\"red accent4\",\"pink accent4\"]],lineHeights:[\"1.0\",\"1.2\",\"1.4\",\"1.5\",\"1.6\",\"1.8\",\"2.0\",\"3.0\"],insertTableMaxSize:{col:12,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){return-1!==e.indexOf(\"@\")&&-1===e.indexOf(\":\")&&(e=\"mailto:\"+e),e},keyMap:{pc:{ENTER:\"insertParagraph\",\"CTRL+Z\":\"undo\",\"CTRL+Y\":\"redo\",TAB:\"tab\",\"SHIFT+TAB\":\"untab\",\"CTRL+B\":\"bold\",\"CTRL+I\":\"italic\",\"CTRL+U\":\"underline\",\"CTRL+SHIFT+S\":\"strikethrough\",\"CTRL+BACKSLASH\":\"removeFormat\",\"CTRL+SHIFT+L\":\"justifyLeft\",\"CTRL+SHIFT+E\":\"justifyCenter\",\"CTRL+SHIFT+R\":\"justifyRight\",\"CTRL+SHIFT+J\":\"justifyFull\",\"CTRL+SHIFT+NUM7\":\"insertUnorderedList\",\"CTRL+SHIFT+NUM8\":\"insertOrderedList\",\"CTRL+LEFTBRACKET\":\"outdent\",\"CTRL+RIGHTBRACKET\":\"indent\",\"CTRL+NUM0\":\"formatPara\",\"CTRL+NUM1\":\"formatH1\",\"CTRL+NUM2\":\"formatH2\",\"CTRL+NUM3\":\"formatH3\",\"CTRL+NUM4\":\"formatH4\",\"CTRL+NUM5\":\"formatH5\",\"CTRL+NUM6\":\"formatH6\",\"CTRL+ENTER\":\"insertHorizontalRule\",\"CTRL+K\":\"showLinkDialog\"},mac:{ENTER:\"insertParagraph\",\"CMD+Z\":\"undo\",\"CMD+SHIFT+Z\":\"redo\",TAB:\"tab\",\"SHIFT+TAB\":\"untab\",\"CMD+B\":\"bold\",\"CMD+I\":\"italic\",\"CMD+U\":\"underline\",\"CMD+SHIFT+S\":\"strikethrough\",\"CMD+BACKSLASH\":\"removeFormat\",\"CMD+SHIFT+L\":\"justifyLeft\",\"CMD+SHIFT+E\":\"justifyCenter\",\"CMD+SHIFT+R\":\"justifyRight\",\"CMD+SHIFT+J\":\"justifyFull\",\"CMD+SHIFT+NUM7\":\"insertUnorderedList\",\"CMD+SHIFT+NUM8\":\"insertOrderedList\",\"CMD+LEFTBRACKET\":\"outdent\",\"CMD+RIGHTBRACKET\":\"indent\",\"CMD+NUM0\":\"formatPara\",\"CMD+NUM1\":\"formatH1\",\"CMD+NUM2\":\"formatH2\",\"CMD+NUM3\":\"formatH3\",\"CMD+NUM4\":\"formatH4\",\"CMD+NUM5\":\"formatH5\",\"CMD+NUM6\":\"formatH6\",\"CMD+ENTER\":\"insertHorizontalRule\",\"CMD+K\":\"showLinkDialog\"}}},lang:{\"en-US\":{font:{bold:\"Bold\",italic:\"Italic\",underline:\"Underline\",clear:\"Remove Font Style\",height:\"Line Height\",name:\"Font Family\",strikethrough:\"Strikethrough\",subscript:\"Subscript\",superscript:\"Superscript\",size:\"Font Size\"},image:{image:\"Picture\",insert:\"Insert Image\",resizeFull:\"Resize Full\",resizeHalf:\"Resize Half\",resizeQuarter:\"Resize Quarter\",floatLeft:\"Float Left\",floatRight:\"Float Right\",floatNone:\"Float None\",shapeRounded:\"Shape: Rounded\",shapeCircle:\"Shape: Circle\",bordered:\"Bordered\",shapeThumbnail:\"Shape: Thumbnail\",shapeNone:\"Shape: None\",dragImageHere:\"Drag image or text here\",dropImage:\"Drop image or Text\",selectFromFiles:\"Select from files\",maximumFileSize:\"Maximum file size\",maximumFileSizeError:\"Maximum file size exceeded.\",url:\"Image URL\",remove:\"Remove Image\"},link:{link:\"Link\",insert:\"Insert Link\",unlink:\"Unlink\",edit:\"Edit\",textToDisplay:\"Text to display\",url:\"To what URL should this link go?\",openInNewWindow:\"Open in new window\"},table:{table:\"Table\",striped:\"Striped\",hoverable:\"Hoverable\",responsive:\"Responsive\",bordered:\"Bordered\"},hr:{insert:\"Insert Horizontal Rule\"},style:{style:\"Style\",normal:\"Normal\",blockquote:\"Quote\",pre:\"Code\",h1:\"Header 1\",h2:\"Header 2\",h3:\"Header 3\",h4:\"Header 4\",h5:\"Header 5\",h6:\"Header 6\"},lists:{unordered:\"Unordered list\",ordered:\"Ordered list\"},options:{help:\"Help\",fullscreen:\"Full Screen\",codeview:\"Code View\"},paragraph:{paragraph:\"Paragraph\",outdent:\"Outdent\",indent:\"Indent\",left:\"Align left\",center:\"Align center\",right:\"Align right\",justify:\"Justify full\"},color:{recent:\"Recent Color\",more:\"More Color\",background:\"Back\",foreground:\"Text\",transparent:\"Transparent\",setTransparent:\"Transparent\",reset:\"Reset\",resetToDefault:\"Default\"},shortcut:{shortcuts:\"Keyboard shortcuts\",close:\"Close\",textFormatting:\"Text formatting\",action:\"Action\",paragraphFormatting:\"Paragraph formatting\",documentStyle:\"Document Style\",extraKeys:\"Extra keys\"},history:{undo:\"Undo\",redo:\"Redo\"}}}},h=function(){var t=function(t){return e.Deferred(function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)}).promise()},n=function(t,n){return e.Deferred(function(i){var o=e(\"<img>\");o.one(\"load\",function(){o.off(\"error abort\"),i.resolve(o)}).one(\"error abort\",function(){o.off(\"load\").detach(),i.reject(o)}).css({display:\"none\"}).appendTo(document.body).attr({src:t,\"data-filename\":n})}).promise()};return{readFileAsDataURL:t,createImage:n}}(),p=function(){var e={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(e){return s.contains([8,9,13,32],e)},isMove:function(e){return s.contains([37,38,39,40],e)},nameFromCode:a.invertObject(e),code:e}}(),v=function(e){var t=[],n=-1,i=e[0],o=function(){var t=u.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:e.html(),bookmark:t?t.bookmark(i):n}},r=function(t){null!==t.contents&&e.html(t.contents),null!==t.bookmark&&u.createFromBookmark(i,t.bookmark).select()};this.undo=function(){n>0&&(n--,r(t[n]))},this.redo=function(){t.length-1>n&&(n++,r(t[n]))},this.recordUndo=function(){n++,t.length>n&&(t=t.slice(0,n)),t.push(o())},this.recordUndo()},g=function(){var t=function(t,n){if(r.jqueryVersion<1.9){var i={};return e.each(n,function(e,n){i[n]=t.css(n)}),i}return t.css.call(t,n)};this.stylePara=function(t,n){e.each(t.nodes(c.isPara,{includeAncestor:!0}),function(t,i){e(i).css(n)})},this.styleNodes=function(t,n){t=t.splitText();var i=n&&n.nodeName||\"SPAN\",o=!(!n||!n.expandClosestSibling),r=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(c.create(i))];var l=c.makePredByNodeName(i),d=e.map(t.nodes(c.isText,{fullyContains:!0}),function(e){return c.singleChildAncestor(e,l)||c.wrap(e,i)});if(o){if(r){var u=t.nodes();l=a.and(l,function(e){return s.contains(u,e)})}return e.map(d,function(t){var n=c.withClosestSiblings(t,l),i=s.head(n),o=s.tail(n);return e.each(o,function(e,t){c.appendChildNodes(i,t.childNodes),c.remove(t)}),s.head(n)})}return d},this.current=function(n,i){var o=e(c.isText(n.sc)?n.sc.parentNode:n.sc),r=[\"font-family\",\"font-size\",\"text-align\",\"list-style-type\",\"line-height\"],a=t(o,r)||{};if(a[\"font-size\"]=parseInt(a[\"font-size\"],10),a[\"font-bold\"]=document.queryCommandState(\"bold\")?\"bold\":\"normal\",a[\"font-italic\"]=document.queryCommandState(\"italic\")?\"italic\":\"normal\",a[\"font-underline\"]=document.queryCommandState(\"underline\")?\"underline\":\"normal\",a[\"font-strikethrough\"]=document.queryCommandState(\"strikeThrough\")?\"strikethrough\":\"normal\",a[\"font-superscript\"]=document.queryCommandState(\"superscript\")?\"superscript\":\"normal\",a[\"font-subscript\"]=document.queryCommandState(\"subscript\")?\"subscript\":\"normal\",n.isOnList()){var s=[\"circle\",\"disc\",\"disc-leading-zero\",\"square\"],l=e.inArray(a[\"list-style-type\"],s)>-1;a[\"list-style\"]=l?\"unordered\":\"ordered\"}else a[\"list-style\"]=\"none\";var d=c.ancestor(n.sc,c.isPara);if(d&&d.style[\"line-height\"])a[\"line-height\"]=d.style.lineHeight;else{var u=parseInt(a[\"line-height\"],10)/parseInt(a[\"font-size\"],10);a[\"line-height\"]=u.toFixed(1)}return a.image=c.isImg(i)&&i,a.anchor=n.isOnAnchor()&&c.ancestor(n.sc,c.isAnchor),a.ancestors=c.listAncestor(n.sc,c.isEditable),a.range=n,a}},m=function(){this.insertOrderedList=function(){this.toggleList(\"OL\")},this.insertUnorderedList=function(){this.toggleList(\"UL\")},this.indent=function(){var t=this,n=u.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),o=s.clusterBy(i,a.peq2(\"parentNode\"));e.each(o,function(n,i){var o=s.head(i);c.isLi(o)?t.wrapList(i,o.parentNode.nodeName):e.each(i,function(t,n){e(n).css(\"marginLeft\",function(e,t){return(parseInt(t,10)||0)+25})})}),n.select()},this.outdent=function(){var t=this,n=u.create().wrapBodyInlineWithPara(),i=n.nodes(c.isPara,{includeAncestor:!0}),o=s.clusterBy(i,a.peq2(\"parentNode\"));e.each(o,function(n,i){var o=s.head(i);c.isLi(o)?t.releaseList([i]):e.each(i,function(t,n){\\n    e(n).css(\"marginLeft\",function(e,t){return t=parseInt(t,10)||0,t>25?t-25:\"\"})})}),n.select()},this.toggleList=function(t){var n=this,i=u.create().wrapBodyInlineWithPara(),o=i.nodes(c.isPara,{includeAncestor:!0}),r=i.paraBookmark(o),l=s.clusterBy(o,a.peq2(\"parentNode\"));if(s.find(o,c.isPurePara)){var d=[];e.each(l,function(e,i){d=d.concat(n.wrapList(i,t))}),o=d}else{var f=i.nodes(c.isList,{includeAncestor:!0}).filter(function(n){return!e.nodeName(n,t)});f.length?e.each(f,function(e,n){c.replace(n,t)}):o=this.releaseList(l,!0)}u.createFromParaBookmark(r,o).select()},this.wrapList=function(t,n){var i=s.head(t),o=s.last(t),r=c.isList(i.previousSibling)&&i.previousSibling,a=c.isList(o.nextSibling)&&o.nextSibling,l=r||c';\n  builder.string += '.insertAfter(c.create(n||\"UL\"),o);return t=e.map(t,function(e){return c.isPurePara(e)?c.replace(e,\"LI\"):e}),c.appendChildNodes(l,t),a&&(c.appendChildNodes(l,s.from(a.childNodes)),c.remove(a)),t},this.releaseList=function(t,n){var i=[];return e.each(t,function(t,o){var r=s.head(o),a=s.last(o),l=n?c.lastAncestor(r,c.isList):r.parentNode,d=l.childNodes.length>1?c.splitTree(l,{node:a.parentNode,offset:c.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,u=c.splitTree(l,{node:r.parentNode,offset:c.position(r)},{isSkipPaddingBlankHTML:!0});o=n?c.listDescendant(u,c.isLi):s.from(u.childNodes).filter(c.isLi),(n||!c.isList(l.parentNode))&&(o=e.map(o,function(e){return c.replace(e,\"P\")})),e.each(s.from(o).reverse(),function(e,t){c.insertAfter(t,l)});var f=s.compact([l,u,d]);e.each(f,function(t,n){var i=[n].concat(c.listDescendant(n,c.isList));e.each(i.reverse(),function(e,t){c.nodeLength(t)||c.remove(t,!0)})}),i=i.concat(o)}),i}},b=function(){var t=new m;this.insertTab=function(e,t,n){var i=c.createText(new Array(n+1).join(c.NBSP_CHAR));t=t.deleteContents(),t.insertNode(i,!0),t=u.create(i,n),t.select()},this.insertParagraph=function(){var n=u.create();n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var i,o=c.ancestor(n.sc,c.isPara);if(o){if(c.isEmpty(o)&&c.isLi(o))return void t.toggleList(o.parentNode.nodeName);i=c.splitTree(o,n.getStartPoint());var r=c.listDescendant(o,c.isEmptyAnchor);r=r.concat(c.listDescendant(i,c.isEmptyAnchor)),e.each(r,function(e,t){c.remove(t)})}else{var a=n.sc.childNodes[n.so];i=e(c.emptyPara)[0],a?n.sc.insertBefore(i,a):n.sc.appendChild(i)}u.create(i,0).normalize().select()}},k=function(){this.tab=function(e,t){var n=c.ancestor(e.commonAncestor(),c.isCell),i=c.ancestor(n,c.isTable),o=c.listDescendant(i,c.isCell),r=s[t?\"prev\":\"next\"](o,n);r&&u.create(r,0).select()},this.createTable=function(t){for(var n,i=[],o=[],r=t[0],a=t[1],s=t.slice(2,t.length),l=0;r>l;l++)i.push(\"<td>(item)<\\/td>\"),o.push(\"<th>header<\\/th>\");n=i.join(\"\"),o=o.join(\"\");for(var d,c=[],u=0;a>u;u++)c.push(\"<tr>\"+n+\"<\\/tr>\");return d=c.join(\"\"),e(\\'<table class=\"\\'+s.join(\" \")+\\'\"><thead><tr>\\'+o+\"<\\/tr><\\/thead><tbody>\"+d+\"<\\/tbody><\\/table>\")[0]}},y=\"bogus\",C=function(t){var n=new g,i=new k,o=new b,a=new m;this.createRange=function(e){return this.focus(e),u.create()},this.saveRange=function(e,t){this.focus(e),e.data(\"range\",u.create()),t&&u.create().collapse().select()},this.saveNode=function(e){for(var t=[],n=0,i=e[0].childNodes.length;i>n;n++)t.push(e[0].childNodes[n]);e.data(\"childNodes\",t)},this.restoreRange=function(e){var t=e.data(\"range\");t&&(t.select(),this.focus(e))},this.restoreNode=function(e){e.html(\"\");for(var t=e.data(\"childNodes\"),n=0,i=t.length;i>n;n++)e[0].appendChild(t[n])},this.reset=function(e){e.html(\"\")},this.html=function(e,t){e.html(t)},this.getHTML=function(e){return e.html()},this.currentStyle=function(e){var t=u.create();return t?t.isOnEditable()&&n.current(t,e):!1};var l=function(e){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data(\"callbacks\"),\"before.command\")(e.html(),e)},d=function(e){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data(\"callbacks\"),\"change\")(e.html(),e)};this.undo=function(e){l(e),e.data(\"NoteHistory\").undo(),d(e)},this.redo=function(e){l(e),e.data(\"NoteHistory\").redo(),d(e)};for(var f=this,p=this.beforeCommand=function(e){l(e),f.focus(e)},v=this.afterCommand=function(e,t){e.data(\"NoteHistory\").recordUndo(),t||d(e)},C=[\"bold\",\"italic\",\"underline\",\"strikethrough\",\"superscript\",\"subscript\",\"justifyLeft\",\"justifyCenter\",\"justifyRight\",\"justifyFull\",\"formatBlock\",\"removeFormat\",\"backColor\",\"foreColor\",\"fontName\"],x=0,w=C.length;w>x;x++)this[C[x]]=function(e){return function(t,n){p(t),document.execCommand(e,!1,n),v(t,!0)}}(C[x]);this.insertHorizontalRule=function(){var t=e(\"<div />\");t.addClass(\"divider\"),u.create().insertNode(t[0])},this.tab=function(e,t){var n=this.createRange(e);n.isCollapsed()&&n.isOnCell()?i.tab(n):(p(e),o.insertTab(e,n,t.tabsize),v(e))},this.untab=function(e){var t=this.createRange(e);t.isCollapsed()&&t.isOnCell()&&i.tab(t,!0)},this.insertParagraph=function(e){p(e),o.insertParagraph(e),v(e)},this.insertOrderedList=function(e){p(e),a.insertOrderedList(e),v(e)},this.insertUnorderedList=function(e){p(e),a.insertUnorderedList(e),v(e)},this.indent=function(e){p(e),a.indent(e),v(e)},this.outdent=function(e){p(e),a.outdent(e),v(e)},this.insertImage=function(e,n,i){h.createImage(n,i).then(function(t){p(e),t.css({display:\"\",width:Math.min(e.width(),t.width())}),u.create().insertNode(t[0]),u.createFromNodeAfter(t[0]).select(),v(e)}).fail(function(){var n=c.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data(\"callbacks\"),\"image.upload.error\")()})},this.insertNode=function(e,t){p(e),u.create().insertNode(t),u.createFromNodeAfter(t).select(),v(e)},this.insertText=function(e,t){p(e);var n=u.create().insertNode(c.createText(t));u.create(n,c.nodeLength(n)).select(),v(e)},this.pasteHTML=function(e,t){p(e);var n=u.create().pasteHTML(t);u.createFromNodeAfter(s.last(n)).select(),v(e)},this.formatBlock=function(e,t){p(e),t=r.isMSIE?\"<\"+t+\">\":t,document.execCommand(\"FormatBlock\",!1,t),v(e)},this.formatPara=function(e){p(e),this.formatBlock(e,\"P\"),v(e)};for(var x=1;6>=x;x++)this[\"formatH\"+x]=function(e){return function(t){this.formatBlock(t,\"H\"+e)}}(x);this.fontSize=function(t,i){var o=u.create(),r=o.isCollapsed();if(r){var a=n.styleNodes(o),l=s.head(a);e(a).css({\"font-size\":i+\"px\"}),l&&!c.nodeLength(l)&&(l.innerHTML=c.ZERO_WIDTH_NBSP_CHAR,u.createFromNodeAfter(l.firstChild).select(),t.data(y,l))}else p(t),e(n.styleNodes(o)).css({\"font-size\":i+\"px\"}),v(t)},this.removeBogus=function(e){var t=e.data(y);if(t){var n=s.find(s.from(t.childNodes),c.isText),i=n.nodeValue.indexOf(c.ZERO_WIDTH_NBSP_CHAR);-1!==i&&n.deleteData(i,1),c.isEmpty(t)&&c.remove(t),e.removeData(y)}},this.lineHeight=function(e,t){p(e),n.stylePara(u.create(),{lineHeight:t}),v(e)},this.unlink=function(e){var t=this.createRange(e);if(t.isOnAnchor()){var n=c.ancestor(t.sc,c.isAnchor);t=u.createFromNode(n),t.select(),p(e),document.execCommand(\"unlink\"),v(e)}},this.createLink=function(t,i,o){var r=i.url,a=i.text,l=i.newWindow,d=i.range,c=d.toString()!==a;p(t),o.onCreateLink&&(r=o.onCreateLink(r));var f=[];if(c){var h=d.insertNode(e(\"<A>\"+a+\"<\\/A>\")[0]);f.push(h)}else f=n.styleNodes(d,{nodeName:\"A\",expandClosestSibling:!0,onlyPartialContains:!0});e.each(f,function(t,n){e(n).attr(\"href\",r),l?e(n).attr(\"target\",\"_blank\"):e(n).removeAttr(\"target\")});var g=u.createFromNodeBefore(s.head(f)),m=g.getStartPoint(),b=u.createFromNodeAfter(s.last(f)),k=b.getEndPoint();u.create(m.node,m.offset,k.node,k.offset).select(),v(t)},this.getLinkInfo=function(t){this.focus(t);var n=u.create().expand(c.isAnchor),i=e(s.head(n.nodes(c.isAnchor)));return{range:n,text:n.toString(),isNewWindow:i.length?\"_blank\"===i.attr(\"target\"):!1,url:i.length?i.attr(\"href\"):\"\"}},this.color=function(e,t){var n=JSON.parse(t),i=n.foreColor,o=n.backColor;p(e),i&&document.execCommand(\"foreColor\",!1,i),o&&document.execCommand(\"backColor\",!1,o),v(e)},this.insertTable=function(e,t){var n=t.split(\"x\");p(e);var o=u.create().deleteContents();o.insertNode(i.createTable(n)),v(e)},this.floatMe=function(e,t,n){p(e),n.css(\"float\",t),v(e)},this.imageShape=function(e,t,n){p(e),n.removeClass(\"img-rounded img-circle img-thumbnail img-bordered\"),t&&n.addClass(t),v(e)},this.imageClass=function(e,t,n){p(e),t&&(n.hasClass(t)?n.removeClass(t):n.addClass(t)),v(e)},this.resize=function(e,t,n){p(e),n.css({width:100*t+\"%\",height:\"\"}),v(e)},this.resizeTo=function(e,t,n){var i;if(n){var o=e.y/e.x,r=t.data(\"ratio\");i={width:r>o?e.x:e.y/r,height:r>o?e.x*r:e.y}}else i={width:e.x,height:e.y};t.css(i)},this.removeMedia=function(n,i,o){p(n),o.detach(),t.bindCustomEvent(e(),n.data(\"callbacks\"),\"media.delete\")(o,n),v(n)},this.focus=function(e){e.focus(),r.isFF&&!u.create().isOnEditable()&&u.createFromNode(e[0]).normalize().collapse().select()},this.isEmpty=function(e){return c.isEmpty(e[0])||c.emptyPara===e.html()}},x=function(){this.update=function(t,n){var i=function(t,n){t.find(\".dropdown-menu li\").each(function(){var t=e(this).children(\"div\"),i=t.data(\"value\");i+\"\"==n+\"\"?t.children(\"i\").removeClass(\"transparent\"):t.children(\"i\").addClass(\"transparent\")})},o=function(e,n){var i=t.find(e);i.toggleClass(\"active\",n())};if(n.image){var a=e(n.image);o(\\'.btn[data-event=\"imageClass\"][data-value=\"img-rounded\"]\\',function(){return a.hasClass(\"img-rounded\")}),o(\\'.btn[data-event=\"imageClass\"][data-value=\"img-circle\"]\\',function(){return a.hasClass(\"img-circle\")}),o(\\'.btn[data-event=\"imageClass\"][data-value=\"img-thumbnail\"]\\',function(){return a.hasClass(\"img-thumbnail\")}),o(\\'.btn[data-event=\"imageClass\"][data-value=\"img-bordered\"]\\',function(){return a.hasClass(\"img-bordered\")}),o(\\'.btn[data-event=\"imageShape\"]:not([data-value])\\',function(){return!a.is(\".img-rounded, .img-circle, .img-thumbnail, .img-bordered\")});var s=a.css(\"float\");o(\\'.btn[data-event=\"floatMe\"][data-value=\"left\"]\\',function(){return\"left\"===s}),o(\\'.btn[data-event=\"floatMe\"][data-value=\"right\"]\\',function(){return\"right\"===s}),o(\\'.btn[data-event=\"floatMe\"][data-value=\"none\"]\\',function(){return\"left\"!==s&&\"right\"!==s});var l=a.attr(\"style\");return o(\\'.btn[data-event=\"resize\"][data-value=\"1\"]\\',function(){return!!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*100%/.test(l)}),o(\\'.btn[data-event=\"resize\"][data-value=\"0.5\"]\\',function(){return!!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*50%/.test(l)}),void o(\\'.btn[data-event=\"resize\"][data-value=\"0.25\"]\\',function(){return!!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*25%/.test(l)})}var d=t.find(\".note-fontname[data-name=fontname]\");if(d.length){var c=n[\"font-family\"];if(c){for(var u=c.split(\",\"),f=0,h=u.length;h>f&&(c=u[f].replace(/[\\\\\\'\\\\\"]/g,\"\").replace(/\\\\s+$/,\"\").replace(/^\\\\s+/,\"\"),!r.isFontInstalled(c));f++);d.find(\".note-current-fontname\").text(c),i(d,c)}}var p=t.find(\".note-fontsize[data-name=fontsize]\");p.find(\".note-current-fontsize\").text(n[\"font-size\"]),i(p,parseFloat(n[\"font-size\"]));var v=t.find(\".note-height[data-name=lineheight]\");i(v,parseFloat(n[\"line-height\"])),o(\\'.btn[data-event=\"bold\"]\\',function(){return\"bold\"===n[\"font-bold\"]}),o(\\'.btn[data-event=\"italic\"]\\',function(){return\"italic\"===n[\"font-italic\"]}),o(\\'.btn[data-event=\"underline\"]\\',function(){return\"underline\"===n[\"font-underline\"]}),o(\\'.btn[data-event=\"strikethrough\"]\\',function(){return\"strikethrough\"===n[\"font-strikethrough\"]}),o(\\'.btn[data-event=\"superscript\"]\\',function(){return\"superscript\"===n[\"font-superscript\"]}),o(\\'.btn[data-event=\"subscript\"]\\',function(){return\"subscript\"===n[\"font-subscript\"]}),o(\\'.btn[data-event=\"justifyLeft\"]\\',function(){return\"left\"===n[\"text-align\"]||\"start\"===n[\"text-align\"]}),o(\\'.btn[data-event=\"justifyCenter\"]\\',function(){return\"center\"===n[\"text-align\"]}),o(\\'.btn[data-event=\"justifyRight\"]\\',function(){return\"right\"===n[\"text-align\"]}),o(\\'.btn[data-event=\"justifyFull\"]\\',function(){return\"justify\"===n[\"text-align\"]}),o(\\'.btn[data-event=\"insertUnorderedList\"]\\',function(){return\"unordered\"===n[\"list-style\"]}),o(\\'.btn[data-event=\"insertOrderedList\"]\\',function(){return\"ordered\"===n[\"list-style\"]})},this.updateRecentColor=function(t,n,i){var o=e(t).closest(\".note-color\"),r=o.find(\".note-recent-color\"),a=JSON.parse(r.attr(\"data-value\")),s=\"backColor\"===n?\"background-color\":\"color\";a[n]=i,r.attr(\"data-value\",JSON.stringify(a)),r.css(s,i)}},w=function(){var e=new x;this.update=function(t,n){e.update(t,n)},this.updateRecentColor=function(t,n,i){e.updateRecentColor(t,n,i)},this.activate=function(e){e.find(\"button, .btn\").not(\\'.btn[data-event=\"codeview\"]\\').removeClass(\"disabled\")},this.deactivate=function(e){e.find(\"button, .btn\").not(\\'.btn[data-event=\"codeview\"]\\').addClass(\"disabled\")},this.updateFullscreen=function(e,t){var n=e.find(\\'.btn[data-event=\"fullscreen\"]\\');n.toggleClass(\"active\",t)},this.updateCodeview=function(e,t){var n=e.find(\\'.btn[data-event=\"codeview\"]\\');n.toggleClass(\"active\",t),t?this.deactivate(e):this.activate(e)},this.get=function(e,t){var n=c.makeLayoutInfo(e).toolbar();return n.find(\"[data-name=\"+t+\"]\")},this.setButtonState=function(e,t,n){n=n===!1?!1:!0;var i=this.get(e,t);i.toggleClass(\"active\",n)}},T=24,N=function(){var t=e(document);this.attach=function(e,t){t.disableResizeEditor||e.statusbar().on(\"mousedown\",n)};var n=function(e){e.preventDefault(),e.stopPropagation();var n=c.makeLayoutInfo(e.target).editable(),i=n.offset().top-t.scrollTop(),o=c.makeLayoutInfo(e.currentTarget||e.target),r=o.editor().data(\"options\");t.on(\"mousemove\",function(e){var t=e.clientY-(i+T);t=r.minHeight>0?Math.max(t,r.minHeight):t,t=r.maxHeight>0?Math.min(t,r.maxHeight):t,n.height(t)}).one(\"mouseup\",function(){t.off(\"mousemove\")})}},P=function(){var t=new x,n=function(t,n){var i=e(t),o=n?i.offset():i.position(),r=i.outerHeight(!0);return{left:o.left,top:o.top+r}},i=function(e,t){e.css({display:\"block\",left:t.left,top:t.top})},o=20;this.update=function(r,l,d){t.update(r,l);var c=r.find(\".note-link-popover\");if(l.anchor){var u=c.find(\"a\"),f=e(l.anchor).attr(\"href\"),h=e(l.anchor).attr(\"target\");u.attr(\"href\",f).html(f),h?u.attr(\"target\",\"_blank\"):u.removeAttr(\"target\"),i(c,n(l.anchor,d))}else c.hide();var p=r.find(\".note-image-popover\");l.image?i(p,n(l.image,d)):p.hide();var v=r.find(\".note-air-popover\");if(d&&!l.range.isCollapsed()){var g=s.last(l.range.getClientRects());if(g){var m=a.rect2bnd(g);i(v,{left:Math.max(m.left+m.width/2-o,0),top:m.top+m.height})}}else v.hide()},this.updateRecentColor=function(e,t,n){e.updateRecentColor(e,t,n)},this.hide=function(e){e.children().hide()}},L=function(t){var n=e(document),i=function(i){if(c.isControlSizing(i.target)){i.preventDefault(),i.stopPropagation();var o=c.makeLayoutInfo(i.target),r=o.handle(),a=o.popover(),s=o.editable(),l=o.editor(),d=r.find(\".note-control-selection\").data(\"target\"),u=e(d),f=u.offset(),h=n.scrollTop(),p=l.data(\"options\").airMode;n.on(\"mousemove\",function(e){t.invoke(\"editor.resizeTo\",{x:e.clientX-f.left,y:e.clientY-(f.top-h)},u,!e.shiftKey),t.invoke(\"handle.update\",r,{image:d},p),t.invoke(\"popover.update\",a,{image:d},p)}).one(\"mouseup\",function(){n.off(\"mousemove\"),t.invoke(\"editor.afterCommand\",s)}),u.data(\"ratio\")||u.data(\"ratio\",u.height()/u.width())}};this.attach=function(e){e.handle().on(\"mousedown\",i)},this.update=function(t,n,i){var o=t.find(\".note-control-selection\");if(n.image){var r=e(n.image),a=i?r.offset():r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};o.css({display:\"block\",left:a.left,top:a.top,width:s.w,height:s.h}).data(\"target\",n.image);var l=s.w+\"x\"+s.h;o.find(\".note-control-selection-info\").text(l)}else o.hide()},this.hide=function(e){e.children().hide()}},S=function(t){var n=e(window),i=e(\"html, body\");this.toggle=function(e){var o=e.editor(),r=e.toolbar(),a=e.editable(),s=e.codable(),l=function(e){a.css(\"height\",e.h),s.css(\"height\",e.h),s.data(\"cmeditor\")&&s.data(\"cmeditor\").setsize(null,e.h)};o.toggleClass(\"fullscreen\");var d=o.hasClass(\"fullscreen\");d?(a.data(\"orgheight\",a.css(\"height\")),n.on(\"resize\",function(){l({h:n.height()-r.outerHeight()})}).trigger(\"resize\"),i.css(\"overflow\",\"hidden\"),r.css(\"top\",0)):(n.off(\"resize\"),l({h:a.data(\"orgheight\")}),i.css(\"overflow\",\"visible\")),t.invoke(\"toolbar.updateFullscreen\",r,d)}};r.hasCodeMirror&&(r.isSupportAmd?require([\"CodeMirror\"],function(e){t=e}):t=window.CodeMirror);var I=function(n){this.sync=function(e){var t=n.invoke(\"codeview.isActivated\",e);t&&r.hasCodeMirror&&e.codable().data(\"cmEditor\").save()},this.isActivated=function(e){var t=e.editor();return t.hasClass(\"codeview\")},this.toggle=function(e){this.isActivated(e)?this.deactivate(e):this.activate(e)},this.activate=function(i){function o(e,t,n,i){var r,a=e.indexOf(\"<\"),s=e.indexOf(\">\");if(0===a)if(r=e.substring(0,s+1),e=e.substring(s+1),0===r.indexOf(\"<\\/\"))t--,nsideLastBlock=!1;else{n&&t++;for(var l=!1,d=0;d<i.length;d++)if(0===r.indexOf(i[d])){l=!0;break}n=l?!1:!0}else r=e.substring(0,a),e=e.substring(a),n&&t++,n=!1;return r=new Array(t+1).join(\"    \")+r.trim(),0===e.length?r:r+\"\\\\n\"+o(e.trim(),t,n,i)}var a=i.editor(),s=i.toolbar(),l=i.editable(),d=i.codable(),u=i.popover(),f=i.handle(),h=a.data(\"options\"),p=c.html(l,!1),v=[\"<img\",\"<br\",\"<hr\"];p=o(p,0,!1,v),d.val(p);var g=s.find(\".btn[data-event=codeview]\").height(),m=e(window).height()-g;if(d.height(l.height()),n.invoke(\"toolbar.updateCodeview\",s,!0),n.invoke(\"popover.hide\",u),n.invoke(\"handle.hide\",f),a.addClass(\"codeview\"),d.focus(),r.hasCodeMirror){var b=t.fromTe';\n  builder.string += 'xtArea(d[0],h.codemirror);if(h.codemirror.tern){var k=new t.TernServer(h.codemirror.tern);b.ternServer=k,b.on(\"cursorActivity\",function(e){k.updateArgHints(e)})}a.hasClass(\"fullscreen\")?b.setSize(null,m):b.setSize(null,l.outerHeight()),d.data(\"cmEditor\",b)}},this.deactivate=function(e){var t=e.holder(),i=e.editor(),o=e.toolbar(),a=e.editable(),s=e.codable(),l=i.data(\"options\");if(r.hasCodeMirror){var d=s.data(\"cmEditor\");s.val(d.getValue()),d.toTextArea()}var u=c.value(s,l.prettifyHtml)||c.emptyPara,f=a.html()!==u;a.html(u),a.height(l.height?s.height():\"auto\"),i.removeClass(\"codeview\"),f&&n.bindCustomEvent(t,a.data(\"callbacks\"),\"change\")(a.html(),a),a.focus(),n.invoke(\"toolbar.updateCodeview\",o,!1)}},M=function(t){var n=e(document);this.attach=function(e,t){t.airMode||t.disableDragAndDrop?n.on(\"drop\",function(e){e.preventDefault()}):this.attachDragAndDropEvent(e,t)},this.attachDragAndDropEvent=function(i,o){var r=e(),a=i.editor(),s=i.dropzone(),l=s.find(\".note-dropzone-message\");n.on(\"dragenter\",function(e){var n=t.invoke(\"codeview.isActivated\",i),d=a.width()>0&&a.height()>0;n||r.length||!d||(a.addClass(\"dragover\"),s.width(a.width()),s.height(a.height()),l.text(o.langInfo.image.dragImageHere)),r=r.add(e.target)}).on(\"dragleave\",function(e){r=r.not(e.target),r.length||a.removeClass(\"dragover\")}).on(\"drop\",function(){r=e(),a.removeClass(\"dragover\")}),s.on(\"dragenter\",function(){s.addClass(\"hover\"),l.text(o.langInfo.image.dropImage)}).on(\"dragleave\",function(){s.removeClass(\"hover\"),l.text(o.langInfo.image.dragImageHere)}),s.on(\"drop\",function(n){var i=n.originalEvent.dataTransfer,o=c.makeLayoutInfo(n.currentTarget||n.target);if(i&&i.files&&i.files.length)n.preventDefault(),o.editable().focus(),t.insertImages(o,i.files);else for(var r=function(){o.holder().materialnote(\"insertNode\",this)},a=0,s=i.types.length;s>a;a++){var l=i.types[a],d=i.getData(l);l.toLowerCase().indexOf(\"text\")>-1?o.holder().materialnote(\"pasteHTML\",d):e(d).each(r)}}).on(\"dragover\",!1)}},R=function(t){var n;this.attach=function(o){(window.clipboardData||r.isFF)&&(n=e(\"<div />\").attr(\"contenteditable\",!0).css({position:\"absolute\",left:-1e5,opacity:0}),o.editable().after(n),n.one(\"paste\",i),o.editable().on(\"keydown\",function(e){e.ctrlKey&&86===e.keyCode&&(t.invoke(\"saveRange\",o.editable()),n&&n.focus())})),o.editable().on(\"paste\",i)};var i=function(e){var i=e.originalEvent.clipboardData,o=c.makeLayoutInfo(e.currentTarget||e.target),r=o.editable();if(!i||!i.items||!i.items.length){var a=r.data(\"callbacks\");if(!a.onImageUpload)return;return void setTimeout(function(){if(n){var e=n[0].firstChild;if(e){if(t.invoke(\"restoreRange\",r),c.isImg(e)){for(var i=e.src,a=atob(i.split(\",\")[1]),s=new Uint8Array(a.length),l=0;l<a.length;l++)s[l]=a.charCodeAt(l);var d=new Blob([s],{type:\"image/png\"});d.name=\"clipboard.png\",t.invoke(\"focus\",r),t.insertImages(o,[d])}else t.invoke(\"pasteHTML\",r,n.html());n.remove()}}},0)}var l=s.head(i.items),d=\"file\"===l.kind&&-1!==l.type.indexOf(\"image/\");d&&t.insertImages(o,[l.getAsFile()]),t.invoke(\"editor.afterCommand\",r)}},E=function(t){var n=function(e,t){e.toggleClass(\"disabled\",!t),e.attr(\"disabled\",!t)},i=function(e,t){e.on(\"keypress\",function(e){e.keyCode===p.code.ENTER&&t.trigger(\"click\")})};this.showLinkDialog=function(t,o,r){return e.Deferred(function(t){var a=o.find(\".note-link-dialog\"),s=a.find(\".note-link-text\"),l=s.next(\"label\"),d=a.find(\".note-link-url\"),c=a.find(\".note-link-btn\"),u=a.find(\".btnClose\"),f=a.find(\"input[type=checkbox]\");a.openModal(),s.val(r.text),r.text.length>0&&l.addClass(\"active\"),s.on(\"keyup\",function(){n(c,s.val()&&d.val()),r.text=s.val()}),u.click(function(e){e.preventDefault(),a.closeModal()}),r.url||(r.url=r.text||\"http://\",n(c,r.text)),d.on(\"keyup\",function(){n(c,s.val()&&d.val()),r.text||(l.addClass(\"active\"),s.val(d.val()))}).val(r.url).trigger(\"focus\").trigger(\"select\"),i(d,c),i(s,c),f.prop(\"checked\",r.newWindow),c.one(\"click\",function(n){n.preventDefault(),t.resolve({range:r.range,url:d.val(),text:s.val(),newWindow:f.is(\":checked\")}),e(\".note-link-text\").val(\"\"),e(\".note-link-text\").next(\"label\").removeClass(\"active\"),e(\".note-link-url\").val(\"\"),a.closeModal()})}).promise()},this.show=function(e){var n=e.editor(),i=e.dialog(),o=e.editable(),r=e.popover(),a=t.invoke(\"editor.getLinkInfo\",o),s=n.data(\"options\");t.invoke(\"editor.saveRange\",o),this.showLinkDialog(o,i,a).then(function(e){t.invoke(\"editor.restoreRange\",o),t.invoke(\"editor.createLink\",o,e,s),t.invoke(\"popover.hide\",r)}).fail(function(){t.invoke(\"editor.restoreRange\",o)})}},H=function(t){var n=function(e,t){e.toggleClass(\"disabled\",!t),e.attr(\"disabled\",!t)},i=function(e,t){e.on(\"keypress\",function(e){e.keyCode===p.code.ENTER&&t.trigger(\"click\")})};this.show=function(e){var n=e.dialog(),i=e.editable();t.invoke(\"editor.saveRange\",i),this.showImageDialog(i,n).then(function(n){t.invoke(\"editor.restoreRange\",i),\"string\"==typeof n?t.invoke(\"editor.insertImage\",i,n):t.insertImages(e,n)}).fail(function(){t.invoke(\"editor.restoreRange\",i)})},this.showImageDialog=function(t,o){return e.Deferred(function(e){var t=o.find(\".note-image-dialog\"),r=o.find(\".note-image-input\"),a=o.find(\".note-image-url\"),s=o.find(\".note-image-btn\"),l=t.find(\".btnClose\");t.openModal(),r.replaceWith(r.clone().on(\"change\",function(){e.resolve(this.files||this.value),a.val(\"\"),t.closeModal(),e.resolve()}).val(\"\")),s.click(function(n){n.preventDefault(),e.resolve(a.val()),a.val(\"\"),t.closeModal(),e.resolve()}),l.click(function(e){e.preventDefault(),t.closeModal()}),a.on(\"keyup paste\",function(e){var t;t=\"paste\"===e.type?e.originalEvent.clipboardData.getData(\"text\"):a.val(),n(s,t)}),i(a,s)})}},A=function(t){this.showHelpDialog=function(t,n){return e.Deferred(function(e){var t=n.find(\".note-help-dialog\");t.openModal(),e.resolve()}).promise()},this.show=function(e){var n=e.dialog(),i=e.editable();t.invoke(\"editor.saveRange\",i,!0),this.showHelpDialog(i,n).then(function(){t.invoke(\"editor.restoreRange\",i)})}},D=function(){var t=this.modules={editor:new C(this),toolbar:new w(this),statusbar:new N(this),popover:new P(this),handle:new L(this),fullscreen:new S(this),codeview:new I(this),dragAndDrop:new M(this),clipboard:new R(this),linkDialog:new E(this),imageDialog:new H(this),helpDialog:new A(this)};this.invoke=function(){var e=s.head(s.from(arguments)),t=s.tail(s.from(arguments)),n=e.split(\".\"),i=n.length>1,o=i&&s.head(n),r=i?s.last(n):s.head(n),a=this.getModule(o),l=a[r];return l&&l.apply(a,t)},this.getModule=function(e){return this.modules[e]||this.modules.editor};var n=this.bindCustomEvent=function(e,t,n){return function(){var i=t[a.namespaceToCamel(n,\"on\")];return i&&i.apply(e[0],arguments),e.trigger(\"materialnote.\"+n,arguments)}};this.insertImages=function(i,o){var r=i.editor(),a=i.editable(),s=i.holder(),l=a.data(\"callbacks\"),d=r.data(\"options\");l.onImageUpload?n(s,l,\"image.upload\")(o):e.each(o,function(e,i){var o=i.name;d.maximumImageFileSize&&d.maximumImageFileSize<i.size?n(s,l,\"image.upload.error\")(d.langInfo.image.maximumFileSizeError):h.readFileAsDataURL(i).then(function(e){t.editor.insertImage(a,e,o)}).fail(function(){n(s,l,\"image.upload.error\")(d.langInfo.image.maximumFileSizeError)})})};var i={showLinkDialog:function(e){t.linkDialog.show(e)},showImageDialog:function(e){t.imageDialog.show(e)},showHelpDialog:function(e){t.helpDialog.show(e)},fullscreen:function(e){t.fullscreen.toggle(e)},codeview:function(e){t.codeview.toggle(e)}},o=function(e){c.isImg(e.target)&&e.preventDefault()},l=function(e){var n=c.makeLayoutInfo(e.currentTarget||e.target);t.editor.removeBogus(n.editable()),d(e)},d=function(e){setTimeout(function(){var n=c.makeLayoutInfo(e.currentTarget||e.target),i=t.editor.currentStyle(e.target);if(i){var o=n.editor().data(\"options\").airMode;o||t.toolbar.update(n.toolbar(),i),t.popover.update(n.popover(),i,o),t.handle.update(n.handle(),i,o)}},0)},u=function(e){var n=c.makeLayoutInfo(e.currentTarget||e.target);t.popover.hide(n.popover()),t.handle.hide(n.handle())},f=function(t){var n=e(t.target).closest(\"[data-event]\");n.length&&t.preventDefault()},g=function(n){var o=e(n.target).closest(\"[data-event]\");if(o.length){var r,a=o.attr(\"data-event\"),l=o.attr(\"data-value\"),u=o.attr(\"data-hide\"),f=c.makeLayoutInfo(n.target);if(-1!==e.inArray(a,[\"resize\",\"floatMe\",\"removeMedia\",\"imageShape\",\"imageClass\"])){var h=f.handle().find(\".note-control-selection\");r=e(h.data(\"target\"))}if(u&&o.parents(\".popover\").hide(),e.isFunction(e.materialnote.pluginEvents[a]))e.materialnote.pluginEvents[a](n,t.editor,f,l);else if(t.editor[a]){var p=f.editable();p.focus(),t.editor[a](p,l,r),n.preventDefault()}else i[a]&&(i[a].call(this,f),n.preventDefault());if(-1!==e.inArray(a,[\"backColor\",\"foreColor\"])){var v=f.editor().data(\"options\",v),g=v.airMode?t.popover:t.toolbar;g.updateRecentColor(s.head(o),a,l)}d(n)}},m=26,b=function(t,n){var i,o=e(t.target.parentNode),r=o.parent(),a=o.next(),s=o.find(\".note-dimension-picker-mousecatcher\"),l=o.find(\".note-dimension-picker-highlighted\"),d=o.find(\".note-dimension-picker-unhighlighted\"),c=r.find(\"[id$=\\'-hoverable\\']\"),u=r.find(\"[id$=\\'-bordered\\']\"),f=r.find(\"[id$=\\'-striped\\']\"),h=r.find(\"[id$=\\'-responsive\\']\");if(void 0===t.offsetX){var p=e(t.target).offset();i={x:t.pageX-p.left,y:t.pageY-p.top}}else i={x:t.offsetX,y:t.offsetY};var v={c:Math.ceil(i.x/m)||1,r:Math.ceil(i.y/m)||1},g=[];c.is(\":checked\")&&g.push(\"hoverable\"),u.is(\":checked\")&&g.push(\"bordered\"),f.is(\":checked\")&&g.push(\"striped\"),h.is(\":checked\")&&g.push(\"responsive-table\"),l.css({width:v.c*m+\"px\",height:v.r*m+\"px\"}),s.attr(\"data-value\",v.c+\"x\"+v.r+\"x\"+g.join(\"x\")),d.css({width:n.insertTableMaxSize*m+\"px\"}),3<v.r&&v.r<n.insertTableMaxSize.row&&d.css({height:(v.r+1)*m+\"px\"}),a.html(v.c+\" x \"+v.r)};this.bindKeyMap=function(n,o){var r=n.editor(),a=n.editable();a.on(\"keydown\",function(s){var l=[];s.metaKey&&l.push(\"CMD\"),s.ctrlKey&&!s.altKey&&l.push(\"CTRL\"),s.shiftKey&&l.push(\"SHIFT\");var d=p.nameFromCode[s.keyCode];d&&l.push(d);var c,u=l.join(\"+\"),f=o[u];if(f){if(c=e.materialnote.pluginEvents[u],e.isFunction(c)&&c(s,t.editor,n))return!1;c=e.materialnote.pluginEvents[f],e.isFunction(c)?c(s,t.editor,n):t.editor[f]?(t.editor[f](a,r.data(\"options\")),s.preventDefault()):i[f]&&(i[f].call(this,n),s.preventDefault())}else p.isEdit(s.keyCode)&&t.editor.afterCommand(a)})},this.attach=function(e,n){n.shortcuts&&this.bindKeyMap(e,n.keyMap[r.isMac?\"mac\":\"pc\"]),e.editable().on(\"mousedown\",o),e.editable().on(\"keyup mouseup\",l),e.editable().on(\"scroll\",u),t.clipboard.attach(e,n),t.handle.attach(e,n),e.popover().on(\"click\",g),e.popover().on(\"mousedown\",f),t.dragAndDrop.attach(e,n),n.airMode||(e.toolbar().on(\"click\",g),e.toolbar().on(\"mousedown\",f),t.statusbar.attach(e,n));var i=n.airMode?e.popover():e.toolbar(),a=i.find(\".note-dimension-picker-mousecatcher\");a.css({width:n.insertTableMaxSize.col*m+\"px\",height:n.insertTableMaxSize.row*m+\"px\"}).on(\"mousemove\",function(e){b(e,n)}),e.editor().data(\"options\",n),r.isMSIE||setTimeout(function(){document.execCommand(\"styleWithCSS\",0,n.styleWithSpan)},0);var d=new v(e.editable());e.editable().data(\"NoteHistory\",d),e.editable().data(\"callbacks\",{onInit:n.onInit,onFocus:n.onFocus,onBlur:n.onBlur,onKeydown:n.onKeydown,onKeyup:n.onKeyup,onMousedown:n.onMousedown,onEnter:n.onEnter,onPaste:n.onPaste,onBeforeCommand:n.onBeforeCommand,onChange:n.onChange,onImageUpload:n.onImageUpload,onImageUploadError:n.onImageUploadError,onMediaDelete:n.onMediaDelete,onToolbarClick:n.onToolbarClick}),c.isTextarea(s.head(e.holder()))&&e.holder().closest(\"form\").submit(function(){e.holder().val(e.holder().code())})},this.attachCustomEvent=function(t,i){var o=t.holder(),a=t.editable(),l=a.data(\"callbacks\");a.focus(n(o,l,\"focus\")),a.blur(n(o,l,\"blur\")),a.keydown(function(e){e.keyCode===p.code.ENTER&&n(o,l,\"enter\").call(this,e),n(o,l,\"keydown\").call(this,e)}),a.keyup(n(o,l,\"keyup\")),a.on(\"mousedown\",n(o,l,\"mousedown\")),a.on(\"mouseup\",n(o,l,\"mouseup\")),a.on(\"scroll\",n(o,l,\"scroll\")),a.on(\"paste\",n(o,l,\"paste\"));var d=r.isMSIE?\"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted\":\"input\";a.on(d,function(){n(o,l,\"change\")(a.html(),a)}),i.airMode||(t.toolbar().click(n(o,l,\"toolbar.click\")),t.popover().click(n(o,l,\"popover.click\"))),c.isTextarea(s.head(o))&&o.closest(\"form\").submit(function(e){n(o,l,\"submit\").call(this,e,o.code())}),n(o,l,\"init\")(t);for(var u=0,f=e.materialnote.plugins.length;f>u;u++)e.isFunction(e.materialnote.plugins[u].init)&&e.materialnote.plugins[u].init(t)},this.detach=function(e,t){e.holder().off(),e.editable().off(),e.popover().off(),e.handle().off(),e.dialog().off(),t.airMode||(e.dropzone().off(),e.toolbar().off(),e.statusbar().off())}},F=function(){var t=function(e,t){var n=t.event,i=t.value,o=t.title,r=t.style,a=t.btnClassName,s=t.className,l=t.dropdown,d=t.hide;if(l){var c=[\\'<div class=\"btn-group\\',(s?\" \"+s:\"\")+\\'\">\\',\\'<button class=\"waves-effect waves-light btn dropdown \\'+(a?a:\"\")+\\'\"\\',o?\\' title=\"\\'+o+\\'\"\\':\"\",n?\\' data-event=\"\\'+n+\\'\"\\':\"\",i?\" data-value=\\'\"+i+\"\\'\":\"\",d?\" data-hide=\\'\"+d+\"\\'\":\"\",\\'><i class=\"material-icons left\">arrow_drop_down<\\/i>\\'+e+\"<\\/button>\",l,\"<\\/div>\"].join(\"\");return c}var u=[\\'<div class=\"waves-effect waves-light btn\\',(s?\" \"+s:\"\")+\\'\"\\',o?\\' title=\"\\'+o+\\'\"\\':\"\",r?\\' style=\"\\'+r+\\'\"\\':\"\",n?\\' data-event=\"\\'+n+\\'\"\\':\"\",i?\" data-value=\\'\"+i+\"\\'\":\"\",d?\" data-hide=\\'\"+d+\"\\'\":\"\",\\' tabindex=\"-1\">\\'+e+\"<\\/div>\"].join(\"\");return u},n=function(e,n){var i=\\'<i class=\"material-icons\">\\'+e+\"<\\/i>\";return t(i,n)},i=function(t,n){var i=e(\\'<div class=\"\\'+t+\\' popover bottom in\" style=\"display: none;\"><div class=\"arrow\"><\\/div><div class=\"popover-content\"><\\/div><\\/div>\\');return i.find(\".popover-content\").append(n),i},o=function(e,t,n,i){var o=[\\'<div class=\"\\'+e+\\' modal modal-fixed-footer\">\\',\\'<div class=\"modal-content\">\\',t?\"<h4>\"+t+\"<\\/h4>\":\"\",\"<p>\"+n+\"<\\/p>\",\"<\\/div>\",i?\\'<div class=\"modal-footer\">\\'+i+\"<\\/div>\":\"\",\"<\\/div>\"].join(\"\");return o},s={picture:function(e,t){return n(t.iconPrefix+t.icons.image.image,{event:\"showImageDialog\",title:e.image.image,hide:!0})},link:function(e,t){return n(t.iconPrefix+t.icons.link.link,{event:\"showLinkDialog\",title:e.link.link,hide:!0})},table:function(e,t){var i=\\'<ul class=\"note-table dropdown-menu\"><div class=\"row\"><div class=\"col s6 preventDropClose\"><input type=\"checkbox\" id=\"\\'+materialUniqueId+\\'-bordered\" checked=\"checked\" /><label for=\"\\'+materialUniqueId+\\'-bordered\">\\'+e.table.bordered+\\'<\\/label><\\/div><div class=\"col s6 preventDropClose\"><input type=\"checkbox\" id=\"\\'+materialUniqueId+\\'-striped\" checked=\"checked\" /><label for=\"\\'+materialUniqueId+\\'-striped\">\\'+e.table.striped+\\'<\\/label><\\/div><\\/div><div class=\"row\"><div class=\"col s6 preventDropClose\"><input type=\"checkbox\" id=\"\\'+materialUniqueId+\\'-hoverable\" checked=\"checked\" /><label for=\"\\'+materialUniqueId+\\'-hoverable\">\\'+e.table.hoverable+\\'<\\/label><\\/div><div class=\"col s6 preventDropClose\"><input type=\"checkbox\" id=\"\\'+materialUniqueId+\\'-responsive\" checked=\"checked\" /><label for=\"\\'+materialUniqueId+\\'-responsive\">\\'+e.table.responsive+\\'<\\/label><\\/div><\\/div><div class=\"note-dimension-picker\"><div class=\"note-dimension-picker-mousecatcher\" data-event=\"insertTable\" data-value=\"1x1\"><\\/div><div class=\"note-dimension-picker-highlighted\"><\\/div><div class=\"note-dimension-picker-unhighlighted\"><\\/div><\\/div><div class=\"note-dimension-display\"> 1 x 1 <\\/div><\\/ul>\\';\\n    return n(t.iconPrefix+t.icons.table.table,{title:e.table.table,dropdown:i})},style:function(e,t){var i=t.styleTags.reduce(function(t,n){var i=e.style[\"p\"===n?\"normal\":n];return t+\\'<li><div data-event=\"formatBlock\" data-value=\"\\'+n+\\'\">\\'+(\"p\"===n||\"pre\"===n?i:\"<\"+n+\">\"+i+\"<\\/\"+n+\">\")+\"<\\/div><\\/li>\"},\"\");return n(t.iconPrefix+t.icons.style.style,{title:e.style.style,dropdown:\\'<ul class=\"dropdown-menu largeDropdown\">\\'+i+\"<\\/ul>\"})},fontname:function(e,n){var i=[],o=n.fontNames.reduce(function(e,t){return r.isFontInstalled(t)||-1!==n.fontNamesIgnoreCheck.indexOf(t)?(i.push(t),e+\\'<li><div data-event=\"fontName\" href=\"#\" data-value=\"\\'+t+\\'\" style=\"font-family:\\\\\\'\\'+t+\\'\\\\\\'\"><i class=\"material-icons tiny transparent\">\\'+n.iconPrefix+n.icons.misc.check+\"<\\/i> \"+t+\"<\\/div><\\/li>\"):e},\"\"),a=r.isFontInstalled(n.defaultFontName),s=a?n.defaultFontName:i[0],l=\\'<div class=\"note-current-fontname\">\\'+s+\"<\\/div>\";return t(l,{title:e.font.name,className:\"note-fontname\",dropdown:\\'<ul class=\"dropdown-menu note-check\">\\'+o+\"<\\/ul>\"})},fontsize:function(e,n){var i=n.fontSizes.reduce(function(e,t){return e+\\'<li><div data-event=\"fontSize\" href=\"#\" data-value=\"';\n  builder.string += '\\'+t+\\'\"><i class=\"material-icons tiny transparent\">\\'+n.iconPrefix+n.icons.misc.check+\"<\\/i> \"+t+\"<\\/div><\\/li>\"},\"\"),o=\\'<span class=\"note-current-fontsize\">15<\\/span>\\';return t(o,{title:e.font.size,className:\"note-fontsize\",dropdown:\\'<ul class=\"dropdown-menu note-check\">\\'+i+\"<\\/ul>\"})},color:function(e,n){var i=\\'<i class=\"material-icons\">\\'+n.icons.color.recent+\"<\\/i>\",o=t(i,{className:\"note-recent-color\",title:e.color.recent,style:\"color: \"+n.defaultTextColor+\"; background-color: \"+n.defaultBackColor+\";\",event:\"color\",value:\\'{\"backColor\": \"\\'+n.defaultBackColor+\\'\"}\\'}),r=\\'<ul id=\"colors\" class=\"dropdown-menu\"><li><div class=\"col s12\"><ul class=\"tabs\"><li class=\"tab\"><a href=\"#\\'+materialUniqueId+\\'-foreColor\" class=\"active\">\\'+e.color.foreground+\\'<\\/a><\\/li><li class=\"tab\"><a href=\"#\\'+materialUniqueId+\\'-backColor\">\\'+e.color.background+\\'<\\/a><\\/li><\\/ul><\\/div><div class=\"col s12 colorTable\"><div id=\"\\'+materialUniqueId+\\'-foreColor\"><div class=\"note-color-reset waves-effect waves-light btn\" data-event=\"foreColor\" data-value=\"\\'+n.defaultTextColor+\\'\" title=\"\\'+e.color.reset+\\'\">\\'+e.color.resetToDefault+\\'<\\/div><div class=\"colorName\"><\\/div><div class=\"note-color-palette\" data-target-event=\"foreColor\"><\\/div><\\/div><div id=\"\\'+materialUniqueId+\\'-backColor\"><div class=\"note-color-reset waves-effect waves-light btn\" data-event=\"backColor\" data-value=\"\\'+n.defaultBackColor+\\'\" title=\"\\'+e.color.transparent+\\'\">\\'+e.color.setTransparent+\\'<\\/div><div class=\"colorName\"><\\/div><div class=\"note-color-palette\" data-target-event=\"backColor\"><\\/div><\\/div><\\/div><\\/li><\\/ul>\\',a=t(\"\",{title:e.color.more,className:\"closeLeft\",dropdown:r});return a+o},bold:function(e,t){return n(t.iconPrefix+t.icons.font.bold,{event:\"bold\",title:e.font.bold})},italic:function(e,t){return n(t.iconPrefix+t.icons.font.italic,{event:\"italic\",title:e.font.italic})},underline:function(e,t){return n(t.iconPrefix+t.icons.font.underline,{event:\"underline\",title:e.font.underline})},strikethrough:function(e,t){return n(t.iconPrefix+t.icons.font.strikethrough,{event:\"strikethrough\",title:e.font.strikethrough})},superscript:function(e,t){return n(t.iconPrefix+t.icons.font.superscript,{event:\"superscript\",title:e.font.superscript})},subscript:function(e,t){return n(t.iconPrefix+t.icons.font.subscript,{event:\"subscript\",title:e.font.subscript})},clear:function(e,t){return n(t.iconPrefix+t.icons.font.clear,{event:\"removeFormat\",title:e.font.clear})},ul:function(e,t){return n(t.iconPrefix+t.icons.lists.unordered,{event:\"insertUnorderedList\",title:e.lists.unordered})},ol:function(e,t){return n(t.iconPrefix+t.icons.lists.ordered,{event:\"insertOrderedList\",title:e.lists.ordered})},leftButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:\"justifyLeft\"})},centerButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:\"justifyCenter\"})},rightButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:\"justifyRight\"})},justifyButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:\"justifyFull\"})},outdentButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:\"outdent\"})},indentButton:function(e,t){return n(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:\"indent\"})},paragraph:function(e,t){var i=n(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:\"justifyLeft\"}),o=n(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:\"justifyCenter\"}),r=n(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:\"justifyRight\"}),a=n(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:\"justifyFull\"}),s=n(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:\"outdent\"}),l=n(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:\"indent\"}),d=\\'<ul class=\"dropdown-menu\"><div class=\"note-align btn-group\">\\'+i+o+r+a+\\'<\\/div><div class=\"note-list btn-group\">\\'+l+s+\"<\\/div><\\/ul>\";return n(t.iconPrefix+t.icons.paragraph.paragraph,{title:e.paragraph.paragraph,dropdown:d})},lineheight:function(e,t){var i=t.lineHeights.reduce(function(e,n){return e+\\'<li><div data-event=\"lineHeight\" href=\"#\" data-value=\"\\'+parseFloat(n)+\\'\"><i class=\"material-icons tiny transparent\">\\'+t.iconPrefix+t.icons.misc.check+\"<\\/i> \"+n+\"<\\/div><\\/li>\"},\"\");return n(t.iconPrefix+t.icons.font.height,{title:e.font.height,className:\"note-height\",dropdown:\\'<ul class=\"dropdown-menu note-check\">\\'+i+\"<\\/ul>\"})},help:function(e,t){return n(t.iconPrefix+t.icons.options.help,{event:\"showHelpDialog\",title:e.options.help,hide:!0})},fullscreen:function(e,t){return n(t.iconPrefix+t.icons.options.fullscreen,{event:\"fullscreen\",title:e.options.fullscreen})},codeview:function(e,t){return n(t.iconPrefix+t.icons.options.codeview,{event:\"codeview\",title:e.options.codeview})},undo:function(e,t){return n(t.iconPrefix+t.icons.history.undo,{event:\"undo\",title:e.history.undo})},redo:function(e,t){return n(t.iconPrefix+t.icons.history.redo,{event:\"redo\",title:e.history.redo})},hr:function(e,t){return n(t.iconPrefix+t.icons.hr.insert,{event:\"insertHorizontalRule\",title:e.hr.insert})}},l=function(o,r){var a=function(){var e=n(r.iconPrefix+r.icons.link.edit,{title:o.link.edit,event:\"showLinkDialog\",hide:!0}),t=n(r.iconPrefix+r.icons.link.unlink,{title:o.link.unlink,event:\"unlink\"}),a=\\'<a href=\"http://www.google.com\" target=\"_blank\">www.google.com<\\/a>&nbsp;&nbsp;<div class=\"note-insert btn-group\">\\'+e+t+\"<\\/div>\";return i(\"note-link-popover\",a)},l=function(){var e=(t(\\'<span class=\"note-fontsize-10\">100%<\\/span>\\',{title:o.image.resizeFull,event:\"resize\",value:\"1\"}),t(\\'<span class=\"note-fontsize-10\">50%<\\/span>\\',{title:o.image.resizeHalf,event:\"resize\",value:\"0.5\"}),t(\\'<span class=\"note-fontsize-10\">25%<\\/span>\\',{title:o.image.resizeQuarter,event:\"resize\",value:\"0.25\"}),n(r.iconPrefix+r.icons.image.floatLeft,{title:o.image.floatLeft,event:\"floatMe\",value:\"left\"})),a=n(r.iconPrefix+r.icons.image.floatRight,{title:o.image.floatRight,event:\"floatMe\",value:\"right\"}),s=n(r.iconPrefix+r.icons.image.floatNone,{title:o.image.floatNone,event:\"floatMe\",value:\"none\"}),l=n(r.iconPrefix+r.icons.image.shapeRounded,{title:o.image.shapeRounded,event:\"imageClass\",value:\"img-rounded\"}),d=n(r.iconPrefix+r.icons.image.shapeCircle,{title:o.image.shapeCircle,event:\"imageClass\",value:\"img-circle\"}),c=n(r.iconPrefix+r.icons.image.shapeThumbnail,{title:o.image.shapeThumbnail,event:\"imageClass\",value:\"img-thumbnail\"}),u=n(r.iconPrefix+r.icons.image.bordered,{title:o.image.bordered,event:\"imageClass\",value:\"img-bordered\"}),f=n(r.iconPrefix+r.icons.image.shapeNone,{title:o.image.shapeNone,event:\"imageShape\",value:\"\"}),h=n(r.iconPrefix+r.icons.image.remove,{title:o.image.remove,event:\"removeMedia\",value:\"none\"}),p=\\'<div class=\"btn-group\">\\'+e+a+s+\\'<\\/div><div class=\"btn-group\">\\'+l+d+c+u+f+\\'<\\/div><div class=\"btn-group\">\\'+h+\"<\\/div>\";return i(\"note-image-popover\",p)},d=function(){for(var t=e(\"<div />\"),n=0,a=r.airPopover.length;a>n;n++){for(var l=r.airPopover[n],d=e(\\'<div class=\"note-\\'+l[0]+\\' btn-group\">\\'),c=0,u=l[1].length;u>c;c++){var f=e(s[l[1][c]](o,r));f.attr(\"data-name\",l[1][c]),d.append(f)}t.append(d)}return i(\"note-air-popover\",t.children())},c=e(\\'<div class=\"note-popover\" />\\');return c.append(a()),c.append(l()),r.airMode&&c.append(d()),c},d=function(){return\\'<div class=\"note-handle\"><div class=\"note-control-selection\"><div class=\"note-control-selection-bg\"><\\/div><div class=\"note-control-sizing note-control-se\"><\\/div><div class=\"note-control-selection-info\"><\\/div><\\/div><\\/div>\\'},u=function(e,t){var n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(\"<tr><td>\"+t[i].kbd+\"<\\/td><td>\"+t[i].text+\"<\\/td><\\/tr>\");return\"<thead><tr><th>\"+e+\"<\\/th><th>(keys)<\\/th><\\/tr><\\/thead><tbody>\"+n.join(\"\")+\"<\\/tbody>\"},f=function(e){var t=[{kbd:\"\\u2318 + B\",text:e.font.bold},{kbd:\"\\u2318 + I\",text:e.font.italic},{kbd:\"\\u2318 + U\",text:e.font.underline},{kbd:\"\\u2318 + \\\\\\\\\",text:e.font.clear}];return u(e.shortcut.textFormatting,t)},h=function(e){var t=[{kbd:\"\\u2318 + Z\",text:e.history.undo},{kbd:\"\\u2318 + \\u21E7 + Z\",text:e.history.redo},{kbd:\"\\u2318 + ]\",text:e.paragraph.indent},{kbd:\"\\u2318 + [\",text:e.paragraph.outdent},{kbd:\"\\u2318 + ENTER\",text:e.hr.insert}];return u(e.shortcut.action,t)},p=function(e){var t=[{kbd:\"\\u2318 + \\u21E7 + L\",text:e.paragraph.left},{kbd:\"\\u2318 + \\u21E7 + E\",text:e.paragraph.center},{kbd:\"\\u2318 + \\u21E7 + R\",text:e.paragraph.right},{kbd:\"\\u2318 + \\u21E7 + J\",text:e.paragraph.justify},{kbd:\"\\u2318 + \\u21E7 + NUM7\",text:e.lists.ordered},{kbd:\"\\u2318 + \\u21E7 + NUM8\",text:e.lists.unordered}];return u(e.shortcut.paragraphFormatting,t)},v=function(e){var t=[{kbd:\"\\u2318 + NUM0\",text:e.style.normal},{kbd:\"\\u2318 + NUM1\",text:e.style.h1},{kbd:\"\\u2318 + NUM2\",text:e.style.h2},{kbd:\"\\u2318 + NUM3\",text:e.style.h3},{kbd:\"\\u2318 + NUM4\",text:e.style.h4},{kbd:\"\\u2318 + NUM5\",text:e.style.h5},{kbd:\"\\u2318 + NUM6\",text:e.style.h6}];return u(e.shortcut.documentStyle,t)},g=function(e,t){var n=[\\'<table class=\"striped hoverable\">\\'+h(e,t)+\"<\\/table>\",\\'<table class=\"striped hoverable\">\\'+v(e,t)+\"<\\/table>\",\\'<table class=\"striped hoverable\">\\'+f(e,t)+\"<\\/table>\",\\'<table class=\"striped hoverable\">\\'+p(e,t)+\"<\\/table>\"].join(\"<br>\");return t.extraKeys,n},m=function(e){return e.replace(/\\u2318/g,\"Ctrl\").replace(/\\u21E7/g,\"Shift\")},b={image:function(e,t){var n=\"\";if(t.maximumImageFileSize){var i=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024)),r=1*(t.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+\" \"+\" KMGTP\"[i]+\"B\";n=\"<small>\"+e.image.maximumFileSize+\" : \"+r+\"<\\/small>\"}var a=\\'<div class=\"row\"><div class=\"col s12\"><div class=\"file-field input-field\"><div class=\"btn\"><span>\\'+e.image.image+\\'<\\/span><input class=\"note-image-input\" name=\"files\" type=\"file\" /><\\/div><div class=\"file-path-wrapper\"><input class=\"file-path\" type=\"text\" /><\\/div><\\/div><\\/div><\\/div><div class=\"row\"><div class=\"input-field col s12\"><input class=\"note-image-url\" type=\"text\" /><label>\\'+e.image.url+\"<\\/label><\\/div><\\/div>\",s=\\'<button href=\"#\" class=\"waves-effect waves-light btn note-image-btn disabled\" disabled>\\'+e.image.insert+\\'<\\/button><button class=\"waves-effect waves-light btn btnClose\">\\'+e.shortcut.close+\"<\\/button>\";return o(\"note-image-dialog\",e.image.insert,a,s)},link:function(e,t){var n=\\'<div class=\"row\"><div class=\"input-field col s12\"><input class=\"note-link-text\" type=\"text\" /><label>\\'+e.link.textToDisplay+\\'<\\/label><\\/div><\\/div><div class=\"row\"><div class=\"input-field col s12\"><input class=\"note-link-url\" type=\"text\" value=\"http://\" /><label class=\"active\">\\'+e.link.url+\"<\\/label><\\/div><\\/div>\"+(t.disableLinkTarget?\"\":\\'<div class=\"row\"><div class=\"col s12\"><input type=\"checkbox\" id=\"\\'+materialUniqueId+\\'-noteInsertLinkNewWindow\" checked=\"checked\" /><label for=\"\\'+materialUniqueId+\\'-noteInsertLinkNewWindow\">\\'+e.link.openInNewWindow+\"<\\/label><\\/div><\\/div>\"),i=\\'<button href=\"#\" class=\"waves-effect waves-light btn note-link-btn disabled\" disabled>\\'+e.link.insert+\\'<\\/button><button class=\"waves-effect waves-light btn btnClose\">\\'+e.shortcut.close+\"<\\/button>\";return o(\"note-link-dialog\",e.link.insert,n,i)},help:function(e,t){var n=r.isMac?g(e,t):m(g(e,t)),i=\\'<button href=\"#\" class=\"waves-effect waves-light btn modal-close\">\\'+e.shortcut.close+\"<\\/button>\";return o(\"note-help-dialog\",e.shortcut.shortcuts,n,i)}},k=function(t,n){var i=\"\";return e.each(b,function(e,o){i+=o(t,n)}),\\'<div class=\"note-dialog\">\\'+i+\"<\\/div>\"},y=function(){return\\'<div class=\"note-resizebar\"><div class=\"note-icon-bar\"><\\/div><div class=\"note-icon-bar\"><\\/div><div class=\"note-icon-bar\"><\\/div><\\/div>\\'},C=function(e){return r.isMac&&(e=e.replace(\"CMD\",\"\\u2318\").replace(\"SHIFT\",\"\\u21E7\")),e.replace(\"BACKSLASH\",\"\\\\\\\\\").replace(\"SLASH\",\"/\").replace(\"LEFTBRACKET\",\"[\").replace(\"RIGHTBRACKET\",\"]\")},x=function(t,n,i){e(document).ready(function(){var i=a.invertObject(n),o=t.find(\".btn\");o.each(function(t,n){var o=e(n),r=i[o.data(\"event\")],a=o.attr(\"title\");r&&o.attr(\"data-tooltip\",function(t,n){return a=a+\" (\"+C(r)+\")\",e(this).removeAttr(\"title\"),a}),o.attr(\"data-position\",\"bottom\"),o.attr(\"data-tooltip\",a),o.removeAttr(\"title\")}).ckTooltip({container:t,position:\"top\",delay:30})})},w=function(t,n){var i=n.colors,o=n.colorTitles;t.find(\".note-color-palette\").each(function(){for(var t=e(this),n=t.attr(\"data-target-event\"),r=[],a=0,s=i.length;s>a;a++){for(var l=i[a],d=o[a],c=[],u=0,f=l.length;f>u;u++){var h=l[u],p=d[u];c.push([\\'<button type=\"button\" class=\"note-color-btn\" style=\"background-color:\\',h,\\';\" data-event=\"\\',n,\\'\" data-value=\"\\',h,\\'\" data-description=\"\\',p,\\'\" data-toggle=\"button\" tabindex=\"-1\"><\\/button>\\'].join(\"\"))}r.push(\\'<div class=\"note-color-row\">\\'+c.join(\"\")+\"<\\/div>\")}t.html(r.join(\"\")),t.find(\"button\").mouseenter(function(){t.siblings(\".colorName\").html(e(this).data(\"description\"))}),t.mouseleave(function(){e(this).siblings(\".colorName\").html(\"\")})})};this.createLayoutByAirMode=function(t,n){var i=n.langInfo,o=n.keyMap[r.isMac?\"mac\":\"pc\"],s=a.uniqueId();t.addClass(\"note-air-editor note-editable\"),t.attr({id:\"note-editor-\"+s,contentEditable:!0});var c=document.body,u=e(l(i,n));u.addClass(\"note-air-layout\"),u.attr(\"id\",\"note-popover-\"+s),u.appendTo(c),x(u,o),w(u,n);var f=e(d());f.addClass(\"note-air-layout\"),f.attr(\"id\",\"note-handle-\"+s),f.appendTo(c);var h=e(k(i,n));h.addClass(\"note-air-layout\"),h.attr(\"id\",\"note-dialog-\"+s),h.find(\"button.close, a.modal-close\").click(function(){e(this).closest(\".modal\").closeModal()}),h.appendTo(c)},this.createLayoutByFrame=function(t,n){function i(){e(window).scroll(function(){var t=a.hasClass(\"fullscreen\");if(t)return!1;var i,o,r,s,l,d,c,u,f,h=a.children(\".note-toolbar\"),p=(h.outerHeight(),a.children(\".note-editable\")),v=p.outerHeight();a.width;f=e(\".\"+n.otherStaticBarClass).outerHeight(),f||(f=0),c=e(document).scrollTop(),i=h.offset().top,o=a.offset().top,r=o+v,s=i-f,d=r-f,l=o-f,c>s&&d>c?(u=c-a.offset().top+f,h.css({top:u+\"px\",\"z-index\":2e3})):i>c&&d>c&&(h.css({top:0,\"z-index\":1052}),c>l&&(u=c-a.offset().top+f,h.css({top:u+\"px\",\"z-index\":2e3})))})}var o=n.langInfo,a=e(\\'<div class=\"note-editor\"><\\/div>\\');n.width&&a.width(n.width),n.height>0&&e(\\'<div class=\"note-statusbar\">\\'+(n.disableResizeEditor?\"\":y())+\"<\\/div>\").prependTo(a);var u=!t.is(\":disabled\"),f=e(\\'<div class=\"note-editable\" contentEditable=\"\\'+u+\\'\"><\\/div>\\').prependTo(a);n.height&&f.height(n.height),n.direction&&f.attr(\"dir\",n.direction);var h=t.attr(\"placeholder\")||n.placeholder;h&&f.attr(\"data-placeholder\",h),f.html(c.html(t)),e(\\'<textarea class=\"note-codable\"><\\/textarea>\\').prependTo(a);for(var p=e(\\'<div class=\"note-toolbar btn-toolbar\" />\\'),v=0,g=n.toolbar.length;g>v;v++){for(var m=n.toolbar[v][0],b=n.toolbar[v][1],C=e(\\'<div class=\"note-\\'+m+\\' btn-group\" />\\'),T=0,N=b.length;N>T;T++){var P=s[b[T]];if(e.isFunction(P)){var L=e(P(o,n));L.attr(\"data-name\",b[T]),C.append(L)}}p.append(C)}p.prependTo(a);var S=n.keyMap[r.isMac?\"mac\":\"pc\"];w(p,n),x(p,S,\"bottom\"),n.followingToolbar&&i();var I=e(l(o,n)).prependTo(a);w(I,n),x(I,S),e(d()).prependTo(a);var M=e(k(o,n)).prependTo(a);M.find(\"button.close, a.modal-close\").click(function(){e(this).closest(\".modal\").closeModal()}),e(\\'<div class=\"note-dropzone\"><div class=\"note-dropzone-message\"><\\/div><\\/div>\\').prependTo(a),a.insertAfter(t),t.hide()},this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0},this.noteEditorFromHolder=function(t){return t.hasClass(\"note-air-editor\")?t:t.next().hasClass(\"note-editor\")?t.next():e()},this.createLayout=function(e,t){t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t)},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(t.length)return t.data(\"holder\",e),c.buildLayoutInfo(t)},this.removeLayout=function(e,t,n){n.airMode?(e.removeClass(\"note-air-editor note-editable\").removeAttr(\"id contentEditable\"),t.popover().remove(),t.handle().remove(),t.dialog().remove()):(e.html(t.editable().html()),t.editor().remove(),e.show())},this.getTemplate=function(){return{button:t,iconButton:n,dialog:o}},this.addButtonInfo=function(e,t){s[e]=t},this.addDialogInfo=function(e,t){b[e]=t}};e.materialnote=e.materialnote||{},e.extend(e.materialnote,f);var B=new F,U=new D;e.extend(e.materialnote,{renderer:B,eventHandler:U,core:{agent:r,list:s,dom:c,range:u},pluginEvents:{},plugins:[]}),e.materialnote.addPlugin=function(t){e.materialnote.plugins.push(t),t.buttons&&e.each(t.buttons,function(e,t){B.addButtonInfo(e,t)}),t.dialogs&&e.each(t.dialogs,function(e,t){B.addDialogInfo(e,t)}),t.events&&e.each(t.events,function(t,n){e.';\n  builder.string += 'materialnote.pluginEvents[t]=n}),t.langs&&e.each(t.langs,function(t,n){e.materialnote.lang[t]&&e.extend(e.materialnote.lang[t],n)}),t.options&&e.extend(e.materialnote.options,t.options)},e.fn.extend({materialnote:function(){var t=e.type(s.head(arguments)),n=\"string\"===t,i=\"object\"===t,o=i?s.head(arguments):{};if(o=e.extend({},e.materialnote.options,o),o.icons=e.extend({},e.materialnote.options.icons,o.icons),o.langInfo=e.extend(!0,{},e.materialnote.lang[\"en-US\"],e.materialnote.lang[o.lang]),!n&&i)for(var r=0,a=e.materialnote.plugins.length;a>r;r++){var l=e.materialnote.plugins[r];o.plugin[l.name]&&(e.materialnote.plugins[r]=e.extend(!0,l,o.plugin[l.name]))}this.each(function(t,n){materialUniqueId=e(n).attr(\"id\");var i=e(n);if(!B.hasNoteEditor(i)){B.createLayout(i,o);var r=B.layoutInfoFromHolder(i);i.data(\"layoutInfo\",r),U.attach(r,o),U.attachCustomEvent(r,o)}});var d=this.first();if(d.length){var c=B.layoutInfoFromHolder(d);if(n){var u=s.head(s.from(arguments)),f=s.tail(s.from(arguments)),h=[u,c.editable()].concat(f);return U.invoke.apply(U,h)}o.focus&&c.editable().focus()}return e(this).each(function(t,n){function i(t,i){var r=e(t).next(\"ul.dropdown-menu\");e(t).parent(\".btn-group\");r.slideUp(0),e(\".preventDropClose\").click(function(e){e.stopPropagation()}),e(t).click(function(o){var l=Math.round(e(t).parent(\".btn-group\").offset().left-a.offset().left),d=parseInt(r.css(\"border-left-width\")),c=n.outerWidth(),u=d;r.css({\"max-width\":c+\"px\"});var f=r.outerWidth(),h=f+l;h>=c&&(u=h-c,s||(u+=d)),r.css({left:\"-\"+u+\"px\"});var p=!0;r.is(\":visible\")&&(p=!1),i.find(\"ul.dropdown-menu\").slideUp(200),p&&r.slideToggle(200),o.stopPropagation()}),o.unbind().click(function(e){d=!1})}var o,r,a,s=!1;if(e(n).hasClass(\"note-air-editor\")){var l=e(this).attr(\"id\");l&&(l=l.substring(l.lastIndexOf(\"-\")+1,l.length)),n=e(\"#note-popover-\"+l).find(\".note-air-popover\"),r=n.find(\"ul.tabs\"),o=n.find(\"li.tab a\"),a=e(n).find(\".popover-content button.dropdown\"),s=!0}else n=e(n).next(\".note-editor\"),r=n.find(\"ul.tabs\"),o=n.find(\"li.tab a\"),a=e(n).find(\".note-toolbar button.dropdown\");var d=!0;e(window).click(function(e){d&&n.find(\"ul.dropdown-menu\").slideUp(200),d=!0,e.stopPropagation()}),a.each(function(e,t){i(t,n)}),r.tabs()}),this},code:function(t){if(void 0===t){var n=this.first();if(!n.length)return;var i=B.layoutInfoFromHolder(n),o=i&&i.editable();if(o&&o.length){var r=U.invoke(\"codeview.isActivated\",i);return U.invoke(\"codeview.sync\",i),r?i.codable().val():i.editable().html()}return c.value(n)}return this.each(function(n,i){var o=B.layoutInfoFromHolder(e(i)),r=o&&o.editable();r&&r.html(t)}),this},destroy:function(){return this.each(function(t,n){var i=e(n);if(B.hasNoteEditor(i)){var o=B.layoutInfoFromHolder(i),r=o.editor().data(\"options\");U.detach(o,r),B.removeLayout(i,o,r)}}),this}})}),function(e){e.fn.ckTooltip=function(t){var n=null,i=!1,o=null,r=5,a={delay:350};return t=e.extend(a,t),this.each(function(){var a=e(this),s=e(\"<span><\\/span>\").text(a.attr(\"data-tooltip\")),l=e(\"<div><\\/div>\");l.addClass(\"material-tooltip\").append(s),l.appendTo(e(\"body\"));var d=e(\"<div><\\/div>\").addClass(\"backdrop\");d.appendTo(l),d.css({top:0,left:0}),e.event.special.destroyed={remove:function(e){e.handler&&e.handler()}},e(this).bind(\"destroyed\",function(){l.remove()}),e(this).on({mouseenter:function(e){var s=a.data(\"delay\");s=void 0===s||\"\"===s?t.delay:s,n=0,o=setInterval(function(){if(n+=10,n>=s&&i===!1){i=!0,l.css({display:\"block\",left:\"0px\",top:\"0px\"}),l.children(\"span\").text(a.attr(\"data-tooltip\"));var e=a.outerWidth(),t=a.outerHeight(),o=a.attr(\"data-position\"),c=l.outerHeight(),u=l.outerWidth(),f=\"0px\",h=\"0px\",p=8;\"top\"===o?(l.css({top:a.offset().top-c-r,left:a.offset().left+e/2-u/2}),f=\"-10px\",d.css({borderRadius:\"14px 14px 0 0\",transformOrigin:\"50% 90%\",marginTop:c,marginLeft:u/2-d.width()/2})):\"left\"===o?(l.css({top:a.offset().top+t/2-c/2,left:a.offset().left-u-r}),h=\"-10px\",d.css({width:\"14px\",height:\"14px\",borderRadius:\"14px 0 0 14px\",transformOrigin:\"95% 50%\",marginTop:c/2,marginLeft:u})):\"right\"===o?(l.css({top:a.offset().top+t/2-c/2,left:a.offset().left+e+r}),h=\"+10px\",d.css({width:\"14px\",height:\"14px\",borderRadius:\"0 14px 14px 0\",transformOrigin:\"5% 50%\",marginTop:c/2,marginLeft:\"0px\"})):(l.css({top:a.offset().top+a.outerHeight()+r,left:a.offset().left+e/2-u/2}),f=\"+10px\",d.css({marginLeft:u/2-d.width()/2})),p=u/8,8>p&&(p=8),(\"right\"===o||\"left\"===o)&&(p=u/10,6>p&&(p=6)),l.velocity({opacity:1,marginTop:f,marginLeft:h},{duration:150,queue:!1}),d.css({display:\"block\"}).velocity({opacity:1},{duration:50,delay:0,queue:!1}).velocity({scale:p},{duration:150,delay:0,queue:!1,easing:\"easeInOutQuad\"})}},10)},mouseleave:function(){clearInterval(o),n=0,l.velocity({opacity:0,marginTop:0,marginLeft:0},{duration:150,queue:!1,delay:50}),d.velocity({opacity:0,scale:1},{duration:150,delay:50,queue:!1,complete:function(){d.css(\"display\",\"none\"),l.css(\"display\",\"none\"),i=!1}})}})})}}(jQuery);';\n  return builder.string;\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditorClientBundle_1default_1InlineClientBundleGenerator$2_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditorClientBundle_default_InlineClientBundleGenerator/2', 1736);\nfunction $clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorCssInitializer(){\n  $clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorCssInitializer = emptyMethod;\n  richEditorCss = new MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$1;\n}\n\nfunction $clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorJsInitializer(){\n  $clinit_MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$richEditorJsInitializer = emptyMethod;\n  richEditorJs = new MaterialRichEditorClientBundle_default_InlineClientBundleGenerator$2;\n}\n\nvar richEditorDebugCss, richEditorDebugJs;\nfunction MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$1(){\n}\n\ndefineClass(1733, 1, {}, MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$1);\n_.getName = function getName_34(){\n  return 'richEditorDebugCss';\n}\n;\n_.getText = function getText_25(){\n  var builder;\n  builder = new StringBuilder;\n  builder.string += '\\n/* variables \\n=================================================================================*/\\n.editorDialogs .modal, .note-editor .modal {\\n  background-color: #FFFFFF;\\n  color: #404040;\\n  z-index: 1057 !important;\\n  backface-visibility: hidden;\\n}\\n.editorDialogs .modal .input-field input:not([readonly]), .editorDialogs .modal .input-field input.datepicker, .note-editor .modal .input-field input:not([readonly]), .note-editor .modal .input-field input.datepicker {\\n  border-color: #000 !important; }\\n.editorDialogs .modal .input-field input:focus:not([readonly]), .editorDialogs .modal .input-field input.datepicker:focus, .editorDialogs .modal textarea.materialize-textarea:focus:not([readonly]), .note-editor .modal .input-field input:focus:not([readonly]), .note-editor .modal .input-field input.datepicker:focus, .note-editor .modal textarea.materialize-textarea:focus:not([readonly]) {\\n  box-shadow: 0 1px 0 0 grey!important;\\n  border-color: grey !important;\\n}\\n.editorDialogs .modal label, .editorDialogs .modal .input-field input:not([readonly]) + label, .editorDialogs .modal .input-field input.datepicker + label, .editorDialogs .modal .input-field .prefix, .editorDialogs .modal .note-editor + label, .note-editor .modal label, .note-editor .modal .input-field input:not([readonly]) + label, .note-editor .modal .input-field input.datepicker + label, .note-editor .modal .input-field .prefix, .note-editor .modal .note-editor + label {\\n  color: #000 !important; }\\n.editorDialogs .modal .input-field input:focus:not([readonly]) + label, .editorDialogs .modal .input-field input.datepicker:focus + label, .editorDialogs .modal .input-field .prefix.active, .editorDialogs .modal textarea.materialize-textarea:focus:not([readonly]) + label, .note-editor .modal .input-field input:focus:not([readonly]) + label, .note-editor .modal .input-field input.datepicker:focus + label, .note-editor .modal .input-field .prefix.active, .note-editor .modal textarea.materialize-textarea:focus:not([readonly]) + label {\\n  color: grey;\\n}\\n.editorDialogs .modal .btn, .editorDialogs .modal .btn-large, .note-editor .modal .btn, .note-editor .modal .btn-large {\\n  background-color: #2196F3;\\n  color: #fff;\\n  cursor: pointer;\\n}\\n.editorDialogs .modal .btn:hover, .editorDialogs .modal .btn-large:hover, .note-editor .modal .btn:hover, .note-editor .modal .btn-large:hover {\\n  background-color: #2196F3 !important;\\n  color: #fff;\\n}\\n.editorDialogs .modal .modal-footer, .note-editor .modal .modal-footer {\\n  background-color: #E9E9E9;\\n}\\n.editorDialogs .modal .modal-footer .btnClose, .note-editor .modal .modal-footer .btnClose {\\n  margin-right: 15px;\\n  background-color: transparent !important;\\n  color: grey;\\n}\\n.editorDialogs .modal .modal-footer .btnClose:hover, .note-editor .modal .modal-footer .btnClose:hover {\\n  color: grey;\\n  background-color: transparent !important;\\n}\\n.editorDialogs .modal .canvasContainerEmpty, .note-editor .modal .canvasContainerEmpty {\\n  border: solid 5px #9c27b0; }\\n\\n.note-editor {\\n  position: relative;\\n  border-left: 3px solid #e9e9e9;\\n  border-bottom: 3px solid #e9e9e9;\\n  border-right: 3px solid #e9e9e9;\\n  background: #E9E9E9;\\n}\\n.note-editor .img-circle {\\n  border-radius: 50%; }\\n.note-editor .img-rounded {\\n  border-radius: 5%; }\\n.note-editor .img-thumbnail {\\n  border: solid 5px #e9e9e9;\\n  height: 200px; }\\n.note-editor .img-bordered {\\n  border: solid 5px #e9e9e9; }\\n.note-editor .btn:hover, .note-editor .btn-large:hover {\\n  background-color: #E9E9E9 !important;\\n}\\n.note-editor .btn.active, .note-editor .active.btn-large {\\n  background-color: #E0E0E0;\\n}\\n.note-editor .note-editable ul li {\\n  list-style-type: square !important;\\n  display: list-item;\\n  list-style-position: inside; }\\n.note-editor .note-dialog > div {\\n  display: none; }\\n.note-editor .note-dialog .form-group {\\n  margin-right: 0;\\n  margin-left: 0; }\\n.note-editor .note-dialog .note-modal-form {\\n  margin: 0; }\\n.note-editor .note-dialog .note-image-dialog .note-dropzone {\\n  min-height: 100px;\\n  margin-bottom: 10px;\\n  font-size: 30px;\\n  line-height: 4;\\n  color: lightgray;\\n  text-align: center;\\n  border: 4px dashed lightgray; }\\n.note-editor .transparent {\\n  opacity: 0; }\\n.note-editor .note-resizebar {\\n  background-color: #e9e9e9;\\n  width: 100%;\\n  height: 13px;\\n  cursor: ns-resize;\\n  padding-top: 1px; }\\n.note-editor .note-resizebar .note-icon-bar {\\n  width: 20px;\\n  margin: 2px auto;\\n  border-top: 2px solid #545454; }\\n.note-editor .note-toolbar {\\n  position: relative;\\n  color: #000;\\n  background-color: #e9e9e9;\\n  margin: 0;\\n  z-index: 995 !important;\\n  padding: 2%;\\n}\\n.note-editor .note-toolbar ul {\\n  padding: 0; }\\n.note-editor .note-toolbar .btn.disabled, .note-editor .note-toolbar .disabled.btn-large, .note-editor .note-toolbar button.disabled {\\n  display: none; }\\n.note-editor .note-toolbar .dropdown {\\n  cursor: pointer; }\\n.note-editor .note-toolbar .note-current-fontname {\\n  min-width: 134px;\\n  display: inline-block;\\n  text-align: left; }\\n.note-editor .note-handle .note-control-selection {\\n  position: absolute;\\n  display: none;\\n  border: 2px solid #e9e9e9; }\\n.note-editor .note-handle .note-control-selection .note-control-selection-bg {\\n  width: 100%;\\n  height: 100%;\\n  z-index: 3;\\n  background-color: rgba(117, 117, 117, 0.3); }\\n.note-editor .note-handle .note-control-selection > div {\\n  position: absolute; }\\n.note-editor .note-handle .note-control-selection .note-control-handle {\\n  width: 7px;\\n  height: 7px;\\n  border: 1px solid black; }\\n.note-editor .note-handle .note-control-selection .note-control-holder {\\n  width: 7px;\\n  height: 7px;\\n  border: 1px solid black; }\\n.note-editor .note-handle .note-control-selection .note-control-sizing {\\n  width: 15px;\\n  height: 15px;\\n  background-color: #e9e9e9;\\n  z-index: 5;\\n  cursor: se-resize; }\\n.note-editor .note-handle .note-control-selection .note-control-nw {\\n  top: -5px;\\n  left: -5px;\\n  border-right: 0;\\n  border-bottom: 0; }\\n.note-editor .note-handle .note-control-selection .note-control-ne {\\n  top: -5px;\\n  right: -5px;\\n  border-bottom: 0;\\n  border-left: none; }\\n.note-editor .note-handle .note-control-selection .note-control-sw {\\n  bottom: -5px;\\n  left: -5px;\\n  border-top: 0;\\n  border-right: 0; }\\n.note-editor .note-handle .note-control-selection .note-control-se {\\n  right: -5px;\\n  bottom: -5px; }\\n.note-editor .note-handle .note-control-selection .note-control-selection-info {\\n  right: 0;\\n  bottom: 0;\\n  padding: 5px;\\n  margin: 17px;\\n  font-size: 15px;\\n  color: #000;\\n  background-color: #e9e9e9;\\n  z-index: 5; }\\n\\n.note-dialog .note-help-dialog {\\n  color: #777777;\\n}\\n.note-dialog .note-help-dialog h4 {\\n  color: #000; }\\n.note-dialog .note-help-dialog thead {\\n  background-color: #777777;\\n  color: #fff;\\n}\\n.note-dialog .note-help-dialog tbody {\\n  background-color: #e0e0e0; }\\n\\n.note-editor .btn-group, .popover .btn-group {\\n  display: inline-block;\\n  margin-right: 10px;\\n  position: relative;\\n}\\n.note-editor .btn-group ul, .popover .btn-group ul {\\n  padding: 0; }\\n.note-editor .btn-group .closeLeft, .popover .btn-group .closeLeft {\\n  padding-right: 0 !important;\\n  margin-right: 0 !important; }\\n.note-editor .btn-group .closeLeft i, .popover .btn-group .closeLeft i {\\n  margin-right: 0 !important; }\\n.note-editor .btn-group i.left, .popover .btn-group i.left {\\n  margin-right: 5px; }\\n.note-editor .btn, .note-editor .btn-large, .popover .btn, .popover .btn-large {\\n  border-radius: 0 !important;\\n  box-shadow: none !important;\\n  padding: 0 9px !important;\\n  color: #7F7A7A;\\n  background: #fff;\\n}\\n.note-editor .btnSecond, .popover .btnSecond {\\n  background-color: #B71C1C !important; }\\n.note-editor .btnThird, .popover .btnThird {\\n  background-color: #4a148c !important; }\\n.note-editor note-toolbar button, .note-editor button, .popover note-toolbar button, .popover button {\\n  border: none;\\n  height: 36px;\\n  text-transform: none;\\n}\\n.note-editor [type=\"checkbox\"]:checked + label:before, .note-editor [type=\"checkbox\"]:checked + label:before, .popover [type=\"checkbox\"]:checked + label:before, .popover [type=\"checkbox\"]:checked + label:before {\\n  border-right-color: #9e9e9e !important;\\n  border-bottom-color: #9e9e9e !important;\\n}\\n.note-editor .note-palette-title, .popover .note-palette-title {\\n  padding: 0 !important; }\\n.note-editor .colorName, .popover .colorName {\\n  display: inline-block;\\n  color: #000; }\\n@media only screen and (max-width: 600px) {\\n  .note-editor .colorName, .popover .colorName {\\n    display: none; } }\\n.note-editor .note-color-palette, .popover .note-color-palette {\\n  line-height: 10px;\\n  border: solid 3px #e9e9e9;\\n  padding: 0 !important;\\n  overflow-x: scroll;\\n  overflow-y: hidden; }\\n.note-editor .note-color-palette .note-color-row, .popover .note-color-palette .note-color-row {\\n  padding: 0 !important;\\n  min-width: 300px; }\\n.note-editor .note-color-palette button.note-color-btn, .popover .note-color-palette button.note-color-btn {\\n  width: 20px;\\n  height: 20px;\\n  padding: 0;\\n  margin: 0; }\\n.note-editor .note-color-palette .note-color-btn:hover:after, .popover .note-color-palette .note-color-btn:hover:after {\\n  position: absolute;\\n  width: 30px;\\n  height: 30px;\\n  content: \"\";\\n  background-color: inherit;\\n  margin-top: -15px;\\n  margin-left: -15px; }\\n.note-editor .note-dimension-picker, .popover .note-dimension-picker {\\n  overflow: hidden; }\\n.note-editor .largeDropdown, .popover .largeDropdown {\\n  width: 290px; }\\n.note-editor .dropdown-menu, .popover .dropdown-menu {\\n  z-index: 1033; }\\n.note-editor .dropdown-menu.note-check, .popover .dropdown-menu.note-check {\\n  min-width: 80px; }\\n.note-editor .dropdown-menu label, .popover .dropdown-menu label {\\n  color: #000 !important; }\\n.note-editor ul.dropdown-menu, .popover ul.dropdown-menu {\\n  position: absolute;\\n  top: 20px;\\n  background-color: #FFFFFF;\\n  box-shadow: 0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\\n}\\n.note-editor ul.dropdown-menu#colors, .popover ul.dropdown-menu#colors {\\n  width: 342px; }\\n.note-editor ul.dropdown-menu#colors .indicator, .popover ul.dropdown-menu#colors .indicator {\\n  width: 50%;\\n  left: 0;\\n}\\n.note-editor ul.dropdown-menu .colorTable, .popover ul.dropdown-menu .colorTable {\\n  padding: 3px 0; }\\n.note-editor ul.dropdown-menu .tabs, .popover ul.dropdown-menu .tabs {\\n}\\n.popover ul.dropdown-menu .tabs:hover {\\n  background-color: #e9e9e9;\\n}\\n.note-editor ul.dropdown-menu .tabs .tab a, .note-editor ul.dropdown-menu .tabs .tab a:hover, .popover ul.dropdown-menu .tabs .tab a, .popover ul.dropdown-menu .tabs .tab a:hover {\\n  color: #7F7A7A;\\n}\\n.note-editor ul.dropdown-menu .tabs .indicator, .popover ul.dropdown-menu .tabs .indicator {\\n  background-color: #868181;\\n}\\n.note-editor ul.dropdown-menu li, .popover ul.dropdown-menu li {\\n  list-style-type: none;\\n  padding: 0 !important; }\\n.note-editor ul.dropdown-menu li div, .popover ul.dropdown-menu li div {\\n  padding: 3px 15px;\\n  cursor: pointer;\\n}\\n\\n.note-popover .popover {\\n  position: absolute;\\n  max-width: none;\\n  color: #000; }\\n.note-popover .popover .arrow {\\n  width: 0;\\n  height: 0;\\n  border-style: solid;\\n  border-width: 0 10px 10px 10px;\\n  border-color: transparent transparent #e9e9e9 transparent; }\\n.note-popover .popover .popover-content {\\n  background-color: #e9e9e9; }\\n.note-popover .popover .popover-content > a {\\n  margin-left: 12px; }\\n.note-popover .popover .popover-content a {\\n  display: inline-block;\\n  max-width: 200px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  vertical-align: middle; }\\n.note-popover .popover .popover-content .arrow {\\n  left: 20px; }\\n.note-popover .popover .popover-content .btn-group {\\n  display: inline-block; }\\n.note-popover .popover .popover-content .btn-group .btn, .note-popover .popover .popover-content .btn-group .btn-large {\\n  border-radius: 0 !important;\\n  box-shadow: none !important;\\n  padding: 0 9px !important;\\n  background-color: #e9e9e9; }\\n\\n.note-popover .popover .popover-content .note-para .dropdown-menu, .note-toolbar .note-para .dropdown-menu {\\n  min-width: 172px;\\n  padding: 5px; }\\n\\n.note-popover .popover .popover-content .note-para .dropdown-menu > div:first-child, .note-toolbar .note-para .dropdown-menu > div:first-child {\\n  margin-right: 5px; }\\n\\n.note-editor .note-dropzone {\\n  position: absolute;\\n  z-index: 100;\\n  display: none;\\n  color: #87cefa;\\n  background-color: white;\\n  border: 2px dashed #87cefa;\\n  opacity: .95;\\n  pointer-event: none; }\\n\\n.note-editor .note-dropzone .note-dropzone-message {\\n  display: table-cell;\\n  font-size: 28px;\\n  font-weight: bold;\\n  text-align: center;\\n  vertical-align: middle; }\\n\\n.note-editor .note-dropzone.hover {\\n  color: #098ddf;\\n  border: 2px dashed #098ddf; }\\n\\n.note-editor.dragover .note-dropzone {\\n  display: table; }\\n\\n.note-editor.fullscreen {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  z-index: 2021;\\n  width: 100%; }\\n\\n.note-editor.fullscreen .note-editable {\\n  background-color: white; }\\n\\n.note-editor.fullscreen .note-resizebar {\\n  display: none; }\\n\\n.note-editor.codeview .note-editable {\\n  display: none; }\\n\\n.note-editor.codeview .note-codable {\\n  display: block; }\\n\\n.note-editor .note-statusbar {\\n  background-color: #f5f5f5; }\\n\\n.note-editor .note-editable[contenteditable=true]:empty:not(:focus):before {\\n  color: #a9a9a9;\\n  content: attr(data-placeholder); }\\n\\n.note-editor .note-editable {\\n  padding: 10px;\\n  overflow: auto;\\n  outline: 0;\\n  background: #fff;\\n  margin: 2%;\\n  box-shadow: 0 8px 17px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);\\n}\\n\\n.note-editor .note-editable[contenteditable=\"false\"] {\\n  background-color: #e5e5e5; }\\n\\n.note-editor .note-codable {\\n  display: none;\\n  width: 100%;\\n  padding: 10px;\\n  margin-bottom: 0;\\n  font-family: Menlo, Monaco, monospace, sans-serif;\\n  font-size: 14px;\\n  color: #ccc;\\n  background-color: #222;\\n  border: 0;\\n  -webkit-border-radius: 0;\\n  -moz-border-radius: 0;\\n  border-radius: 0;\\n  box-shadow: none;\\n  -webkit-box-sizing: border-box;\\n  -moz-box-sizing: border-box;\\n  -ms-box-sizing: border-box;\\n  box-sizing: border-box;\\n  resize: none; }\\n\\n.note-air-editor {\\n  outline: 0; }\\n\\n.note-popover .popover .popover-content,\\n.note-toolbar {\\n  padding: 0;\\n  margin: 0; }\\n\\n.note-popover .popover .popover-content > .btn-group,\\n.note-toolbar > .btn-group {\\n  margin-top: 0;\\n  margin-right: 5px;\\n  margin-left: 0;\\n  background: #fff;\\n  margin: 4px;\\n  box-shadow: 0 2px 5px 0 rgba(0,0,0,0.16),0 2px 10px 0 rgba(0,0,0,0.12);\\n}\\n\\n.note-popover .popover .popover-content .btn-group .note-table,\\n.note-toolbar .btn-group .note-table {\\n  min-width: 0;\\n  padding: 5px; }\\n\\n.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker,\\n.note-toolbar .btn-group .note-table .note-dimension-picker {\\n  font-size: 18px; }\\n\\n.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-mousecatcher,\\n.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-mousecatcher {\\n  position: absolute !important;\\n  z-index: 3;\\n  width: 260px;\\n  height: 260px;\\n  cursor: pointer; }\\n\\n.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-unhighlighted,\\n.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-unhighlighted {\\n  position: relative !important;\\n  z-index: 1;\\n  width: 312px;\\n  height: 130px;\\n  background-size: 26px 26px;\\n  background-image: repeating-linear-gradient(0deg, #FFFFFF, #FFFFFF 2px, transparent 2px, transparent 26px), repeating-linear-gradient(-90deg, transparent, transparent 2px, #E9E9E9 2px, #E9E9E9 26px);\\n}\\n\\n.note-popover .popover .popover-content .btn-group .note-table .note-dimension-picker .note-dimension-picker-highlighted,\\n.note-toolbar .btn-group .note-table .note-dimension-picker .note-dimension-picker-highlighted {\\n  position: absolute !important;\\n  z-index: 2;\\n  width: 26px;\\n  height: 26px;\\n  background-size: 26px 26px;\\n  background-image: repeating-linear-gradient(0deg, #fff, #fff 2px, transparent 2px, transparent 26px), repeating-linear-gradient(-90deg, transparent, transparent 2px, #9e9e9e 2px, #9e9e9e 26px);\\n}\\n\\n.note-popover .popover .popover-content .note-style h1,\\n.note-toolbar .note-style h1,\\n.note-popover .popover .popover-content .note-style h2,\\n.note-toolbar .note-style h2,\\n.note-popover .popover .popover-content .note-style h3,\\n.note-toolbar .note-style h3,\\n.note-popover .popover .popover-content .note-style h4,\\n.note-toolbar .note-style h4,\\n.note-popover .popover .popover-content .note-style h';\n  builder.string += '5,\\n.note-toolbar .note-style h5,\\n.note-popover .popover .popover-content .note-style h6,\\n.note-toolbar .note-style h6,\\n.note-popover .popover .popover-content .note-style blockquote,\\n.note-toolbar .note-style blockquote {\\n  margin: 0; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-toggle,\\n.note-toolbar .note-color .dropdown-toggle {\\n  width: 20px;\\n  padding-left: 5px; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group,\\n.note-toolbar .note-color .dropdown-menu .btn-group {\\n  margin: 0; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group:first-child,\\n.note-toolbar .note-color .dropdown-menu .btn-group:first-child {\\n  margin: 0 5px; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-palette-title,\\n.note-toolbar .note-color .dropdown-menu .btn-group .note-palette-title {\\n  margin: 2px 7px;\\n  font-size: 12px;\\n  text-align: center;\\n  border-bottom: 1px solid #eee; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-reset,\\n.note-toolbar .note-color .dropdown-menu .btn-group .note-color-reset {\\n  padding: 0 3px;\\n  margin: 3px;\\n  font-size: 11px;\\n  cursor: pointer;\\n  -webkit-border-radius: 5px;\\n  -moz-border-radius: 5px;\\n  border-radius: 5px; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-row,\\n.note-toolbar .note-color .dropdown-menu .btn-group .note-color-row {\\n  height: 20px; }\\n\\n.note-popover .popover .popover-content .note-color .dropdown-menu .btn-group .note-color-reset:hover,\\n.note-toolbar .note-color .dropdown-menu .btn-group .note-color-reset:hover {\\n  background: #eee; }\\n\\n/*.note-popover .popover .popover-content .dropdown-menu,\\n.note-toolbar .dropdown-menu {\\n    min-width: 90px\\n}*/\\n.note-popover .popover .popover-content .dropdown-menu.right,\\n.note-toolbar .dropdown-menu.right {\\n  right: 0;\\n  left: auto; }\\n\\n.note-popover .popover .popover-content .dropdown-menu.right::before,\\n.note-toolbar .dropdown-menu.right::before {\\n  right: 9px;\\n  left: auto !important; }\\n\\n.note-popover .popover .popover-content .dropdown-menu.right::after,\\n.note-toolbar .dropdown-menu.right::after {\\n  right: 10px;\\n  left: auto !important; }\\n\\n.note-popover .popover .popover-content .dropdown-menu.note-check li a i,\\n.note-toolbar .dropdown-menu.note-check li a i {\\n  color: deepskyblue;\\n  visibility: hidden; }\\n\\n.note-popover .popover .popover-content .dropdown-menu.note-check li a.checked i,\\n.note-toolbar .dropdown-menu.note-check li a.checked i {\\n  visibility: visible; }\\n\\n.note-popover .popover .popover-content .note-fontsize-10,\\n.note-toolbar .note-fontsize-10 {\\n  font-size: 10px; }\\n\\n.codeview .note-style, .codeview .note-fonts,  .codeview .note-color, .codeview .note-undo, .codeview .note-para, .codeview .note-height {\\n  display: none;\\n}\\n\\n.codeview .note-misc{\\n  background: #E0E0E0 !important;\\n  padding-right: 12px !important;\\n}';\n  return builder.string;\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditorDebugClientBundle_1default_1InlineClientBundleGenerator$1_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator/1', 1733);\nfunction MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$2(){\n}\n\ndefineClass(1734, 1, {}, MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$2);\n_.getName = function getName_35(){\n  return 'richEditorDebugJs';\n}\n;\n_.getText = function getText_26(){\n  var builder;\n  builder = new StringBuilder;\n  builder.string += \"/**\\n * MaterialNote v1.2.1\\n * Super simple wysiwyg editor on Materialize\\n * a fork of materialnote.js => http://materialnote.org/\\n *\\n * original summernote credits:\\n * summernote.js\\n * Copyright 2013-2015 Alan Hong. and other contributors\\n * summernote (and so materialNote) may be freely distributed under the MIT license./\\n * (https://raw.githubusercontent.com/Cerealkillerway/materialNote/master/license.txt)\\n *\\n * edited by CK (http://www.web-forge.info)\\n * thanks to Tox for code review (http://emanuele.itoscano.com/)\\n */\\n(function(factory) {\\n    /* global define */\\n    if (typeof define === 'function' && define.amd) {\\n        // AMD. Register as an anonymous module.\\n        define(['jquery'], factory);\\n    } else {\\n        // Browser globals: jQuery\\n        factory(window.jQuery);\\n    }\\n}(function($) {\\n\\n    if (!Array.prototype.reduce) {\\n        /**\\n         * Array.prototype.reduce polyfill\\n         * @param {Function} callback\\n         * @param {Value} [initialValue]\\n         * @return {Value}\\n         * @see http://goo.gl/WNriQD\\n         */\\n        Array.prototype.reduce = function(callback) {\\n            var t = Object(this), len = t.length >>> 0, k = 0, value;\\n\\n            if (arguments.length === 2) {\\n                value = arguments[1];\\n            } else {\\n                while (k < len && !(k in t)) {\\n                    k++;\\n                }\\n                if (k >= len) {\\n                    throw new TypeError('Reduce of empty array with no initial value');\\n                }\\n                value = t[k++];\\n            }\\n            for (; k < len; k++) {\\n                if (k in t) {\\n                    value = callback(value, t[k], k, t);\\n                }\\n            }\\n            return value;\\n        };\\n    }\\n\\n    if ('function' !== typeof Array.prototype.filter) {\\n        /**\\n         * Array.prototype.filter polyfill\\n         * @param {Function} func\\n         * @return {Array}\\n         * @see http://goo.gl/T1KFnq\\n         */\\n        Array.prototype.filter = function(func) {\\n            var t = Object(this), len = t.length >>> 0;\\n            var res = [];\\n            var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\\n\\n            for (var i = 0; i < len; i++) {\\n                if (i in t) {\\n                    var val = t[i];\\n\\n                    if (func.call(thisArg, val, i, t)) {\\n                        res.push(val);\\n                    }\\n                }\\n            }\\n            return res;\\n        };\\n    }\\n\\n    var isSupportAmd = typeof define === 'function' && define.amd;\\n\\n    /**\\n     * returns whether font is installed or not.\\n     * @param {String} fontName\\n     * @return {Boolean}\\n     */\\n    var isFontInstalled = function(fontName) {\\n        if (fontName === \\\"Roboto\\\") return true;\\n        var testFontName = fontName === 'Comic Sans MS' ? 'Courier New' : 'Comic Sans MS';\\n        var $tester = $('<div>').css({\\n            position: 'absolute',\\n            left: '-9999px',\\n            top: '-9999px',\\n            fontSize: '200px'\\n        }).text('mmmmmmmmmwwwwwww').appendTo(document.body);\\n\\n        var originalWidth = $tester.css('fontFamily', testFontName).width();\\n        var width = $tester.css('fontFamily', fontName + ',' + testFontName).width();\\n\\n        $tester.remove();\\n\\n        return originalWidth !== width;\\n    };\\n\\n\\n    var userAgent = navigator.userAgent;\\n\\n    /**\\n     * @class core.agent\\n     * Object which check platform and agent\\n     * @singleton\\n     * @alternateClassName agent\\n     */\\n    var agent = {\\n        /** @property {Boolean} [isMac=false] true if this agent is Mac  */\\n        isMac: navigator.appVersion.indexOf('Mac') > -1,\\n        /** @property {Boolean} [isMSIE=false] true if this agent is a Internet Explorer  */\\n        isMSIE: /MSIE|Trident/i.test(userAgent),\\n        /** @property {Boolean} [isFF=false] true if this agent is a Firefox  */\\n        isFF: /firefox/i.test(userAgent),\\n        isWebkit: /webkit/i.test(userAgent),\\n        /** @property {Boolean} [isSafari=false] true if this agent is a Safari  */\\n        isSafari: /safari/i.test(userAgent),\\n        /** @property {String} jqueryVersion current jQuery version string  */\\n        jqueryVersion: parseFloat($.fn.jquery),\\n        isSupportAmd: isSupportAmd,\\n        hasCodeMirror: isSupportAmd ? require.specified('CodeMirror') : !!window.CodeMirror,\\n        isFontInstalled: isFontInstalled,\\n        isW3CRangeSupport: !!document.createRange\\n    };\\n\\n    /**\\n     * @class core.func\\n     * func utils (for high-order func's arg)\\n     * @singleton\\n     * @alternateClassName func\\n     */\\n    var func = (function() {\\n        var eq = function(itemA) {\\n            return function(itemB) {\\n                return itemA === itemB;\\n            };\\n        };\\n\\n        var eq2 = function(itemA, itemB) {\\n            return itemA === itemB;\\n        };\\n\\n        var peq2 = function(propName) {\\n            return function(itemA, itemB) {\\n                return itemA[propName] === itemB[propName];\\n            };\\n        };\\n\\n        var ok = function() {\\n            return true;\\n        };\\n\\n        var fail = function() {\\n            return false;\\n        };\\n\\n        var not = function(f) {\\n            return function() {\\n                return !f.apply(f, arguments);\\n            };\\n        };\\n\\n        var and = function(fA, fB) {\\n            return function(item) {\\n                return fA(item) && fB(item);\\n            };\\n        };\\n\\n        var self = function(a) {\\n            return a;\\n        };\\n\\n        var idCounter = 0;\\n\\n        /**\\n         * generate a globally-unique id\\n         * @param {String} [prefix]\\n         */\\n        var uniqueId = function(prefix) {\\n            var id = ++idCounter + '';\\n\\n            return prefix ? prefix + id : id;\\n        };\\n\\n        /**\\n         * returns bnd (bounds) from rect\\n         * - IE Compatability Issue: http://goo.gl/sRLOAo\\n         * - Scroll Issue: http://goo.gl/sNjUc\\n         * @param {Rect} rect\\n         * @return {Object} bounds\\n         * @return {Number} bounds.top\\n         * @return {Number} bounds.left\\n         * @return {Number} bounds.width\\n         * @return {Number} bounds.height\\n         */\\n        var rect2bnd = function(rect) {\\n            var $document = $(document);\\n            return {\\n                top: rect.top + $document.scrollTop(),\\n                left: rect.left + $document.scrollLeft(),\\n                width: rect.right - rect.left,\\n                height: rect.bottom - rect.top\\n            };\\n        };\\n\\n        /**\\n         * returns a copy of the object where the keys have become the values and the values the keys.\\n         * @param {Object} obj\\n         * @return {Object}\\n         */\\n        var invertObject = function(obj) {\\n            var inverted = {};\\n\\n            for (var key in obj) {\\n                if (obj.hasOwnProperty(key)) {\\n                    inverted[obj[key]] = key;\\n                }\\n            }\\n            return inverted;\\n        };\\n\\n        /**\\n         * @param {String} namespace\\n         * @param {String} [prefix]\\n         * @return {String}\\n         */\\n        var namespaceToCamel = function(namespace, prefix) {\\n            prefix = prefix || '';\\n            return prefix + namespace.split('.').map(function(name) {\\n                    return name.substring(0, 1).toUpperCase() + name.substring(1);\\n                }).join('');\\n        };\\n\\n        return {\\n            eq: eq,\\n            eq2: eq2,\\n            peq2: peq2,\\n            ok: ok,\\n            fail: fail,\\n            self: self,\\n            not: not,\\n            and: and,\\n            uniqueId: uniqueId,\\n            rect2bnd: rect2bnd,\\n            invertObject: invertObject,\\n            namespaceToCamel: namespaceToCamel\\n        };\\n    })(); //end func\\n\\n\\n    /**\\n     * @class core.list\\n     * list utils\\n     * @singleton\\n     * @alternateClassName list\\n     */\\n    var list = (function() {\\n        /**\\n         * returns the first item of an array.\\n         * @param {Array} array\\n         */\\n        var head = function(array) {\\n            return array[0];\\n        };\\n\\n        /**\\n         * returns the last item of an array.\\n         * @param {Array} array\\n         */\\n        var last = function(array) {\\n            return array[array.length - 1];\\n        };\\n\\n        /**\\n         * returns everything but the last entry of the array.\\n         * @param {Array} array\\n         */\\n        var initial = function(array) {\\n            return array.slice(0, array.length - 1);\\n        };\\n\\n        /**\\n         * returns the rest of the items in an array.\\n         * @param {Array} array\\n         */\\n        var tail = function(array) {\\n            return array.slice(1);\\n        };\\n\\n        /**\\n         * returns item of array\\n         */\\n        var find = function(array, pred) {\\n            for (var idx = 0, len = array.length; idx < len; idx ++) {\\n                var item = array[idx];\\n\\n                if (pred(item)) {\\n                    return item;\\n                }\\n            }\\n        };\\n\\n        /**\\n         * returns true if all of the values in the array pass the predicate truth test.\\n         */\\n        var all = function(array, pred) {\\n            for (var idx = 0, len = array.length; idx < len; idx ++) {\\n                if (!pred(array[idx])) {\\n                    return false;\\n                }\\n            }\\n            return true;\\n        };\\n\\n        /**\\n         * returns true if the value is present in the list.\\n         */\\n        var contains = function(array, item) {\\n            return $.inArray(item, array) !== -1;\\n        };\\n\\n        /**\\n         * get sum from a list\\n         * @param {Array} array - array\\n         * @param {Function} fn - iterator\\n         */\\n        var sum = function(array, fn) {\\n            fn = fn || func.self;\\n            return array.reduce(function(memo, v) {\\n                return memo + fn(v);\\n            }, 0);\\n        };\\n\\n        /**\\n         * returns a copy of the collection with array type.\\n         * @param {Collection} collection - collection eg) node.childNodes, ...\\n         */\\n        var from = function(collection) {\\n            var result = [], idx = -1, length = collection.length;\\n            while (++idx < length) {\\n                result[idx] = collection[idx];\\n            }\\n            return result;\\n        };\\n\\n        /**\\n         * cluster elements by predicate function.\\n         * @param {Array} array - array\\n         * @param {Function} fn - predicate function for cluster rule\\n         * @param {Array[]}\\n         */\\n        var clusterBy = function(array, fn) {\\n            if (!array.length) { return []; }\\n            var aTail = tail(array);\\n\\n            return aTail.reduce(function(memo, v) {\\n                var aLast = last(memo);\\n                if (fn(last(aLast), v)) {\\n                    aLast[aLast.length] = v;\\n                } else {\\n                    memo[memo.length] = [v];\\n                }\\n                return memo;\\n            }, [[head(array)]]);\\n        };\\n\\n        /**\\n         * returns a copy of the array with all falsy values removed\\n         * @param {Array} array - array\\n         * @param {Function} fn - predicate function for cluster rule\\n         */\\n        var compact = function(array) {\\n            var aResult = [];\\n\\n            for (var idx = 0, len = array.length; idx < len; idx ++) {\\n                if (array[idx]) { aResult.push(array[idx]); }\\n            }\\n            return aResult;\\n        };\\n\\n        /**\\n         * produces a duplicate-free version of the array\\n         * @param {Array} array\\n         */\\n        var unique = function(array) {\\n            var results = [];\\n\\n            for (var idx = 0, len = array.length; idx < len; idx ++) {\\n                if (!contains(results, array[idx])) {\\n                    results.push(array[idx]);\\n                }\\n            }\\n            return results;\\n        };\\n\\n        /**\\n         * returns next item.\\n         * @param {Array} array\\n         */\\n        var next = function(array, item) {\\n            var idx = array.indexOf(item);\\n\\n            if (idx === -1) {return null;}\\n            return array[idx + 1];\\n        };\\n\\n        /**\\n         * returns prev item.\\n         * @param {Array} array\\n         */\\n        var prev = function(array, item) {\\n            var idx = array.indexOf(item);\\n\\n            if (idx === -1) {return null;}\\n            return array[idx - 1];\\n        };\\n\\n\\n        return {head: head, last: last, initial: initial, tail: tail, prev: prev, next: next, find: find, contains: contains, all: all, sum: sum, from: from, clusterBy: clusterBy, compact: compact, unique: unique};\\n    })(); //end list\\n\\n\\n    var NBSP_CHAR = String.fromCharCode(160);\\n    var ZERO_WIDTH_NBSP_CHAR = '\\\\ufeff';\\n\\n    /**\\n     * @class core.dom\\n     * Dom functions\\n     * @singleton\\n     * @alternateClassName dom\\n     */\\n    var dom = (function() {\\n        /**\\n         * @method isEditable\\n         * returns whether node is `note-editable` or not.\\n         * @param {Node} node\\n         * @return {Boolean}\\n         */\\n        var isEditable = function(node) {\\n            return node && $(node).hasClass('note-editable');\\n        };\\n\\n        /**\\n         * @method isControlSizing\\n         * returns whether node is `note-control-sizing` or not.\\n         * @param {Node} node\\n         * @return {Boolean}\\n         */\\n        var isControlSizing = function(node) {\\n            return node && $(node).hasClass('note-control-sizing');\\n        };\\n\\n        /**\\n         * @method  buildLayoutInfo\\n         * build layoutInfo from $editor(.note-editor)\\n         * @param {jQuery} $editor\\n         * @return {Object}\\n         * @return {Function} return.editor\\n         * @return {Node} return.dropzone\\n         * @return {Node} return.toolbar\\n         * @return {Node} return.editable\\n         * @return {Node} return.codable\\n         * @return {Node} return.popover\\n         * @return {Node} return.handle\\n         * @return {Node} return.dialog\\n         */\\n        var buildLayoutInfo = function($editor) {\\n            var makeFinder;\\n\\n            // air mode\\n            if ($editor.hasClass('note-air-editor')) {\\n                var id = list.last($editor.attr('id').split('-'));\\n\\n                makeFinder = function(sIdPrefix) {\\n                    return function() { return $(sIdPrefix + id); };\\n                };\\n\\n                return {\\n                    editor: function() { return $editor; },\\n                    holder : function() { return $editor.data('holder'); },\\n                    editable: function() { return $editor; },\\n                    popover: makeFinder('#note-popover-'),\\n                    handle: makeFinder('#note-handle-'),\\n                    dialog: makeFinder('#note-dialog-')\\n                };\\n                // frame mode\\n            } else {\\n                makeFinder = function(sClassName) {\\n                    return function() { return $editor.find(sClassName); };\\n                };\\n                return {\\n                    editor: function() { return $editor; },\\n                    holder : function() { return $editor.data('holder'); },\\n                    dropzone: makeFinder('.note-dropzone'),\\n                    toolbar: makeFinder('.note-toolbar'),\\n                    editable: makeFinder('.note-editable'),\\n                    codable: makeFinder('.note-codable'),\\n                    statusbar: makeFinder('.note-statusbar'),\\n                    popover: makeFinder('.note-popover'),\\n                    handle: makeFinder('.note-handle'),\\n                    dialog: makeFinder('.note-dialog')\\n                };\\n            }\\n        };\\n\\n        /**\\n         * returns makeLayoutInfo from editor's descendant node.\\n         * @private\\n         * @param {Node} descendant\\n         * @return {Object}\\n         */\\n        var makeLayoutInfo = function(descendant) {\\n            var $target = $(descendant).closest('.note-editor, .note-air-editor, .note-air-layout');\\n\\n            if (!$target.length) {\\n                return null;\\n            }\\n            var $editor;\\n\\n            if ($target.is('.note-editor, .note-air-editor')) {\\n                $editor = $target;\\n            } else {\\n                $editor = $('#note-editor-' + list.last($target.attr('id').split('-')));\\n            }\\n            return buildLayoutInfo($editor);\\n        };\\n\\n        /**\\n         * @met\";\n  builder.string += \"hod makePredByNodeName\\n         * returns predicate which judge whether nodeName is same\\n         * @param {String} nodeName\\n         * @return {Function}\\n         */\\n        var makePredByNodeName = function(nodeName) {\\n            nodeName = nodeName.toUpperCase();\\n            return function(node) {\\n                return node && node.nodeName.toUpperCase() === nodeName;\\n            };\\n        };\\n\\n        /**\\n         * @method isText\\n         * @param {Node} node\\n         * @return {Boolean} true if node's type is text(3)\\n         */\\n        var isText = function(node) {\\n            return node && node.nodeType === 3;\\n        };\\n\\n        /**\\n         * ex) br, col, embed, hr, img, input, ...\\n         * @see http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\\n         */\\n        var isVoid = function(node) {\\n            return node && /^BR|^IMG|^HR/.test(node.nodeName.toUpperCase());\\n        };\\n\\n        var isPara = function(node) {\\n            if (isEditable(node)) {\\n                return false;\\n            }\\n            // Chrome(v31.0), FF(v25.0.1) use DIV for paragraph\\n            return node && /^DIV|^P|^LI|^H[1-7]/.test(node.nodeName.toUpperCase());\\n        };\\n\\n        var isLi = makePredByNodeName('LI');\\n\\n        var isPurePara = function(node) {\\n            return isPara(node) && !isLi(node);\\n        };\\n\\n        var isTable = makePredByNodeName('TABLE');\\n\\n        var isInline = function(node) {\\n            return !isBodyContainer(node) && !isList(node) && !isPara(node) && !isTable(node) && !isBlockquote(node);\\n        };\\n\\n        var isList = function(node) {\\n            return node && /^UL|^OL/.test(node.nodeName.toUpperCase());\\n        };\\n\\n        var isCell = function(node) {\\n            return node && /^TD|^TH/.test(node.nodeName.toUpperCase());\\n        };\\n\\n        var isBlockquote = makePredByNodeName('BLOCKQUOTE');\\n\\n        var isBodyContainer = function(node) {\\n            return isCell(node) || isBlockquote(node) || isEditable(node);\\n        };\\n\\n        var isAnchor = makePredByNodeName('A');\\n\\n        var isParaInline = function(node) {\\n            return isInline(node) && !!ancestor(node, isPara);\\n        };\\n\\n        var isBodyInline = function(node) {\\n            return isInline(node) && !ancestor(node, isPara);\\n        };\\n\\n        var isBody = makePredByNodeName('BODY');\\n\\n        /**\\n         * returns whether nodeB is closest sibling of nodeA\\n         * @param {Node} nodeA\\n         * @param {Node} nodeB\\n         * @return {Boolean}\\n         */\\n        var isClosestSibling = function(nodeA, nodeB) {\\n            return nodeA.nextSibling === nodeB || nodeA.previousSibling === nodeB;\\n        };\\n\\n        /**\\n         * returns array of closest siblings with node\\n         * @param {Node} node\\n         * @param {function} [pred] - predicate function\\n         * @return {Node[]}\\n         */\\n        var withClosestSiblings = function(node, pred) {\\n            pred = pred || func.ok;\\n            var siblings = [];\\n\\n            if (node.previousSibling && pred(node.previousSibling)) {\\n                siblings.push(node.previousSibling);\\n            }\\n            siblings.push(node);\\n            if (node.nextSibling && pred(node.nextSibling)) {\\n                siblings.push(node.nextSibling);\\n            }\\n            return siblings;\\n        };\\n\\n        /**\\n         * blank HTML for cursor position\\n         * - [workaround] for MSIE IE doesn't works with bogus br\\n         */\\n        var blankHTML = agent.isMSIE ? '&nbsp;' : '<br>';\\n\\n        /**\\n         * @method nodeLength\\n         * returns #text's text size or element's childNodes size\\n         * @param {Node} node\\n         */\\n        var nodeLength = function(node) {\\n            if (isText(node)) {\\n                return node.nodeValue.length;\\n            }\\n            return node.childNodes.length;\\n        };\\n\\n        /**\\n         * returns whether node is empty or not.\\n         * @param {Node} node\\n         * @return {Boolean}\\n         */\\n        var isEmpty = function(node) {\\n            var len = nodeLength(node);\\n\\n            if (len === 0) {\\n                return true;\\n            } else if (!isText(node) && len === 1 && node.innerHTML === blankHTML) {\\n                return true;\\n            } else if (list.all(node.childNodes, isText) && node.innerHTML === '') {\\n                return true;\\n            }\\n            return false;\\n        };\\n\\n        /**\\n         * padding blankHTML if node is empty (for cursor position)\\n         */\\n        var paddingBlankHTML = function(node) {\\n            if (!isVoid(node) && !nodeLength(node)) {\\n                node.innerHTML = blankHTML;\\n            }\\n        };\\n\\n        /**\\n         * find nearest ancestor predicate hit\\n         *\\n         * @param {Node} node\\n         * @param {Function} pred - predicate function\\n         */\\n        var ancestor = function(node, pred) {\\n            while (node) {\\n                if (pred(node)) { return node; }\\n                if (isEditable(node)) { break; }\\n\\n                node = node.parentNode;\\n            }\\n            return null;\\n        };\\n\\n        /**\\n         * find nearest ancestor only single child blood line and predicate hit\\n         *\\n         * @param {Node} node\\n         * @param {Function} pred - predicate function\\n         */\\n        var singleChildAncestor = function(node, pred) {\\n            node = node.parentNode;\\n\\n            while (node) {\\n                if (nodeLength(node) !== 1) { break; }\\n                if (pred(node)) { return node; }\\n                if (isEditable(node)) { break; }\\n\\n                node = node.parentNode;\\n            }\\n            return null;\\n        };\\n\\n        /**\\n         * returns new array of ancestor nodes (until predicate hit).\\n         *\\n         * @param {Node} node\\n         * @param {Function} [optional] pred - predicate function\\n         */\\n        var listAncestor = function(node, pred) {\\n            pred = pred || func.fail;\\n\\n            var ancestors = [];\\n            ancestor(node, function(el) {\\n                if (!isEditable(el)) {\\n                    ancestors.push(el);\\n                }\\n\\n                return pred(el);\\n            });\\n            return ancestors;\\n        };\\n\\n        /**\\n         * find farthest ancestor predicate hit\\n         */\\n        var lastAncestor = function(node, pred) {\\n            var ancestors = listAncestor(node);\\n            return list.last(ancestors.filter(pred));\\n        };\\n\\n        /**\\n         * returns common ancestor node between two nodes.\\n         *\\n         * @param {Node} nodeA\\n         * @param {Node} nodeB\\n         */\\n        var commonAncestor = function(nodeA, nodeB) {\\n            var ancestors = listAncestor(nodeA);\\n            for (var n = nodeB; n; n = n.parentNode) {\\n                if ($.inArray(n, ancestors) > -1) { return n; }\\n            }\\n            return null; // difference document area\\n        };\\n\\n        /**\\n         * listing all previous siblings (until predicate hit).\\n         *\\n         * @param {Node} node\\n         * @param {Function} [optional] pred - predicate function\\n         */\\n        var listPrev = function(node, pred) {\\n            pred = pred || func.fail;\\n\\n            var nodes = [];\\n            while (node) {\\n                if (pred(node)) { break; }\\n                nodes.push(node);\\n                node = node.previousSibling;\\n            }\\n            return nodes;\\n        };\\n\\n        /**\\n         * listing next siblings (until predicate hit).\\n         *\\n         * @param {Node} node\\n         * @param {Function} [pred] - predicate function\\n         */\\n        var listNext = function(node, pred) {\\n            pred = pred || func.fail;\\n\\n            var nodes = [];\\n            while (node) {\\n                if (pred(node)) { break; }\\n                nodes.push(node);\\n                node = node.nextSibling;\\n            }\\n            return nodes;\\n        };\\n\\n        /**\\n         * listing descendant nodes\\n         *\\n         * @param {Node} node\\n         * @param {Function} [pred] - predicate function\\n         */\\n        var listDescendant = function(node, pred) {\\n            var descendents = [];\\n            pred = pred || func.ok;\\n\\n            // start DFS(depth first search) with node\\n            (function fnWalk(current) {\\n                if (node !== current && pred(current)) {\\n                    descendents.push(current);\\n                }\\n                for (var idx = 0, len = current.childNodes.length; idx < len; idx++) {\\n                    fnWalk(current.childNodes[idx]);\\n                }\\n            })(node);\\n\\n            return descendents;\\n        };\\n\\n        /**\\n         * wrap node with new tag.\\n         *\\n         * @param {Node} node\\n         * @param {Node} tagName of wrapper\\n         * @return {Node} - wrapper\\n         */\\n        var wrap = function(node, wrapperName) {\\n            var parent = node.parentNode;\\n            var wrapper = $('<' + wrapperName + '>')[0];\\n\\n            parent.insertBefore(wrapper, node);\\n            wrapper.appendChild(node);\\n\\n            return wrapper;\\n        };\\n\\n        /**\\n         * insert node after preceding\\n         *\\n         * @param {Node} node\\n         * @param {Node} preceding - predicate function\\n         */\\n        var insertAfter = function(node, preceding) {\\n            var next = preceding.nextSibling, parent = preceding.parentNode;\\n            if (next) {\\n                parent.insertBefore(node, next);\\n            } else {\\n                parent.appendChild(node);\\n            }\\n            return node;\\n        };\\n\\n        /**\\n         * append elements.\\n         *\\n         * @param {Node} node\\n         * @param {Collection} aChild\\n         */\\n        var appendChildNodes = function(node, aChild) {\\n            $.each(aChild, function(idx, child) {\\n                node.appendChild(child);\\n            });\\n            return node;\\n        };\\n\\n        /**\\n         * returns whether boundaryPoint is left edge or not.\\n         *\\n         * @param {BoundaryPoint} point\\n         * @return {Boolean}\\n         */\\n        var isLeftEdgePoint = function(point) {\\n            return point.offset === 0;\\n        };\\n\\n        /**\\n         * returns whether boundaryPoint is right edge or not.\\n         *\\n         * @param {BoundaryPoint} point\\n         * @return {Boolean}\\n         */\\n        var isRightEdgePoint = function(point) {\\n            return point.offset === nodeLength(point.node);\\n        };\\n\\n        /**\\n         * returns whether boundaryPoint is edge or not.\\n         *\\n         * @param {BoundaryPoint} point\\n         * @return {Boolean}\\n         */\\n        var isEdgePoint = function(point) {\\n            return isLeftEdgePoint(point) || isRightEdgePoint(point);\\n        };\\n\\n        /**\\n         * returns wheter node is left edge of ancestor or not.\\n         *\\n         * @param {Node} node\\n         * @param {Node} ancestor\\n         * @return {Boolean}\\n         */\\n        var isLeftEdgeOf = function(node, ancestor) {\\n            while (node && node !== ancestor) {\\n                if (position(node) !== 0) {\\n                    return false;\\n                }\\n                node = node.parentNode;\\n            }\\n\\n            return true;\\n        };\\n\\n        /**\\n         * returns whether node is right edge of ancestor or not.\\n         *\\n         * @param {Node} node\\n         * @param {Node} ancestor\\n         * @return {Boolean}\\n         */\\n        var isRightEdgeOf = function(node, ancestor) {\\n            while (node && node !== ancestor) {\\n                if (position(node) !== nodeLength(node.parentNode) - 1) {\\n                    return false;\\n                }\\n                node = node.parentNode;\\n            }\\n\\n            return true;\\n        };\\n\\n        /**\\n         * returns offset from parent.\\n         *\\n         * @param {Node} node\\n         */\\n        var position = function(node) {\\n            var offset = 0;\\n            while ((node = node.previousSibling)) {\\n                offset += 1;\\n            }\\n            return offset;\\n        };\\n\\n        var hasChildren = function(node) {\\n            return !!(node && node.childNodes && node.childNodes.length);\\n        };\\n\\n        /**\\n         * returns previous boundaryPoint\\n         *\\n         * @param {BoundaryPoint} point\\n         * @param {Boolean} isSkipInnerOffset\\n         * @return {BoundaryPoint}\\n         */\\n        var prevPoint = function(point, isSkipInnerOffset) {\\n            var node, offset;\\n\\n            if (point.offset === 0) {\\n                if (isEditable(point.node)) {\\n                    return null;\\n                }\\n\\n                node = point.node.parentNode;\\n                offset = position(point.node);\\n            } else if (hasChildren(point.node)) {\\n                node = point.node.childNodes[point.offset - 1];\\n                offset = nodeLength(node);\\n            } else {\\n                node = point.node;\\n                offset = isSkipInnerOffset ? 0 : point.offset - 1;\\n            }\\n\\n            return {\\n                node: node,\\n                offset: offset\\n            };\\n        };\\n\\n        /**\\n         * returns next boundaryPoint\\n         *\\n         * @param {BoundaryPoint} point\\n         * @param {Boolean} isSkipInnerOffset\\n         * @return {BoundaryPoint}\\n         */\\n        var nextPoint = function(point, isSkipInnerOffset) {\\n            var node, offset;\\n\\n            if (nodeLength(point.node) === point.offset) {\\n                if (isEditable(point.node)) {\\n                    return null;\\n                }\\n\\n                node = point.node.parentNode;\\n                offset = position(point.node) + 1;\\n            } else if (hasChildren(point.node)) {\\n                node = point.node.childNodes[point.offset];\\n                offset = 0;\\n            } else {\\n                node = point.node;\\n                offset = isSkipInnerOffset ? nodeLength(point.node) : point.offset + 1;\\n            }\\n\\n            return {\\n                node: node,\\n                offset: offset\\n            };\\n        };\\n\\n        /**\\n         * returns whether pointA and pointB is same or not.\\n         *\\n         * @param {BoundaryPoint} pointA\\n         * @param {BoundaryPoint} pointB\\n         * @return {Boolean}\\n         */\\n        var isSamePoint = function(pointA, pointB) {\\n            return pointA.node === pointB.node && pointA.offset === pointB.offset;\\n        };\\n\\n        /**\\n         * returns whether point is visible (can set cursor) or not.\\n         *\\n         * @param {BoundaryPoint} point\\n         * @return {Boolean}\\n         */\\n        var isVisiblePoint = function(point) {\\n            if (isText(point.node) || !hasChildren(point.node) || isEmpty(point.node)) {\\n                return true;\\n            }\\n\\n            var leftNode = point.node.childNodes[point.offset - 1];\\n            var rightNode = point.node.childNodes[point.offset];\\n            if ((!leftNode || isVoid(leftNode)) && (!rightNode || isVoid(rightNode))) {\\n                return true;\\n            }\\n\\n            return false;\\n        };\\n\\n        /**\\n         * @method prevPointUtil\\n         *\\n         * @param {BoundaryPoint} point\\n         * @param {Function} pred\\n         * @return {BoundaryPoint}\\n         */\\n        var prevPointUntil = function(point, pred) {\\n            while (point) {\\n                if (pred(point)) {\\n                    return point;\\n                }\\n\\n                point = prevPoint(point);\\n            }\\n\\n            return null;\\n        };\\n\\n        /**\\n         * @method nextPointUntil\\n         *\\n         * @param {BoundaryPoint} point\\n         * @param {Function} pred\\n         * @return {BoundaryPoint}\\n         */\\n        var nextPointUntil = function(point, pred) {\\n            while (point) {\\n                if (pred(point)) {\\n                    return point;\\n                }\\n\\n                point = nextPoint(point);\\n            }\\n\\n            return null;\\n        };\\n\\n        /**\\n         * returns whether point has character or not.\\n         *\\n         * @param {Point} point\\n         * @return {Boolean}\\n         */\\n        var isCharPoint = function(point) {\\n            if (!isText(point.node)) {\\n                return false;\\n            }\\n\\n            var ch = point.node.nodeValue.charAt(point.offset - 1);\\n            return ch && (ch !== ' ' && ch !== NBSP_CHAR);\\n        };\\n\\n        /**\\n         * @met\";\n  builder.string += \"hod walkPoint\\n         *\\n         * @param {BoundaryPoint} startPoint\\n         * @param {BoundaryPoint} endPoint\\n         * @param {Function} handler\\n         * @param {Boolean} isSkipInnerOffset\\n         */\\n        var walkPoint = function(startPoint, endPoint, handler, isSkipInnerOffset) {\\n            var point = startPoint;\\n\\n            while (point) {\\n                handler(point);\\n\\n                if (isSamePoint(point, endPoint)) {\\n                    break;\\n                }\\n\\n                var isSkipOffset = isSkipInnerOffset &&\\n                    startPoint.node !== point.node &&\\n                    endPoint.node !== point.node;\\n                point = nextPoint(point, isSkipOffset);\\n            }\\n        };\\n\\n        /**\\n         * @method makeOffsetPath\\n         *\\n         * return offsetPath(array of offset) from ancestor\\n         *\\n         * @param {Node} ancestor - ancestor node\\n         * @param {Node} node\\n         */\\n        var makeOffsetPath = function(ancestor, node) {\\n            var ancestors = listAncestor(node, func.eq(ancestor));\\n            return $.map(ancestors, position).reverse();\\n        };\\n\\n        /**\\n         * @method fromOffsetPath\\n         *\\n         * return element from offsetPath(array of offset)\\n         *\\n         * @param {Node} ancestor - ancestor node\\n         * @param {array} offsets - offsetPath\\n         */\\n        var fromOffsetPath = function(ancestor, offsets) {\\n            var current = ancestor;\\n            for (var i = 0, len = offsets.length; i < len; i++) {\\n                if (current.childNodes.length <= offsets[i]) {\\n                    current = current.childNodes[current.childNodes.length - 1];\\n                } else {\\n                    current = current.childNodes[offsets[i]];\\n                }\\n            }\\n            return current;\\n        };\\n\\n        /**\\n         * @method splitNode\\n         *\\n         * split element or #text\\n         *\\n         * @param {BoundaryPoint} point\\n         * @param {Object} [options]\\n         * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\\n         * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\\n         * @return {Node} right node of boundaryPoint\\n         */\\n        var splitNode = function(point, options) {\\n            var isSkipPaddingBlankHTML = options && options.isSkipPaddingBlankHTML;\\n            var isNotSplitEdgePoint = options && options.isNotSplitEdgePoint;\\n\\n            // edge case\\n            if (isEdgePoint(point) && (isText(point.node) || isNotSplitEdgePoint)) {\\n                if (isLeftEdgePoint(point)) {\\n                    return point.node;\\n                } else if (isRightEdgePoint(point)) {\\n                    return point.node.nextSibling;\\n                }\\n            }\\n\\n            // split #text\\n            if (isText(point.node)) {\\n                return point.node.splitText(point.offset);\\n            } else {\\n                var childNode = point.node.childNodes[point.offset];\\n                var clone = insertAfter(point.node.cloneNode(false), point.node);\\n                appendChildNodes(clone, listNext(childNode));\\n\\n                if (!isSkipPaddingBlankHTML) {\\n                    paddingBlankHTML(point.node);\\n                    paddingBlankHTML(clone);\\n                }\\n\\n                return clone;\\n            }\\n        };\\n\\n        /**\\n         * @method splitTree\\n         *\\n         * split tree by point\\n         *\\n         * @param {Node} root - split root\\n         * @param {BoundaryPoint} point\\n         * @param {Object} [options]\\n         * @param {Boolean} [options.isSkipPaddingBlankHTML] - default: false\\n         * @param {Boolean} [options.isNotSplitEdgePoint] - default: false\\n         * @return {Node} right node of boundaryPoint\\n         */\\n        var splitTree = function(root, point, options) {\\n            // ex) [#text, <span>, <p>]\\n            var ancestors = listAncestor(point.node, func.eq(root));\\n\\n            if (!ancestors.length) {\\n                return null;\\n            } else if (ancestors.length === 1) {\\n                return splitNode(point, options);\\n            }\\n\\n            return ancestors.reduce(function(node, parent) {\\n                if (node === point.node) {\\n                    node = splitNode(point, options);\\n                }\\n\\n                return splitNode({\\n                    node: parent,\\n                    offset: node ? dom.position(node) : nodeLength(parent)\\n                }, options);\\n            });\\n        };\\n\\n        /**\\n         * split point\\n         *\\n         * @param {Point} point\\n         * @param {Boolean} isInline\\n         * @return {Object}\\n         */\\n        var splitPoint = function(point, isInline) {\\n            // find splitRoot, container\\n            //  - inline: splitRoot is a child of paragraph\\n            //  - block: splitRoot is a child of bodyContainer\\n            var pred = isInline ? isPara : isBodyContainer;\\n            var ancestors = listAncestor(point.node, pred);\\n            var topAncestor = list.last(ancestors) || point.node;\\n\\n            var splitRoot, container;\\n            if (pred(topAncestor)) {\\n                splitRoot = ancestors[ancestors.length - 2];\\n                container = topAncestor;\\n            } else {\\n                splitRoot = topAncestor;\\n                container = splitRoot.parentNode;\\n            }\\n\\n            // if splitRoot is exists, split with splitTree\\n            var pivot = splitRoot && splitTree(splitRoot, point, {\\n                    isSkipPaddingBlankHTML: isInline,\\n                    isNotSplitEdgePoint: isInline\\n                });\\n\\n            // if container is point.node, find pivot with point.offset\\n            if (!pivot && container === point.node) {\\n                pivot = point.node.childNodes[point.offset];\\n            }\\n\\n            return {\\n                rightNode: pivot,\\n                container: container\\n            };\\n        };\\n\\n        var create = function(nodeName) {\\n            return document.createElement(nodeName);\\n        };\\n\\n        var createText = function(text) {\\n            return document.createTextNode(text);\\n        };\\n\\n        /**\\n         * @method remove\\n         *\\n         * remove node, (isRemoveChild: remove child or not)\\n         *\\n         * @param {Node} node\\n         * @param {Boolean} isRemoveChild\\n         */\\n        var remove = function(node, isRemoveChild) {\\n            if (!node || !node.parentNode) { return; }\\n            if (node.removeNode) { return node.removeNode(isRemoveChild); }\\n\\n            var parent = node.parentNode;\\n            if (!isRemoveChild) {\\n                var nodes = [];\\n                var i, len;\\n                for (i = 0, len = node.childNodes.length; i < len; i++) {\\n                    nodes.push(node.childNodes[i]);\\n                }\\n\\n                for (i = 0, len = nodes.length; i < len; i++) {\\n                    parent.insertBefore(nodes[i], node);\\n                }\\n            }\\n\\n            parent.removeChild(node);\\n        };\\n\\n        /**\\n         * @method removeWhile\\n         *\\n         * @param {Node} node\\n         * @param {Function} pred\\n         */\\n        var removeWhile = function(node, pred) {\\n            while (node) {\\n                if (isEditable(node) || !pred(node)) {\\n                    break;\\n                }\\n\\n                var parent = node.parentNode;\\n                remove(node);\\n                node = parent;\\n            }\\n        };\\n\\n        /**\\n         * @method replace\\n         *\\n         * replace node with provided nodeName\\n         *\\n         * @param {Node} node\\n         * @param {String} nodeName\\n         * @return {Node} - new node\\n         */\\n        var replace = function(node, nodeName) {\\n            if (node.nodeName.toUpperCase() === nodeName.toUpperCase()) {\\n                return node;\\n            }\\n\\n            var newNode = create(nodeName);\\n\\n            if (node.style.cssText) {\\n                newNode.style.cssText = node.style.cssText;\\n            }\\n\\n            appendChildNodes(newNode, list.from(node.childNodes));\\n            insertAfter(newNode, node);\\n            remove(node);\\n\\n            return newNode;\\n        };\\n\\n        var isTextarea = makePredByNodeName('TEXTAREA');\\n\\n        /**\\n         * @param {jQuery} $node\\n         * @param {Boolean} [stripLinebreaks] - default: false\\n         */\\n        var value = function($node, stripLinebreaks) {\\n            var val = isTextarea($node[0]) ? $node.val() : $node.html();\\n            if (stripLinebreaks) {\\n                return val.replace(/[\\\\n\\\\r]/g, '');\\n            }\\n            return val;\\n        };\\n\\n        /**\\n         * @method html\\n         *\\n         * get the HTML contents of node\\n         *\\n         * @param {jQuery} $node\\n         * @param {Boolean} [isNewlineOnBlock]\\n         */\\n        var html = function($node, isNewlineOnBlock) {\\n            var markup = value($node);\\n\\n            if (isNewlineOnBlock) {\\n                var regexTag = /<(\\\\/?)(\\\\b(?!!)[^>\\\\s]*)(.*?)(\\\\s*\\\\/?>)/g;\\n                markup = markup.replace(regexTag, function(match, endSlash, name) {\\n                    name = name.toUpperCase();\\n                    var isEndOfInlineContainer = /^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(name) &&\\n                        !!endSlash;\\n                    var isBlockNode = /^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(name);\\n\\n                    return match + ((isEndOfInlineContainer || isBlockNode) ? '\\\\n' : '');\\n                });\\n                markup = $.trim(markup);\\n            }\\n\\n            return markup;\\n        };\\n\\n        return {\\n            /** @property {String} NBSP_CHAR */\\n            NBSP_CHAR: NBSP_CHAR,\\n            /** @property {String} ZERO_WIDTH_NBSP_CHAR */\\n            ZERO_WIDTH_NBSP_CHAR: ZERO_WIDTH_NBSP_CHAR,\\n            /** @property {String} blank */\\n            blank: blankHTML,\\n            /** @property {String} emptyPara */\\n            emptyPara: '<p>' + blankHTML + '<\\/p>',\\n            makePredByNodeName: makePredByNodeName,\\n            isEditable: isEditable,\\n            isControlSizing: isControlSizing,\\n            buildLayoutInfo: buildLayoutInfo,\\n            makeLayoutInfo: makeLayoutInfo,\\n            isText: isText,\\n            isVoid: isVoid,\\n            isPara: isPara,\\n            isPurePara: isPurePara,\\n            isInline: isInline,\\n            isBlock: func.not(isInline),\\n            isBodyInline: isBodyInline,\\n            isBody: isBody,\\n            isParaInline: isParaInline,\\n            isList: isList,\\n            isTable: isTable,\\n            isCell: isCell,\\n            isBlockquote: isBlockquote,\\n            isBodyContainer: isBodyContainer,\\n            isAnchor: isAnchor,\\n            isDiv: makePredByNodeName('DIV'),\\n            isLi: isLi,\\n            isBR: makePredByNodeName('BR'),\\n            isSpan: makePredByNodeName('SPAN'),\\n            isB: makePredByNodeName('B'),\\n            isU: makePredByNodeName('U'),\\n            isS: makePredByNodeName('S'),\\n            isI: makePredByNodeName('I'),\\n            isImg: makePredByNodeName('IMG'),\\n            isTextarea: isTextarea,\\n            isEmpty: isEmpty,\\n            isEmptyAnchor: func.and(isAnchor, isEmpty),\\n            isClosestSibling: isClosestSibling,\\n            withClosestSiblings: withClosestSiblings,\\n            nodeLength: nodeLength,\\n            isLeftEdgePoint: isLeftEdgePoint,\\n            isRightEdgePoint: isRightEdgePoint,\\n            isEdgePoint: isEdgePoint,\\n            isLeftEdgeOf: isLeftEdgeOf,\\n            isRightEdgeOf: isRightEdgeOf,\\n            prevPoint: prevPoint,\\n            nextPoint: nextPoint,\\n            isSamePoint: isSamePoint,\\n            isVisiblePoint: isVisiblePoint,\\n            prevPointUntil: prevPointUntil,\\n            nextPointUntil: nextPointUntil,\\n            isCharPoint: isCharPoint,\\n            walkPoint: walkPoint,\\n            ancestor: ancestor,\\n            singleChildAncestor: singleChildAncestor,\\n            listAncestor: listAncestor,\\n            lastAncestor: lastAncestor,\\n            listNext: listNext,\\n            listPrev: listPrev,\\n            listDescendant: listDescendant,\\n            commonAncestor: commonAncestor,\\n            wrap: wrap,\\n            insertAfter: insertAfter,\\n            appendChildNodes: appendChildNodes,\\n            position: position,\\n            hasChildren: hasChildren,\\n            makeOffsetPath: makeOffsetPath,\\n            fromOffsetPath: fromOffsetPath,\\n            splitTree: splitTree,\\n            splitPoint: splitPoint,\\n            create: create,\\n            createText: createText,\\n            remove: remove,\\n            removeWhile: removeWhile,\\n            replace: replace,\\n            html: html,\\n            value: value\\n        };\\n    })();\\n\\n\\n    var range = (function() {\\n\\n        /**\\n         * return boundaryPoint from TextRange, inspired by Andy Na's HuskyRange.js\\n         *\\n         * @param {TextRange} textRange\\n         * @param {Boolean} isStart\\n         * @return {BoundaryPoint}\\n         *\\n         * @see http://msdn.microsoft.com/en-us/library/ie/ms535872(v=vs.85).aspx\\n         */\\n        var textRangeToPoint = function(textRange, isStart) {\\n            var container = textRange.parentElement(), offset;\\n\\n            var tester = document.body.createTextRange(), prevContainer;\\n            var childNodes = list.from(container.childNodes);\\n            for (offset = 0; offset < childNodes.length; offset++) {\\n                if (dom.isText(childNodes[offset])) {\\n                    continue;\\n                }\\n                tester.moveToElementText(childNodes[offset]);\\n                if (tester.compareEndPoints('StartToStart', textRange) >= 0) {\\n                    break;\\n                }\\n                prevContainer = childNodes[offset];\\n            }\\n\\n            if (offset !== 0 && dom.isText(childNodes[offset - 1])) {\\n                var textRangeStart = document.body.createTextRange(), curTextNode = null;\\n                textRangeStart.moveToElementText(prevContainer || container);\\n                textRangeStart.collapse(!prevContainer);\\n                curTextNode = prevContainer ? prevContainer.nextSibling : container.firstChild;\\n\\n                var pointTester = textRange.duplicate();\\n                pointTester.setEndPoint('StartToStart', textRangeStart);\\n                var textCount = pointTester.text.replace(/[\\\\r\\\\n]/g, '').length;\\n\\n                while (textCount > curTextNode.nodeValue.length && curTextNode.nextSibling) {\\n                    textCount -= curTextNode.nodeValue.length;\\n                    curTextNode = curTextNode.nextSibling;\\n                }\\n\\n                /* jshint ignore:start */\\n                var dummy = curTextNode.nodeValue; // enforce IE to re-reference curTextNode, hack\\n                /* jshint ignore:end */\\n\\n                if (isStart && curTextNode.nextSibling && dom.isText(curTextNode.nextSibling) &&\\n                    textCount === curTextNode.nodeValue.length) {\\n                    textCount -= curTextNode.nodeValue.length;\\n                    curTextNode = curTextNode.nextSibling;\\n                }\\n\\n                container = curTextNode;\\n                offset = textCount;\\n            }\\n\\n            return {\\n                cont: container,\\n                offset: offset\\n            };\\n        };\\n\\n        /**\\n         * return TextRange from boundary point (inspired by google closure-library)\\n         * @param {BoundaryPoint} point\\n         * @return {TextRange}\\n         */\\n        var pointToTextRange = function(point) {\\n            var textRangeInfo = function(container, offset) {\\n                var node, isCollapseToStart;\\n\\n                if (dom.isText(container)) {\\n                    var prevTextNodes = dom.listPrev(container, func.not(dom.isText));\\n                    var prevContainer = list.last(prevTextNodes).previousSibling;\\n                    node =  prevContainer || container.parentNode;\\n                    offset += list.sum(list.tail(prevTextNodes), dom.nodeLength);\\n                    isCollapseToStart = !prevContainer;\\n                } else {\\n                    node = container.childNodes[offset] || container;\\n                    if (dom.isText(node)) {\\n                        return textRangeInfo(node, 0);\\n                    }\\n\\n                    offset = 0;\\n                    isCollapseToStart = false;\\n   \";\n  builder.string += \"             }\\n\\n                return {\\n                    node: node,\\n                    collapseToStart: isCollapseToStart,\\n                    offset: offset\\n                };\\n            };\\n\\n            var textRange = document.body.createTextRange();\\n            var info = textRangeInfo(point.node, point.offset);\\n\\n            textRange.moveToElementText(info.node);\\n            textRange.collapse(info.collapseToStart);\\n            textRange.moveStart('character', info.offset);\\n            return textRange;\\n        };\\n\\n        /**\\n         * Wrapped Range\\n         *\\n         * @constructor\\n         * @param {Node} sc - start container\\n         * @param {Number} so - start offset\\n         * @param {Node} ec - end container\\n         * @param {Number} eo - end offset\\n         */\\n        var WrappedRange = function(sc, so, ec, eo) {\\n            this.sc = sc;\\n            this.so = so;\\n            this.ec = ec;\\n            this.eo = eo;\\n\\n            // nativeRange: get nativeRange from sc, so, ec, eo\\n            var nativeRange = function() {\\n                if (agent.isW3CRangeSupport) {\\n                    var w3cRange = document.createRange();\\n                    w3cRange.setStart(sc, so);\\n                    w3cRange.setEnd(ec, eo);\\n\\n                    return w3cRange;\\n                } else {\\n                    var textRange = pointToTextRange({\\n                        node: sc,\\n                        offset: so\\n                    });\\n\\n                    textRange.setEndPoint('EndToEnd', pointToTextRange({\\n                        node: ec,\\n                        offset: eo\\n                    }));\\n\\n                    return textRange;\\n                }\\n            };\\n\\n            this.getPoints = function() {\\n                return {\\n                    sc: sc,\\n                    so: so,\\n                    ec: ec,\\n                    eo: eo\\n                };\\n            };\\n\\n            this.getStartPoint = function() {\\n                return {\\n                    node: sc,\\n                    offset: so\\n                };\\n            };\\n\\n            this.getEndPoint = function() {\\n                return {\\n                    node: ec,\\n                    offset: eo\\n                };\\n            };\\n\\n            /**\\n             * select update visible range\\n             */\\n            this.select = function() {\\n                var nativeRng = nativeRange();\\n                if (agent.isW3CRangeSupport) {\\n                    var selection = document.getSelection();\\n                    if (selection.rangeCount > 0) {\\n                        selection.removeAllRanges();\\n                    }\\n                    selection.addRange(nativeRng);\\n                } else {\\n                    nativeRng.select();\\n                }\\n\\n                return this;\\n            };\\n\\n            /**\\n             * @return {WrappedRange}\\n             */\\n            this.normalize = function() {\\n\\n                /**\\n                 * @param {BoundaryPoint} point\\n                 * @return {BoundaryPoint}\\n                 */\\n                var getVisiblePoint = function(point) {\\n                    if (!dom.isVisiblePoint(point)) {\\n                        if (dom.isLeftEdgePoint(point)) {\\n                            point = dom.nextPointUntil(point, dom.isVisiblePoint);\\n                        } else {\\n                            point = dom.prevPointUntil(point, dom.isVisiblePoint);\\n                        }\\n                    }\\n                    return point;\\n                };\\n\\n                var startPoint = getVisiblePoint(this.getStartPoint());\\n                var endPoint = getVisiblePoint(this.getEndPoint());\\n\\n                return new WrappedRange(\\n                    startPoint.node,\\n                    startPoint.offset,\\n                    endPoint.node,\\n                    endPoint.offset\\n                );\\n            };\\n\\n            /**\\n             * returns matched nodes on range\\n             *\\n             * @param {Function} [pred] - predicate function\\n             * @param {Object} [options]\\n             * @param {Boolean} [options.includeAncestor]\\n             * @param {Boolean} [options.fullyContains]\\n             * @return {Node[]}\\n             */\\n            this.nodes = function(pred, options) {\\n                pred = pred || func.ok;\\n\\n                var includeAncestor = options && options.includeAncestor;\\n                var fullyContains = options && options.fullyContains;\\n\\n                // TODO compare points and sort\\n                var startPoint = this.getStartPoint();\\n                var endPoint = this.getEndPoint();\\n\\n                var nodes = [];\\n                var leftEdgeNodes = [];\\n\\n                dom.walkPoint(startPoint, endPoint, function(point) {\\n                    if (dom.isEditable(point.node)) {\\n                        return;\\n                    }\\n\\n                    var node;\\n                    if (fullyContains) {\\n                        if (dom.isLeftEdgePoint(point)) {\\n                            leftEdgeNodes.push(point.node);\\n                        }\\n                        if (dom.isRightEdgePoint(point) && list.contains(leftEdgeNodes, point.node)) {\\n                            node = point.node;\\n                        }\\n                    } else if (includeAncestor) {\\n                        node = dom.ancestor(point.node, pred);\\n                    } else {\\n                        node = point.node;\\n                    }\\n\\n                    if (node && pred(node)) {\\n                        nodes.push(node);\\n                    }\\n                }, true);\\n\\n                return list.unique(nodes);\\n            };\\n\\n            /**\\n             * returns commonAncestor of range\\n             * @return {Element} - commonAncestor\\n             */\\n            this.commonAncestor = function() {\\n                return dom.commonAncestor(sc, ec);\\n            };\\n\\n            /**\\n             * returns expanded range by pred\\n             *\\n             * @param {Function} pred - predicate function\\n             * @return {WrappedRange}\\n             */\\n            this.expand = function(pred) {\\n                var startAncestor = dom.ancestor(sc, pred);\\n                var endAncestor = dom.ancestor(ec, pred);\\n\\n                if (!startAncestor && !endAncestor) {\\n                    return new WrappedRange(sc, so, ec, eo);\\n                }\\n\\n                var boundaryPoints = this.getPoints();\\n\\n                if (startAncestor) {\\n                    boundaryPoints.sc = startAncestor;\\n                    boundaryPoints.so = 0;\\n                }\\n\\n                if (endAncestor) {\\n                    boundaryPoints.ec = endAncestor;\\n                    boundaryPoints.eo = dom.nodeLength(endAncestor);\\n                }\\n\\n                return new WrappedRange(\\n                    boundaryPoints.sc,\\n                    boundaryPoints.so,\\n                    boundaryPoints.ec,\\n                    boundaryPoints.eo\\n                );\\n            };\\n\\n            /**\\n             * @param {Boolean} isCollapseToStart\\n             * @return {WrappedRange}\\n             */\\n            this.collapse = function(isCollapseToStart) {\\n                if (isCollapseToStart) {\\n                    return new WrappedRange(sc, so, sc, so);\\n                } else {\\n                    return new WrappedRange(ec, eo, ec, eo);\\n                }\\n            };\\n\\n            /**\\n             * splitText on range\\n             */\\n            this.splitText = function() {\\n                var isSameContainer = sc === ec;\\n                var boundaryPoints = this.getPoints();\\n\\n                if (dom.isText(ec) && !dom.isEdgePoint(this.getEndPoint())) {\\n                    ec.splitText(eo);\\n                }\\n\\n                if (dom.isText(sc) && !dom.isEdgePoint(this.getStartPoint())) {\\n                    boundaryPoints.sc = sc.splitText(so);\\n                    boundaryPoints.so = 0;\\n\\n                    if (isSameContainer) {\\n                        boundaryPoints.ec = boundaryPoints.sc;\\n                        boundaryPoints.eo = eo - so;\\n                    }\\n                }\\n\\n                return new WrappedRange(\\n                    boundaryPoints.sc,\\n                    boundaryPoints.so,\\n                    boundaryPoints.ec,\\n                    boundaryPoints.eo\\n                );\\n            };\\n\\n            /**\\n             * delete contents on range\\n             * @return {WrappedRange}\\n             */\\n            this.deleteContents = function() {\\n                if (this.isCollapsed()) {\\n                    return this;\\n                }\\n\\n                var rng = this.splitText();\\n                var nodes = rng.nodes(null, {\\n                    fullyContains: true\\n                });\\n\\n                // find new cursor point\\n                var point = dom.prevPointUntil(rng.getStartPoint(), function(point) {\\n                    return !list.contains(nodes, point.node);\\n                });\\n\\n                var emptyParents = [];\\n                $.each(nodes, function(idx, node) {\\n                    // find empty parents\\n                    var parent = node.parentNode;\\n                    if (point.node !== parent && dom.nodeLength(parent) === 1) {\\n                        emptyParents.push(parent);\\n                    }\\n                    dom.remove(node, false);\\n                });\\n\\n                // remove empty parents\\n                $.each(emptyParents, function(idx, node) {\\n                    dom.remove(node, false);\\n                });\\n\\n                return new WrappedRange(\\n                    point.node,\\n                    point.offset,\\n                    point.node,\\n                    point.offset\\n                ).normalize();\\n            };\\n\\n            /**\\n             * makeIsOn: return isOn(pred) function\\n             */\\n            var makeIsOn = function(pred) {\\n                return function() {\\n                    var ancestor = dom.ancestor(sc, pred);\\n                    return !!ancestor && (ancestor === dom.ancestor(ec, pred));\\n                };\\n            };\\n\\n            // isOnEditable: judge whether range is on editable or not\\n            this.isOnEditable = makeIsOn(dom.isEditable);\\n            // isOnList: judge whether range is on list node or not\\n            this.isOnList = makeIsOn(dom.isList);\\n            // isOnAnchor: judge whether range is on anchor node or not\\n            this.isOnAnchor = makeIsOn(dom.isAnchor);\\n            // isOnAnchor: judge whether range is on cell node or not\\n            this.isOnCell = makeIsOn(dom.isCell);\\n\\n            /**\\n             * @param {Function} pred\\n             * @return {Boolean}\\n             */\\n            this.isLeftEdgeOf = function(pred) {\\n                if (!dom.isLeftEdgePoint(this.getStartPoint())) {\\n                    return false;\\n                }\\n\\n                var node = dom.ancestor(this.sc, pred);\\n                return node && dom.isLeftEdgeOf(this.sc, node);\\n            };\\n\\n            /**\\n             * returns whether range was collapsed or not\\n             */\\n            this.isCollapsed = function() {\\n                return sc === ec && so === eo;\\n            };\\n\\n            /**\\n             * wrap inline nodes which children of body with paragraph\\n             *\\n             * @return {WrappedRange}\\n             */\\n            this.wrapBodyInlineWithPara = function() {\\n                if (dom.isBodyContainer(sc) && dom.isEmpty(sc)) {\\n                    sc.innerHTML = dom.emptyPara;\\n                    return new WrappedRange(sc.firstChild, 0, sc.firstChild, 0);\\n                }\\n\\n                if (dom.isParaInline(sc) || dom.isPara(sc)) {\\n                    return this.normalize();\\n                }\\n\\n                // find inline top ancestor\\n                var topAncestor;\\n                if (dom.isInline(sc)) {\\n                    var ancestors = dom.listAncestor(sc, func.not(dom.isInline));\\n                    topAncestor = list.last(ancestors);\\n                    if (!dom.isInline(topAncestor)) {\\n                        topAncestor = ancestors[ancestors.length - 2] || sc.childNodes[so];\\n                    }\\n                } else {\\n                    topAncestor = sc.childNodes[so > 0 ? so - 1 : 0];\\n                }\\n\\n                // siblings not in paragraph\\n                var inlineSiblings = dom.listPrev(topAncestor, dom.isParaInline).reverse();\\n                inlineSiblings = inlineSiblings.concat(dom.listNext(topAncestor.nextSibling, dom.isParaInline));\\n\\n                // wrap with paragraph\\n                if (inlineSiblings.length) {\\n                    var para = dom.wrap(list.head(inlineSiblings), 'p');\\n                    dom.appendChildNodes(para, list.tail(inlineSiblings));\\n                }\\n\\n                return this.normalize();\\n            };\\n\\n            /**\\n             * insert node at current cursor\\n             *\\n             * @param {Node} node\\n             * @return {Node}\\n             */\\n            this.insertNode = function(node) {\\n                var rng = this.wrapBodyInlineWithPara().deleteContents();\\n                var info = dom.splitPoint(rng.getStartPoint(), dom.isInline(node));\\n\\n                if (info.rightNode) {\\n                    info.rightNode.parentNode.insertBefore(node, info.rightNode);\\n                } else {\\n                    info.container.appendChild(node);\\n                }\\n\\n                return node;\\n            };\\n\\n\\n            /**\\n             * insert html at current cursor\\n             */\\n            this.pasteHTML = function(markup) {\\n                var self = this;\\n                var contentsContainer = $('<div><\\/div>').html(markup)[0];\\n                var childNodes = list.from(contentsContainer.childNodes);\\n\\n                this.wrapBodyInlineWithPara().deleteContents();\\n\\n                return $.map(childNodes.reverse(), function(childNode) {\\n                    return self.insertNode(childNode);\\n                }).reverse();\\n            };\\n\\n            /**\\n             * returns text in range\\n             *\\n             * @return {String}\\n             */\\n            this.toString = function() {\\n                var nativeRng = nativeRange();\\n                return agent.isW3CRangeSupport ? nativeRng.toString() : nativeRng.text;\\n            };\\n\\n            /**\\n             * returns range for word before cursor\\n             *\\n             * @param {Boolean} [findAfter] - find after cursor, default: false\\n             * @return {WrappedRange}\\n             */\\n            this.getWordRange = function(findAfter) {\\n                var endPoint = this.getEndPoint();\\n\\n                if (!dom.isCharPoint(endPoint)) {\\n                    return this;\\n                }\\n\\n                var startPoint = dom.prevPointUntil(endPoint, function(point) {\\n                    return !dom.isCharPoint(point);\\n                });\\n\\n                if (findAfter) {\\n                    endPoint = dom.nextPointUntil(endPoint, function(point) {\\n                        return !dom.isCharPoint(point);\\n                    });\\n                }\\n\\n                return new WrappedRange(\\n                    startPoint.node,\\n                    startPoint.offset,\\n                    endPoint.node,\\n                    endPoint.offset\\n                );\\n            };\\n\\n            /**\\n             * create offsetPath bookmark\\n             *\\n             * @param {Node} editable\\n             */\\n            this.bookmark = function(editable) {\\n                return {\\n                    s: {\\n                        path: dom.makeOffsetPath(editable, sc),\\n                        offset: so\\n                    },\\n                    e: {\\n                        path: dom.makeOffsetPath(editable, ec),\\n                        offset: eo\\n                    }\\n                };\\n            };\\n\\n            /**\\n             * create offsetPath bookmark base on paragraph\\n             *\\n             * @param {Node[]} paras\\n             */\\n            this.paraBookmark = function(paras) {\\n                return {\\n                    s: {\\n                        path: list.tail(dom.makeOffsetPath(list.head(paras), sc)),\\n                        offset: so\\n                    },\\n                    e: {\\n                        path: list.tail(dom.makeOffsetPath(list.last(paras\";\n  builder.string += \"), ec)),\\n                        offset: eo\\n                    }\\n                };\\n            };\\n\\n            /**\\n             * getClientRects\\n             * @return {Rect[]}\\n             */\\n            this.getClientRects = function() {\\n                var nativeRng = nativeRange();\\n                return nativeRng.getClientRects();\\n            };\\n        };\\n\\n        /**\\n         * @class core.range\\n         *\\n         * Data structure\\n         *  * BoundaryPoint: a point of dom tree\\n         *  * BoundaryPoints: two boundaryPoints corresponding to the start and the end of the Range\\n         *\\n         * See to http://www.w3.org/TR/DOM-Level-2-Traversal-Range/ranges.html#Level-2-Range-Position\\n         *\\n         * @singleton\\n         * @alternateClassName range\\n         */\\n        return {\\n            /**\\n             * @method\\n             *\\n             * create Range Object From arguments or Browser Selection\\n             *\\n             * @param {Node} sc - start container\\n             * @param {Number} so - start offset\\n             * @param {Node} ec - end container\\n             * @param {Number} eo - end offset\\n             * @return {WrappedRange}\\n             */\\n            create : function(sc, so, ec, eo) {\\n                if (!arguments.length) { // from Browser Selection\\n                    if (agent.isW3CRangeSupport) {\\n                        var selection = document.getSelection();\\n                        if (!selection || selection.rangeCount === 0) {\\n                            return null;\\n                        } else if (dom.isBody(selection.anchorNode)) {\\n                            // Firefox: returns entire body as range on initialization. We won't never need it.\\n                            return null;\\n                        }\\n\\n                        var nativeRng = selection.getRangeAt(0);\\n                        sc = nativeRng.startContainer;\\n                        so = nativeRng.startOffset;\\n                        ec = nativeRng.endContainer;\\n                        eo = nativeRng.endOffset;\\n                    } else { // IE8: TextRange\\n                        var textRange = document.selection.createRange();\\n                        var textRangeEnd = textRange.duplicate();\\n                        textRangeEnd.collapse(false);\\n                        var textRangeStart = textRange;\\n                        textRangeStart.collapse(true);\\n\\n                        var startPoint = textRangeToPoint(textRangeStart, true),\\n                            endPoint = textRangeToPoint(textRangeEnd, false);\\n\\n                        // same visible point case: range was collapsed.\\n                        if (dom.isText(startPoint.node) && dom.isLeftEdgePoint(startPoint) &&\\n                            dom.isTextNode(endPoint.node) && dom.isRightEdgePoint(endPoint) &&\\n                            endPoint.node.nextSibling === startPoint.node) {\\n                            startPoint = endPoint;\\n                        }\\n\\n                        sc = startPoint.cont;\\n                        so = startPoint.offset;\\n                        ec = endPoint.cont;\\n                        eo = endPoint.offset;\\n                    }\\n                } else if (arguments.length === 2) { //collapsed\\n                    ec = sc;\\n                    eo = so;\\n                }\\n                return new WrappedRange(sc, so, ec, eo);\\n            },\\n\\n            /**\\n             * @method\\n             *\\n             * create WrappedRange from node\\n             *\\n             * @param {Node} node\\n             * @return {WrappedRange}\\n             */\\n            createFromNode: function(node) {\\n                var sc = node;\\n                var so = 0;\\n                var ec = node;\\n                var eo = dom.nodeLength(ec);\\n\\n                // browsers can't target a picture or void node\\n                if (dom.isVoid(sc)) {\\n                    so = dom.listPrev(sc).length - 1;\\n                    sc = sc.parentNode;\\n                }\\n                if (dom.isBR(ec)) {\\n                    eo = dom.listPrev(ec).length - 1;\\n                    ec = ec.parentNode;\\n                } else if (dom.isVoid(ec)) {\\n                    eo = dom.listPrev(ec).length;\\n                    ec = ec.parentNode;\\n                }\\n\\n                return this.create(sc, so, ec, eo);\\n            },\\n\\n            /**\\n             * create WrappedRange from node after position\\n             *\\n             * @param {Node} node\\n             * @return {WrappedRange}\\n             */\\n            createFromNodeBefore: function(node) {\\n                return this.createFromNode(node).collapse(true);\\n            },\\n\\n            /**\\n             * create WrappedRange from node after position\\n             *\\n             * @param {Node} node\\n             * @return {WrappedRange}\\n             */\\n            createFromNodeAfter: function(node) {\\n                return this.createFromNode(node).collapse();\\n            },\\n\\n            /**\\n             * @method\\n             *\\n             * create WrappedRange from bookmark\\n             *\\n             * @param {Node} editable\\n             * @param {Object} bookmark\\n             * @return {WrappedRange}\\n             */\\n            createFromBookmark : function(editable, bookmark) {\\n                var sc = dom.fromOffsetPath(editable, bookmark.s.path);\\n                var so = bookmark.s.offset;\\n                var ec = dom.fromOffsetPath(editable, bookmark.e.path);\\n                var eo = bookmark.e.offset;\\n                return new WrappedRange(sc, so, ec, eo);\\n            },\\n\\n            /**\\n             * @method\\n             *\\n             * create WrappedRange from paraBookmark\\n             *\\n             * @param {Object} bookmark\\n             * @param {Node[]} paras\\n             * @return {WrappedRange}\\n             */\\n            createFromParaBookmark: function(bookmark, paras) {\\n                var so = bookmark.s.offset;\\n                var eo = bookmark.e.offset;\\n                var sc = dom.fromOffsetPath(list.head(paras), bookmark.s.path);\\n                var ec = dom.fromOffsetPath(list.last(paras), bookmark.e.path);\\n\\n                return new WrappedRange(sc, so, ec, eo);\\n            }\\n        };\\n    })();\\n\\n    /**\\n     * @class defaults\\n     * @singleton\\n     */\\n    // >>>>>>> CK\\n    var defaults = {\\n        /** @property */\\n        version: '0.6.9',\\n\\n        /**\\n         * for event options, reference to EventHandler.attach\\n         * @property {Object} options\\n         * @property {String/Number} [options.width=null] set editor width\\n         * @property {String/Number} [options.height=null] set editor height, ex) 300\\n         * @property {String/Number} options.minHeight set minimum height of editor\\n         * @property {String/Number} options.maxHeight\\n         * @property {String/Number} options.focus\\n         * @property {Number} options.tabsize\\n         * @property {Boolean} options.styleWithSpan\\n         * @property {Object} options.codemirror\\n         * @property {Object} [options.codemirror.mode='text/html']\\n         * @property {Object} [options.codemirror.htmlMode=true]\\n         * @property {Object} [options.codemirror.lineNumbers=true]\\n         * @property {String} [options.lang=en-US] language 'en-US', 'ko-KR', ...\\n         * @property {String} [options.direction=null] text direction, ex) 'rtl'\\n         * @property {Array} [options.toolbar]\\n         * @property {Boolean} [options.airMode=false]\\n         * @property {Array} [options.airPopover]\\n         * @property {Fucntion} [options.onInit] initialize\\n         * @property {Fucntion} [options.onsubmit]\\n         */\\n        options: {\\n            // >>>>>>> CK extra options\\n            defaultTextColor: '#212121',       // default text color (used by color tool)\\n            defaultBackColor: '#ddd',          // default text color (used by color tool)\\n            followingToolbar: true,            // make the toolbar follow on window scroll\\n            otherStaticBarClass: \\\"staticTop\\\",  // default class for other static bars eventually used on webapp\\n\\n            width: null,                  // set editor width\\n            height: null,                 // set editor height, ex) 300\\n\\n            minHeight: null,              // set minimum height of editor\\n            maxHeight: null,              // set maximum height of editor\\n\\n            focus: false,                 // set focus to editable area after initializing materialnote\\n\\n            tabsize: 4,                   // size of tab ex) 2 or 4\\n            styleWithSpan: true,          // style with span (Chrome and FF only)\\n\\n            disableLinkTarget: false,     // hide link Target Checkbox\\n            disableDragAndDrop: false,    // disable drag and drop event\\n            disableResizeEditor: false,   // disable resizing editor\\n\\n            shortcuts: true,              // enable keyboard shortcuts\\n\\n            placeholder: false,           // enable placeholder text\\n            prettifyHtml: true,           // enable prettifying html while toggling codeview\\n\\n            iconPrefix: '',               // prefix for css icon classes\\n            icons: {\\n                font: {\\n                    bold: 'format_bold',\\n                    italic: 'format_italic',\\n                    underline: 'format_underlined',\\n                    clear: 'clear',\\n                    height: 'format_size',\\n                    strikethrough: 'strikethrough_s',\\n                    superscript: 'vertical_align_top',\\n                    subscript: 'vertical_align_bottom'\\n                },\\n                image: {\\n                    image: 'image',\\n                    floatLeft: 'format_align_left',\\n                    floatRight: 'format_align_right',\\n                    floatNone: 'format_align_justify',\\n                    shapeRounded: 'crop_3_2',\\n                    shapeCircle: 'panorama_fish_eye',\\n                    shapeThumbnail: 'collections',\\n                    bordered: 'border_outer',\\n                    shapeNone: 'image',\\n                    remove: 'delete'\\n                },\\n                link: {\\n                    link: 'insert_link',\\n                    unlink: 'clear',\\n                    edit: 'create'\\n                },\\n                table: {\\n                    table: 'border_all'\\n                },\\n                hr: {\\n                    insert: 'add'\\n                },\\n                style: {\\n                    style: 'border_color'\\n                },\\n                lists: {\\n                    unordered: 'format_list_bulleted',\\n                    ordered: 'format_list_numbered'\\n                },\\n                options: {\\n                    help: 'help',\\n                    fullscreen: 'settings_overscan',\\n                    codeview: 'code'\\n                },\\n                paragraph: {\\n                    paragraph: 'format_textdirection_l_to_r',\\n                    outdent: 'format_indent_decrease',\\n                    indent: 'format_indent_increase',\\n                    left: 'format_align_left',\\n                    center: 'format_align_center',\\n                    right: 'format_align_right',\\n                    justify: 'format_align_justify'\\n                },\\n                color: {\\n                    recent: 'format_color_text'\\n                },\\n                history: {\\n                    undo: 'undo',\\n                    redo: 'redo'\\n                },\\n                misc: {\\n                    check: 'check'\\n                }\\n            },\\n\\n            codemirror: {                 // codemirror options\\n                mode: 'text/html',\\n                htmlMode: true,\\n                indentWithTabs: true,\\n                tabSize: 4,\\n                lineNumbers: true,\\n                theme: 'monokai',\\n                maxHighlightLength: 'Infinity'\\n            },\\n\\n            // language\\n            lang: 'en-US',                // language 'en-US', 'ko-KR', ...\\n            direction: null,              // text direction, ex) 'rtl'\\n\\n            // toolbar\\n            toolbar: [\\n                ['style', ['style']],\\n                ['font', ['bold', 'italic', 'underline', 'clear']],\\n                // ['font', ['bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript', 'clear']],\\n                ['fontname', ['fontname']],\\n                ['fontsize', ['fontsize']],\\n                ['color', ['color']],\\n                ['para', ['ul', 'ol', 'paragraph']],\\n                ['height', ['height']],\\n                ['table', ['table']],\\n                ['insert', ['link', 'picture', 'hr']],\\n                ['view', ['fullscreen', 'codeview']],\\n                ['help', ['help']]\\n            ],\\n\\n            plugin : {},\\n\\n            // air mode: inline editor\\n            airMode: false,\\n            // airPopover: [\\n            //   ['style', ['style']],\\n            //   ['font', ['bold', 'italic', 'underline', 'clear']],\\n            //   ['fontname', ['fontname']],\\n            //   ['color', ['color']],\\n            //   ['para', ['ul', 'ol', 'paragraph']],\\n            //   ['height', ['height']],\\n            //   ['table', ['table']],\\n            //   ['insert', ['link', 'picture']],\\n            //   ['help', ['help']]\\n            // ],\\n            airPopover: [\\n                ['color', ['color']],\\n                ['font', ['bold', 'underline', 'clear']],\\n                ['para', ['ul', 'paragraph']],\\n                ['table', ['table']],\\n                ['insert', ['link', 'picture']]\\n            ],\\n\\n            // style tag\\n            styleTags: ['p', 'blockquote', 'pre', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\\n\\n            // default fontName\\n            defaultFontName: 'Roboto',\\n\\n            // fontName\\n            fontNames: [\\n                'Roboto', 'Arial', 'Arial Black', 'Comic Sans MS', 'Courier New',\\n                'Helvetica Neue', 'Helvetica', 'Impact', 'Times New Roman', 'Verdana'\\n            ],\\n            fontNamesIgnoreCheck: [],\\n\\n            fontSizes: ['12', '13', '14', '15', '16', '17', '18', '25', '37'],\\n\\n            // pallete colors(n x n)\\n            colors: [//grey      brown      dpurple    purple     indigo     blue       cyan       green      lgreen     yellow     amber      orange     dorange    red        pink\\n                ['#fafafa', '#efebe9', '#7e57c2', '#ab47bc', '#5c6bc0', '#42a5f5', '#26c6da', '#66bb6a', '#9ccc65', '#ffee58', '#ffca28', '#ffa726', '#ff7043', '#ef5350', '#ec407a'],\\n                ['#f5f5f5', '#d7ccc8', '#673ab7', '#9c27b0', '#3f51b5', '#2196f3', '#00bcd4', '#4caf50', '#8bc34a', '#ffeb3b', '#ffc107', '#ff9800', '#ff5722', '#f44336', '#e91e63'],\\n                ['#eeeeee', '#bcaaa4', '#5e35b1', '#8e24aa', '#3949ab', '#1e88e5', '#00acc1', '#43a047', '#7cb342', '#fdd835', '#ffb300', '#fb8c00', '#f4511e', '#e53935', '#d81b60'],\\n                ['#e0e0e0', '#a1887f', '#512da8', '#7b1fa2', '#303f9f', '#1976d2', '#0097a7', '#388e3c', '#689f38', '#fbc02d', '#ffa000', '#f57c00', '#e64a19', '#d32f2f', '#c2185b'],\\n                ['#bdbdbd', '#8d6e63', '#4527a0', '#6a1b9a', '#283593', '#1565c0', '#00838f', '#2e7d32', '#558b2f', '#f9a825', '#ff8f00', '#ef6c00', '#d84315', '#c62828', '#ad1457'],\\n                ['#9e9e9e', '#795548', '#311b92', '#4a148c', '#1a237e', '#0d47a1', '#006064', '#1b5e20', '#33691e', '#f57f17', '#ff6f00', '#e65100', '#bf360c', '#b71c1c', '#880e4f'],\\n                ['#757575', '#6d4c41', '#b388ff', '#ea80fc', '#8c9eff', '#82b1ff', '#84ffff', '#b9f6ca', '#ccff90', '#ffff8d', '#ffe57f', '#ffd180', '#ff9e80', '#ff8a80', '#ff80ab'],\\n                ['#616161', '#5d4037', '#7c4dff', '#e040fb', '#536dfe', '#448aff', '#18ffff', '#69f0ae', '#b2ff59', '#ffff00', '#ffd740', '#ffab40', '#ff6e40', '#ff5252', '#ff4081'],\\n                ['#424242', '#4e342e', '#651fff', '#d500f9', '#3d5afe', '#2979ff', '#00e5ff', '#00e676', '#76ff03', '#ffea00', '#ffc400', '#ff9100', '#ff3d00', '#ff1744', '#f50057'],\\n                ['#212121', '#3e2723', '#6200ea', '#aa00ff', '#304ffe', '#2962ff', '#00b8d4', '#00c853', '#64dd17', '#ffd600', '#ffab00', '#ff6d00', '#dd2c00', '#d50000', '#c51162'],\\n            ],\\n            // pallete colors(n x n)\\n            colorTitles: [\\n                //grey            brown             dpurple                 purple             indigo             blue             cyan             gr\";\n  builder.string += \"een             lgreen                  yellow             amber             orange             dorange                 red             pink\\n                ['grey lighten5', 'brown lighten5', 'deep-purple lighten1', 'purple lighten1', 'indigo lighten1', 'blue lighten1', 'cyan lighten1', 'green lighten1', 'light-green lighten1', 'yellow lighten1', 'amber lighten1', 'orange lighten1', 'deep-orange lighten1', 'red lighten1', 'pink lighten1'],\\n                ['grey lighten4', 'brown lighten4', 'deep-purple',          'purple',          'indigo',          'blue',          'cyan',          'green',          'light-green',          'yellow',          'amber',          'orange',          'deep-orange',          'red',          'pink'         ],\\n                ['grey lighten3', 'brown lighten3', 'deep-purple darken1',  'purple darken1',  'indigo darken1',  'blue darken1',  'cyan darken1',  'green darken1',  'light-green darken1',  'yellow darken1',  'amber darken1',  'orange darken1',  'deep-orange darken1',  'red darken1',  'pink darken1' ],\\n                ['grey lighten2', 'brown lighten2', 'deep-purple darken2',  'purple darken2',  'indigo darken2',  'blue darken2',  'cyan darken2',  'green darken2',  'light-green darken2',  'yellow darken2',  'amber darken2',  'orange darken2',  'deep-orange darken2',  'red darken2',  'pink darken2' ],\\n                ['grey lighten1', 'brown lighten1', 'deep-purple darken3',  'purple darken3',  'indigo darken3',  'blue darken3',  'cyan darken3',  'green darken3',  'light-green darken3',  'yellow darken3',  'amber darken3',  'orange darken3',  'deep-orange darken3',  'red darken3',  'pink darken3' ],\\n                ['grey',          'brown',          'deep-purple darken4',  'purple darken4',  'indigo darken4',  'blue darken4',  'cyan darken4',  'green darken4',  'light-green darken4',  'yellow darken4',  'amber darken4',  'orange darken4',  'deep-orange darken4',  'red darken4',  'pink darken4' ],\\n                ['grey darken1',  'brown darken1',  'deep-purple accent1',  'purple accent1',  'indigo accent1',  'blue accent1',  'cyan accent1',  'green accent1',  'light-green accent1',  'yellow accent1',  'amber accent1',  'orange accent1',  'deep-orange accent1',  'red accent1',  'pink accent1' ],\\n                ['grey darken2',  'brown darken2',  'deep-purple accent2',  'purple accent2',  'indigo accent2',  'blue accent2',  'cyan accent2',  'green accent2',  'light-green accent2',  'yellow accent2',  'amber accent2',  'orange accent2',  'deep-orange accent2',  'red accent2',  'pink accent2' ],\\n                ['grey darken3',  'brown darken3',  'deep-purple accent3',  'purple accent3',  'indigo accent3',  'blue accent3',  'cyan accent3',  'green accent3',  'light-green accent3',  'yellow accent3',  'amber accent3',  'orange accent3',  'deep-orange accent3',  'red accent3',  'pink accent3' ],\\n                ['grey darken4',  'brown darken4',  'deep-purple accent4',  'purple accent4',  'indigo accent4',  'blue accent4',  'cyan accent4',  'green accent4',  'light-green accent4',  'yellow accent4',  'amber accent4',  'orange accent4',  'deep-orange accent4',  'red accent4',  'pink accent4' ],\\n            ],\\n\\n            // lineHeight\\n            lineHeights: ['1.0', '1.2', '1.4', '1.5', '1.6', '1.8', '2.0', '3.0'],\\n\\n            // insertTable max size\\n            insertTableMaxSize: {\\n                col: 12,\\n                row: 10\\n            },\\n\\n            // image\\n            maximumImageFileSize: null, // size in bytes, null = no limit\\n\\n            // callbacks\\n            oninit: null,             // initialize\\n            onfocus: null,            // editable has focus\\n            onblur: null,             // editable out of focus\\n            onenter: null,            // enter key pressed\\n            onkeyup: null,            // keyup\\n            onkeydown: null,          // keydown\\n            onImageUpload: null,      // imageUpload\\n            onImageUploadError: null, // imageUploadError\\n            onMediaDelete: null,      // media delete\\n            onToolbarClick: null,\\n            onsubmit: null,\\n\\n            /**\\n             * manipulate link address when user create link\\n             * @param {String} sLinkUrl\\n             * @return {String}\\n             */\\n            onCreateLink: function(sLinkUrl) {\\n                if (sLinkUrl.indexOf('@') !== -1 && sLinkUrl.indexOf(':') === -1) {\\n                    sLinkUrl =  'mailto:' + sLinkUrl;\\n                }\\n\\n                return sLinkUrl;\\n            },\\n\\n            keyMap: {\\n                pc: {\\n                    'ENTER': 'insertParagraph',\\n                    'CTRL+Z': 'undo',\\n                    'CTRL+Y': 'redo',\\n                    'TAB': 'tab',\\n                    'SHIFT+TAB': 'untab',\\n                    'CTRL+B': 'bold',\\n                    'CTRL+I': 'italic',\\n                    'CTRL+U': 'underline',\\n                    'CTRL+SHIFT+S': 'strikethrough',\\n                    'CTRL+BACKSLASH': 'removeFormat',\\n                    'CTRL+SHIFT+L': 'justifyLeft',\\n                    'CTRL+SHIFT+E': 'justifyCenter',\\n                    'CTRL+SHIFT+R': 'justifyRight',\\n                    'CTRL+SHIFT+J': 'justifyFull',\\n                    'CTRL+SHIFT+NUM7': 'insertUnorderedList',\\n                    'CTRL+SHIFT+NUM8': 'insertOrderedList',\\n                    'CTRL+LEFTBRACKET': 'outdent',\\n                    'CTRL+RIGHTBRACKET': 'indent',\\n                    'CTRL+NUM0': 'formatPara',\\n                    'CTRL+NUM1': 'formatH1',\\n                    'CTRL+NUM2': 'formatH2',\\n                    'CTRL+NUM3': 'formatH3',\\n                    'CTRL+NUM4': 'formatH4',\\n                    'CTRL+NUM5': 'formatH5',\\n                    'CTRL+NUM6': 'formatH6',\\n                    'CTRL+ENTER': 'insertHorizontalRule',\\n                    'CTRL+K': 'showLinkDialog'\\n                },\\n\\n                mac: {\\n                    'ENTER': 'insertParagraph',\\n                    'CMD+Z': 'undo',\\n                    'CMD+SHIFT+Z': 'redo',\\n                    'TAB': 'tab',\\n                    'SHIFT+TAB': 'untab',\\n                    'CMD+B': 'bold',\\n                    'CMD+I': 'italic',\\n                    'CMD+U': 'underline',\\n                    'CMD+SHIFT+S': 'strikethrough',\\n                    'CMD+BACKSLASH': 'removeFormat',\\n                    'CMD+SHIFT+L': 'justifyLeft',\\n                    'CMD+SHIFT+E': 'justifyCenter',\\n                    'CMD+SHIFT+R': 'justifyRight',\\n                    'CMD+SHIFT+J': 'justifyFull',\\n                    'CMD+SHIFT+NUM7': 'insertUnorderedList',\\n                    'CMD+SHIFT+NUM8': 'insertOrderedList',\\n                    'CMD+LEFTBRACKET': 'outdent',\\n                    'CMD+RIGHTBRACKET': 'indent',\\n                    'CMD+NUM0': 'formatPara',\\n                    'CMD+NUM1': 'formatH1',\\n                    'CMD+NUM2': 'formatH2',\\n                    'CMD+NUM3': 'formatH3',\\n                    'CMD+NUM4': 'formatH4',\\n                    'CMD+NUM5': 'formatH5',\\n                    'CMD+NUM6': 'formatH6',\\n                    'CMD+ENTER': 'insertHorizontalRule',\\n                    'CMD+K': 'showLinkDialog'\\n                }\\n            }\\n        },\\n\\n        // default language: en-US\\n        lang: {\\n            'en-US': {\\n                font: {\\n                    bold: 'Bold',\\n                    italic: 'Italic',\\n                    underline: 'Underline',\\n                    clear: 'Remove Font Style',\\n                    height: 'Line Height',\\n                    name: 'Font Family',\\n                    strikethrough: 'Strikethrough',\\n                    subscript: 'Subscript',\\n                    superscript: 'Superscript',\\n                    size: 'Font Size'\\n                },\\n                image: {\\n                    image: 'Picture',\\n                    insert: 'Insert Image',\\n                    resizeFull: 'Resize Full',\\n                    resizeHalf: 'Resize Half',\\n                    resizeQuarter: 'Resize Quarter',\\n                    floatLeft: 'Float Left',\\n                    floatRight: 'Float Right',\\n                    floatNone: 'Float None',\\n                    shapeRounded: 'Shape: Rounded',\\n                    shapeCircle: 'Shape: Circle',\\n                    bordered: 'Bordered',\\n                    shapeThumbnail: 'Shape: Thumbnail',\\n                    shapeNone: 'Shape: None',\\n                    dragImageHere: 'Drag image or text here',\\n                    dropImage: 'Drop image or Text',\\n                    selectFromFiles: 'Select from files',\\n                    maximumFileSize: 'Maximum file size',\\n                    maximumFileSizeError: 'Maximum file size exceeded.',\\n                    url: 'Image URL',\\n                    remove: 'Remove Image'\\n                },\\n                link: {\\n                    link: 'Link',\\n                    insert: 'Insert Link',\\n                    unlink: 'Unlink',\\n                    edit: 'Edit',\\n                    textToDisplay: 'Text to display',\\n                    url: 'To what URL should this link go?',\\n                    openInNewWindow: 'Open in new window'\\n                },\\n                table: {\\n                    table: 'Table',\\n                    striped: 'Striped',\\n                    hoverable: 'Hoverable',\\n                    responsive: 'Responsive',\\n                    bordered: 'Bordered'\\n                },\\n                hr: {\\n                    insert: 'Insert Horizontal Rule'\\n                },\\n                style: {\\n                    style: 'Style',\\n                    normal: 'Normal',\\n                    blockquote: 'Quote',\\n                    pre: 'Code',\\n                    h1: 'Header 1',\\n                    h2: 'Header 2',\\n                    h3: 'Header 3',\\n                    h4: 'Header 4',\\n                    h5: 'Header 5',\\n                    h6: 'Header 6'\\n                },\\n                lists: {\\n                    unordered: 'Unordered list',\\n                    ordered: 'Ordered list'\\n                },\\n                options: {\\n                    help: 'Help',\\n                    fullscreen: 'Full Screen',\\n                    codeview: 'Code View'\\n                },\\n                paragraph: {\\n                    paragraph: 'Paragraph',\\n                    outdent: 'Outdent',\\n                    indent: 'Indent',\\n                    left: 'Align left',\\n                    center: 'Align center',\\n                    right: 'Align right',\\n                    justify: 'Justify full'\\n                },\\n                color: {\\n                    recent: 'Recent Color',\\n                    more: 'More Color',\\n                    background: 'Back',\\n                    foreground: 'Text',\\n                    transparent: 'Transparent',\\n                    setTransparent: 'Transparent',\\n                    reset: 'Reset',\\n                    resetToDefault: 'Default'\\n                },\\n                shortcut: {\\n                    shortcuts: 'Keyboard shortcuts',\\n                    close: 'Close',\\n                    textFormatting: 'Text formatting',\\n                    action: 'Action',\\n                    paragraphFormatting: 'Paragraph formatting',\\n                    documentStyle: 'Document Style',\\n                    extraKeys: 'Extra keys'\\n                },\\n                history: {\\n                    undo: 'Undo',\\n                    redo: 'Redo'\\n                }\\n            }\\n        }\\n    };\\n\\n    /**\\n     * @class core.async\\n     *\\n     * Async functions which returns `Promise`\\n     *\\n     * @singleton\\n     * @alternateClassName async\\n     */\\n    var async = (function() {\\n        /**\\n         * @method readFileAsDataURL\\n         *\\n         * read contents of file as representing URL\\n         *\\n         * @param {File} file\\n         * @return {Promise} - then: sDataUrl\\n         */\\n        var readFileAsDataURL = function(file) {\\n            return $.Deferred(function(deferred) {\\n                $.extend(new FileReader(), {\\n                    onload: function(e) {\\n                        var sDataURL = e.target.result;\\n                        deferred.resolve(sDataURL);\\n                    },\\n                    onerror: function() {\\n                        deferred.reject(this);\\n                    }\\n                }).readAsDataURL(file);\\n            }).promise();\\n        };\\n\\n        /**\\n         * @method createImage\\n         *\\n         * create `<image>` from url string\\n         *\\n         * @param {String} sUrl\\n         * @param {String} filename\\n         * @return {Promise} - then: $image\\n         */\\n        var createImage = function(sUrl, filename) {\\n            return $.Deferred(function(deferred) {\\n                var $img = $('<img>');\\n\\n                $img.one('load', function() {\\n                    $img.off('error abort');\\n                    deferred.resolve($img);\\n                }).one('error abort', function() {\\n                    $img.off('load').detach();\\n                    deferred.reject($img);\\n                }).css({\\n                    display: 'none'\\n                }).appendTo(document.body).attr({\\n                    'src': sUrl,\\n                    'data-filename': filename\\n                });\\n            }).promise();\\n        };\\n\\n        return {\\n            readFileAsDataURL: readFileAsDataURL,\\n            createImage: createImage\\n        };\\n    })();\\n\\n    /**\\n     * @class core.key\\n     *\\n     * Object for keycodes.\\n     *\\n     * @singleton\\n     * @alternateClassName key\\n     */\\n    var key = (function() {\\n        var keyMap = {\\n            'BACKSPACE': 8,\\n            'TAB': 9,\\n            'ENTER': 13,\\n            'SPACE': 32,\\n\\n            // Number: 0-9\\n            'NUM0': 48,\\n            'NUM1': 49,\\n            'NUM2': 50,\\n            'NUM3': 51,\\n            'NUM4': 52,\\n            'NUM5': 53,\\n            'NUM6': 54,\\n            'NUM7': 55,\\n            'NUM8': 56,\\n\\n            // Alphabet: a-z\\n            'B': 66,\\n            'E': 69,\\n            'I': 73,\\n            'J': 74,\\n            'K': 75,\\n            'L': 76,\\n            'R': 82,\\n            'S': 83,\\n            'U': 85,\\n            'Y': 89,\\n            'Z': 90,\\n\\n            'SLASH': 191,\\n            'LEFTBRACKET': 219,\\n            'BACKSLASH': 220,\\n            'RIGHTBRACKET': 221\\n        };\\n\\n        return {\\n            /**\\n             * @method isEdit\\n             *\\n             * @param {Number} keyCode\\n             * @return {Boolean}\\n             */\\n            isEdit: function(keyCode) {\\n                return list.contains([8, 9, 13, 32], keyCode);\\n            },\\n            /**\\n             * @method isMove\\n             *\\n             * @param {Number} keyCode\\n             * @return {Boolean}\\n             */\\n            isMove: function(keyCode) {\\n                return list.contains([37, 38, 39, 40], keyCode);\\n            },\\n            /**\\n             * @property {Object} nameFromCode\\n             * @property {String} nameFromCode.8 \\\"BACKSPACE\\\"\\n             */\\n            nameFromCode: func.invertObject(keyMap),\\n            code: keyMap\\n        };\\n    })();\\n\\n    /**\\n     * @class editing.History\\n     *\\n     * Editor History\\n     *\\n     */\\n    var History = function($editable) {\\n        var stack = [], stackOffset = -1;\\n        var editable = $editable[0];\\n\\n        var makeSnapshot = function() {\\n            var rng = range.create();\\n            var emptyBookmark = {s: {path: [], offset: 0}, e: {path: [], offset: 0}};\\n\\n            return {\\n                contents: $editable.html(),\\n                bookmark: (rng ? rng.bookmark(editable) : emptyBookmark)\\n            };\\n        };\\n\\n        var applySnapshot = function(snapshot) {\\n            if (snapshot.contents !== null) {\\n                $editable.html(snapshot.contents);\\n            }\\n            if (snapshot.bookmark !== null) {\\n                range.createFromBookmark(editable, snapshot.bookmark).select();\\n            }\\n        };\\n\\n        /**\\n         * undo\\n         */\\n        this.undo = function() {\\n            if (0 < stackOffset) {\\n                stackOffset--;\\n                applySnapshot(stack[stackOffset]);\\n            }\\n        };\\n\\n        /**\\n         * redo\\n         */\\n        this.redo = function() {\\n            if (stack.length - 1 > stackOffset) {\\n                stackOffset++;\\n                applySnapshot(stack[sta\";\n  builder.string += \"ckOffset]);\\n            }\\n        };\\n\\n        /**\\n         * recorded undo\\n         */\\n        this.recordUndo = function() {\\n            stackOffset++;\\n\\n            // Wash out stack after stackOffset\\n            if (stack.length > stackOffset) {\\n                stack = stack.slice(0, stackOffset);\\n            }\\n\\n            // Create new snapshot and push it to the end\\n            stack.push(makeSnapshot());\\n        };\\n\\n        // Create first undo stack\\n        this.recordUndo();\\n    };\\n\\n    /**\\n     * @class editing.Style\\n     *\\n     * Style\\n     *\\n     */\\n    var Style = function() {\\n        /**\\n         * @method jQueryCSS\\n         *\\n         * [workaround] for old jQuery\\n         * passing an array of style properties to .css()\\n         * will result in an object of property-value pairs.\\n         * (compability with version < 1.9)\\n         *\\n         * @private\\n         * @param  {jQuery} $obj\\n         * @param  {Array} propertyNames - An array of one or more CSS properties.\\n         * @return {Object}\\n         */\\n        var jQueryCSS = function($obj, propertyNames) {\\n            if (agent.jqueryVersion < 1.9) {\\n                var result = {};\\n                $.each(propertyNames, function(idx, propertyName) {\\n                    result[propertyName] = $obj.css(propertyName);\\n                });\\n                return result;\\n            }\\n            return $obj.css.call($obj, propertyNames);\\n        };\\n\\n        /**\\n         * paragraph level style\\n         *\\n         * @param {WrappedRange} rng\\n         * @param {Object} styleInfo\\n         */\\n        this.stylePara = function(rng, styleInfo) {\\n            $.each(rng.nodes(dom.isPara, {\\n                includeAncestor: true\\n            }), function(idx, para) {\\n                $(para).css(styleInfo);\\n            });\\n        };\\n\\n        /**\\n         * insert and returns styleNodes on range.\\n         *\\n         * @param {WrappedRange} rng\\n         * @param {Object} [options] - options for styleNodes\\n         * @param {String} [options.nodeName] - default: `SPAN`\\n         * @param {Boolean} [options.expandClosestSibling] - default: `false`\\n         * @param {Boolean} [options.onlyPartialContains] - default: `false`\\n         * @return {Node[]}\\n         */\\n        this.styleNodes = function(rng, options) {\\n            rng = rng.splitText();\\n\\n            var nodeName = options && options.nodeName || 'SPAN';\\n            var expandClosestSibling = !!(options && options.expandClosestSibling);\\n            var onlyPartialContains = !!(options && options.onlyPartialContains);\\n\\n            if (rng.isCollapsed()) {\\n                return [rng.insertNode(dom.create(nodeName))];\\n            }\\n\\n            var pred = dom.makePredByNodeName(nodeName);\\n            var nodes = $.map(rng.nodes(dom.isText, {\\n                fullyContains: true\\n            }), function(text) {\\n                return dom.singleChildAncestor(text, pred) || dom.wrap(text, nodeName);\\n            });\\n\\n            if (expandClosestSibling) {\\n                if (onlyPartialContains) {\\n                    var nodesInRange = rng.nodes();\\n                    // compose with partial contains predication\\n                    pred = func.and(pred, function(node) {\\n                        return list.contains(nodesInRange, node);\\n                    });\\n                }\\n\\n                return $.map(nodes, function(node) {\\n                    var siblings = dom.withClosestSiblings(node, pred);\\n                    var head = list.head(siblings);\\n                    var tails = list.tail(siblings);\\n                    $.each(tails, function(idx, elem) {\\n                        dom.appendChildNodes(head, elem.childNodes);\\n                        dom.remove(elem);\\n                    });\\n                    return list.head(siblings);\\n                });\\n            } else {\\n                return nodes;\\n            }\\n        };\\n\\n        /**\\n         * get current style on cursor\\n         *\\n         * @param {WrappedRange} rng\\n         * @param {Node} target - target element on event\\n         * @return {Object} - object contains style properties.\\n         */\\n        this.current = function(rng, target) {\\n            var $cont = $(dom.isText(rng.sc) ? rng.sc.parentNode : rng.sc);\\n            var properties = ['font-family', 'font-size', 'text-align', 'list-style-type', 'line-height'];\\n            var styleInfo = jQueryCSS($cont, properties) || {};\\n\\n            styleInfo['font-size'] = parseInt(styleInfo['font-size'], 10);\\n\\n            // document.queryCommandState for toggle state\\n            styleInfo['font-bold'] = document.queryCommandState('bold') ? 'bold' : 'normal';\\n            styleInfo['font-italic'] = document.queryCommandState('italic') ? 'italic' : 'normal';\\n            styleInfo['font-underline'] = document.queryCommandState('underline') ? 'underline' : 'normal';\\n            styleInfo['font-strikethrough'] = document.queryCommandState('strikeThrough') ? 'strikethrough' : 'normal';\\n            styleInfo['font-superscript'] = document.queryCommandState('superscript') ? 'superscript' : 'normal';\\n            styleInfo['font-subscript'] = document.queryCommandState('subscript') ? 'subscript' : 'normal';\\n\\n            // list-style-type to list-style(unordered, ordered)\\n            if (!rng.isOnList()) {\\n                styleInfo['list-style'] = 'none';\\n            } else {\\n                var aOrderedType = ['circle', 'disc', 'disc-leading-zero', 'square'];\\n                var isUnordered = $.inArray(styleInfo['list-style-type'], aOrderedType) > -1;\\n                styleInfo['list-style'] = isUnordered ? 'unordered' : 'ordered';\\n            }\\n\\n            var para = dom.ancestor(rng.sc, dom.isPara);\\n            if (para && para.style['line-height']) {\\n                styleInfo['line-height'] = para.style.lineHeight;\\n            } else {\\n                var lineHeight = parseInt(styleInfo['line-height'], 10) / parseInt(styleInfo['font-size'], 10);\\n                styleInfo['line-height'] = lineHeight.toFixed(1);\\n            }\\n\\n            styleInfo.image = dom.isImg(target) && target;\\n            styleInfo.anchor = rng.isOnAnchor() && dom.ancestor(rng.sc, dom.isAnchor);\\n            styleInfo.ancestors = dom.listAncestor(rng.sc, dom.isEditable);\\n            styleInfo.range = rng;\\n\\n            return styleInfo;\\n        };\\n    };\\n\\n\\n    /**\\n     * @class editing.Bullet\\n     *\\n     * @alternateClassName Bullet\\n     */\\n    var Bullet = function() {\\n        /**\\n         * @method insertOrderedList\\n         *\\n         * toggle ordered list\\n         *\\n         * @type command\\n         */\\n        this.insertOrderedList = function() {\\n            this.toggleList('OL');\\n        };\\n\\n        /**\\n         * @method insertUnorderedList\\n         *\\n         * toggle unordered list\\n         *\\n         * @type command\\n         */\\n        this.insertUnorderedList = function() {\\n            this.toggleList('UL');\\n        };\\n\\n        /**\\n         * @method indent\\n         *\\n         * indent\\n         *\\n         * @type command\\n         */\\n        this.indent = function() {\\n            var self = this;\\n            var rng = range.create().wrapBodyInlineWithPara();\\n\\n            var paras = rng.nodes(dom.isPara, { includeAncestor: true });\\n            var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\\n\\n            $.each(clustereds, function(idx, paras) {\\n                var head = list.head(paras);\\n                if (dom.isLi(head)) {\\n                    self.wrapList(paras, head.parentNode.nodeName);\\n                } else {\\n                    $.each(paras, function(idx, para) {\\n                        $(para).css('marginLeft', function(idx, val) {\\n                            return (parseInt(val, 10) || 0) + 25;\\n                        });\\n                    });\\n                }\\n            });\\n\\n            rng.select();\\n        };\\n\\n        /**\\n         * @method outdent\\n         *\\n         * outdent\\n         *\\n         * @type command\\n         */\\n        this.outdent = function() {\\n            var self = this;\\n            var rng = range.create().wrapBodyInlineWithPara();\\n\\n            var paras = rng.nodes(dom.isPara, { includeAncestor: true });\\n            var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\\n\\n            $.each(clustereds, function(idx, paras) {\\n                var head = list.head(paras);\\n                if (dom.isLi(head)) {\\n                    self.releaseList([paras]);\\n                } else {\\n                    $.each(paras, function(idx, para) {\\n                        $(para).css('marginLeft', function(idx, val) {\\n                            val = (parseInt(val, 10) || 0);\\n                            return val > 25 ? val - 25 : '';\\n                        });\\n                    });\\n                }\\n            });\\n\\n            rng.select();\\n        };\\n\\n        /**\\n         * @method toggleList\\n         *\\n         * toggle list\\n         *\\n         * @param {String} listName - OL or UL\\n         */\\n        this.toggleList = function(listName) {\\n            var self = this;\\n            var rng = range.create().wrapBodyInlineWithPara();\\n\\n            var paras = rng.nodes(dom.isPara, { includeAncestor: true });\\n            var bookmark = rng.paraBookmark(paras);\\n            var clustereds = list.clusterBy(paras, func.peq2('parentNode'));\\n\\n            // paragraph to list\\n            if (list.find(paras, dom.isPurePara)) {\\n                var wrappedParas = [];\\n                $.each(clustereds, function(idx, paras) {\\n                    wrappedParas = wrappedParas.concat(self.wrapList(paras, listName));\\n                });\\n                paras = wrappedParas;\\n                // list to paragraph or change list style\\n            } else {\\n                var diffLists = rng.nodes(dom.isList, {\\n                    includeAncestor: true\\n                }).filter(function(listNode) {\\n                    return !$.nodeName(listNode, listName);\\n                });\\n\\n                if (diffLists.length) {\\n                    $.each(diffLists, function(idx, listNode) {\\n                        dom.replace(listNode, listName);\\n                    });\\n                } else {\\n                    paras = this.releaseList(clustereds, true);\\n                }\\n            }\\n\\n            range.createFromParaBookmark(bookmark, paras).select();\\n        };\\n\\n        /**\\n         * @method wrapList\\n         *\\n         * @param {Node[]} paras\\n         * @param {String} listName\\n         * @return {Node[]}\\n         */\\n        this.wrapList = function(paras, listName) {\\n            var head = list.head(paras);\\n            var last = list.last(paras);\\n\\n            var prevList = dom.isList(head.previousSibling) && head.previousSibling;\\n            var nextList = dom.isList(last.nextSibling) && last.nextSibling;\\n\\n            var listNode = prevList || dom.insertAfter(dom.create(listName || 'UL'), last);\\n\\n            // P to LI\\n            paras = $.map(paras, function(para) {\\n                return dom.isPurePara(para) ? dom.replace(para, 'LI') : para;\\n            });\\n\\n            // append to list(<ul>, <ol>)\\n            dom.appendChildNodes(listNode, paras);\\n\\n            if (nextList) {\\n                dom.appendChildNodes(listNode, list.from(nextList.childNodes));\\n                dom.remove(nextList);\\n            }\\n\\n            return paras;\\n        };\\n\\n        /**\\n         * @method releaseList\\n         *\\n         * @param {Array[]} clustereds\\n         * @param {Boolean} isEscapseToBody\\n         * @return {Node[]}\\n         */\\n        this.releaseList = function(clustereds, isEscapseToBody) {\\n            var releasedParas = [];\\n\\n            $.each(clustereds, function(idx, paras) {\\n                var head = list.head(paras);\\n                var last = list.last(paras);\\n\\n                var headList = isEscapseToBody ? dom.lastAncestor(head, dom.isList) :\\n                    head.parentNode;\\n                var lastList = headList.childNodes.length > 1 ? dom.splitTree(headList, {\\n                    node: last.parentNode,\\n                    offset: dom.position(last) + 1\\n                }, {\\n                    isSkipPaddingBlankHTML: true\\n                }) : null;\\n\\n                var middleList = dom.splitTree(headList, {\\n                    node: head.parentNode,\\n                    offset: dom.position(head)\\n                }, {\\n                    isSkipPaddingBlankHTML: true\\n                });\\n\\n                paras = isEscapseToBody ? dom.listDescendant(middleList, dom.isLi) :\\n                    list.from(middleList.childNodes).filter(dom.isLi);\\n\\n                // LI to P\\n                if (isEscapseToBody || !dom.isList(headList.parentNode)) {\\n                    paras = $.map(paras, function(para) {\\n                        return dom.replace(para, 'P');\\n                    });\\n                }\\n\\n                $.each(list.from(paras).reverse(), function(idx, para) {\\n                    dom.insertAfter(para, headList);\\n                });\\n\\n                // remove empty lists\\n                var rootLists = list.compact([headList, middleList, lastList]);\\n                $.each(rootLists, function(idx, rootList) {\\n                    var listNodes = [rootList].concat(dom.listDescendant(rootList, dom.isList));\\n                    $.each(listNodes.reverse(), function(idx, listNode) {\\n                        if (!dom.nodeLength(listNode)) {\\n                            dom.remove(listNode, true);\\n                        }\\n                    });\\n                });\\n\\n                releasedParas = releasedParas.concat(paras);\\n            });\\n\\n            return releasedParas;\\n        };\\n    };\\n\\n\\n    /**\\n     * @class editing.Typing\\n     *\\n     * Typing\\n     *\\n     */\\n    var Typing = function() {\\n\\n        // a Bullet instance to toggle lists off\\n        var bullet = new Bullet();\\n\\n        /**\\n         * insert tab\\n         *\\n         * @param {jQuery} $editable\\n         * @param {WrappedRange} rng\\n         * @param {Number} tabsize\\n         */\\n        this.insertTab = function($editable, rng, tabsize) {\\n            var tab = dom.createText(new Array(tabsize + 1).join(dom.NBSP_CHAR));\\n            rng = rng.deleteContents();\\n            rng.insertNode(tab, true);\\n\\n            rng = range.create(tab, tabsize);\\n            rng.select();\\n        };\\n\\n        /**\\n         * insert paragraph\\n         */\\n        this.insertParagraph = function() {\\n            var rng = range.create();\\n\\n            // deleteContents on range.\\n            rng = rng.deleteContents();\\n\\n            // Wrap range if it needs to be wrapped by paragraph\\n            rng = rng.wrapBodyInlineWithPara();\\n\\n            // finding paragraph\\n            var splitRoot = dom.ancestor(rng.sc, dom.isPara);\\n\\n            var nextPara;\\n            // on paragraph: split paragraph\\n            if (splitRoot) {\\n                // if it is an empty line with li\\n                if (dom.isEmpty(splitRoot) && dom.isLi(splitRoot)) {\\n                    // disable UL/OL and escape!\\n                    bullet.toggleList(splitRoot.parentNode.nodeName);\\n                    return;\\n                    // if new line has content (not a line break)\\n                } else {\\n                    nextPara = dom.splitTree(splitRoot, rng.getStartPoint());\\n\\n                    var emptyAnchors = dom.listDescendant(splitRoot, dom.isEmptyAnchor);\\n                    emptyAnchors = emptyAnchors.concat(dom.listDescendant(nextPara, dom.isEmptyAnchor));\\n\\n                    $.each(emptyAnchors, function(idx, anchor) {\\n                        dom.remove(anchor);\\n                    });\\n                }\\n                // no paragraph: insert empty paragraph\\n            } else {\\n                var next = rng.sc.childNodes[rng.so];\\n                nextPara = $(dom.emptyPara)[0];\\n                if (next) {\\n                    rng.sc.insertBefore(nextPara, next);\\n                } else {\\n                    rng.sc.appendChild(nextPara);\\n                }\\n            }\\n\\n            range.create(nextPara, 0).normalize().select();\\n\\n        };\\n\\n    };\\n\\n    /**\\n     * @class editing.Table\\n     *\\n     * Table\\n     *\\n     */\\n    var Table = function() {\\n        /**\\n         * handle tab key\\n         *\\n         * @param {WrappedRange} rng\\n         * @param {Boolean} isShift\\n         */\\n        this.tab = function(rng, isShift)\";\n  builder.string += \" {\\n            var cell = dom.ancestor(rng.commonAncestor(), dom.isCell);\\n            var table = dom.ancestor(cell, dom.isTable);\\n            var cells = dom.listDescendant(table, dom.isCell);\\n\\n            var nextCell = list[isShift ? 'prev' : 'next'](cells, cell);\\n            if (nextCell) {\\n                range.create(nextCell, 0).select();\\n            }\\n        };\\n\\n        /**\\n         * create empty table element\\n         *\\n         * @param {Number} rowCount\\n         * @param {Number} colCount\\n         * @return {Node}\\n         */\\n        this.createTable = function(tOptions) {\\n            var tds = [], tdHTML;\\n            var theaders = [];\\n            var colCount = tOptions[0];\\n            var rowCount = tOptions[1];\\n            var classes = tOptions.slice(2, tOptions.length);\\n\\n            for (var idxCol = 0; idxCol < colCount; idxCol++) {\\n                //tds.push('<td>' + dom.blank + '<\\/td>');\\n                tds.push('<td>(item)<\\/td>');\\n                theaders.push('<th>header<\\/th>');\\n            }\\n            tdHTML = tds.join('');\\n            theaders = theaders.join('');\\n\\n            var trs = [], trHTML;\\n            for (var idxRow = 0; idxRow < rowCount; idxRow++) {\\n                trs.push('<tr>' + tdHTML + '<\\/tr>');\\n            }\\n            trHTML = trs.join('');\\n\\n            return $('<table class=\\\"' + classes.join(' ') + '\\\"><thead><tr>' + theaders + '<\\/tr><\\/thead><tbody>' + trHTML + '<\\/tbody><\\/table>')[0];\\n        };\\n    };\\n\\n\\n    var KEY_BOGUS = 'bogus';\\n\\n    /**\\n     * @class editing.Editor\\n     *\\n     * Editor\\n     *\\n     */\\n    var Editor = function(handler) {\\n\\n        var style = new Style();\\n        var table = new Table();\\n        var typing = new Typing();\\n        var bullet = new Bullet();\\n\\n        /**\\n         * @method createRange\\n         *\\n         * create range\\n         *\\n         * @param {jQuery} $editable\\n         * @return {WrappedRange}\\n         */\\n        this.createRange = function($editable) {\\n            this.focus($editable);\\n            return range.create();\\n        };\\n\\n        /**\\n         * @method saveRange\\n         *\\n         * save current range\\n         *\\n         * @param {jQuery} $editable\\n         * @param {Boolean} [thenCollapse=false]\\n         */\\n        this.saveRange = function($editable, thenCollapse) {\\n            this.focus($editable);\\n            $editable.data('range', range.create());\\n            if (thenCollapse) {\\n                range.create().collapse().select();\\n            }\\n        };\\n\\n        /**\\n         * @method saveRange\\n         *\\n         * save current node list to $editable.data('childNodes')\\n         *\\n         * @param {jQuery} $editable\\n         */\\n        this.saveNode = function($editable) {\\n            // copy child node reference\\n            var copy = [];\\n            for (var key  = 0, len = $editable[0].childNodes.length; key < len; key++) {\\n                copy.push($editable[0].childNodes[key]);\\n            }\\n            $editable.data('childNodes', copy);\\n        };\\n\\n        /**\\n         * @method restoreRange\\n         *\\n         * restore lately range\\n         *\\n         * @param {jQuery} $editable\\n         */\\n        this.restoreRange = function($editable) {\\n            var rng = $editable.data('range');\\n            if (rng) {\\n                rng.select();\\n                this.focus($editable);\\n            }\\n        };\\n\\n        /**\\n         * @method restoreNode\\n         *\\n         * restore lately node list\\n         *\\n         * @param {jQuery} $editable\\n         */\\n        this.restoreNode = function($editable) {\\n            $editable.html('');\\n            var child = $editable.data('childNodes');\\n            for (var index = 0, len = child.length; index < len; index++) {\\n                $editable[0].appendChild(child[index]);\\n            }\\n        };\\n\\n        this.reset = function($editable) {\\n            $editable.html('');\\n        };\\n\\n        this.html = function($editable, html) {\\n            $editable.html(html);\\n        };\\n\\n        this.getHTML = function($editable) {\\n            return $editable.html();\\n        };\\n        /**\\n         * @method currentStyle\\n         *\\n         * current style\\n         *\\n         * @param {Node} target\\n         * @return {Boolean} false if range is no\\n         */\\n        this.currentStyle = function(target) {\\n            var rng = range.create();\\n            return rng ? rng.isOnEditable() && style.current(rng, target) : false;\\n        };\\n\\n        var triggerOnBeforeChange = function($editable) {\\n            var $holder = dom.makeLayoutInfo($editable).holder();\\n            handler.bindCustomEvent(\\n                $holder, $editable.data('callbacks'), 'before.command'\\n            )($editable.html(), $editable);\\n        };\\n\\n        var triggerOnChange = function($editable) {\\n            var $holder = dom.makeLayoutInfo($editable).holder();\\n            handler.bindCustomEvent(\\n                $holder, $editable.data('callbacks'), 'change'\\n            )($editable.html(), $editable);\\n        };\\n\\n        /**\\n         * @method undo\\n         * undo\\n         * @param {jQuery} $editable\\n         */\\n        this.undo = function($editable) {\\n            triggerOnBeforeChange($editable);\\n            $editable.data('NoteHistory').undo();\\n            triggerOnChange($editable);\\n        };\\n\\n        /**\\n         * @method redo\\n         * redo\\n         * @param {jQuery} $editable\\n         */\\n        this.redo = function($editable) {\\n            triggerOnBeforeChange($editable);\\n            $editable.data('NoteHistory').redo();\\n            triggerOnChange($editable);\\n        };\\n\\n        var self = this;\\n        /**\\n         * @method beforeCommand\\n         * before command\\n         * @param {jQuery} $editable\\n         */\\n        var beforeCommand = this.beforeCommand = function($editable) {\\n            triggerOnBeforeChange($editable);\\n            // keep focus on editable before command execution\\n            self.focus($editable);\\n        };\\n\\n        /**\\n         * @method afterCommand\\n         * after command\\n         * @param {jQuery} $editable\\n         * @param {Boolean} isPreventTrigger\\n         */\\n        var afterCommand = this.afterCommand = function($editable, isPreventTrigger) {\\n            $editable.data('NoteHistory').recordUndo();\\n            if (!isPreventTrigger) {\\n                triggerOnChange($editable);\\n            }\\n        };\\n\\n        /**\\n         * @method bold\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method italic\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method underline\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method strikethrough\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method formatBlock\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method superscript\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method subscript\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method justifyLeft\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method justifyCenter\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method justifyRight\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method justifyFull\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method formatBlock\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method removeFormat\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method backColor\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method foreColor\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method insertHorizontalRule\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /**\\n         * @method fontName\\n         *\\n         * change font name\\n         *\\n         * @param {jQuery} $editable\\n         * @param {Mixed} value\\n         */\\n\\n        /* jshint ignore:start */\\n        // native commands(with execCommand), generate function for execCommand\\n        // >>>>>>> CK\\n        var commands = ['bold', 'italic', 'underline', 'strikethrough', 'superscript', 'subscript',\\n            'justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull',\\n            'formatBlock', 'removeFormat',\\n            'backColor', 'foreColor', 'fontName'];\\n\\n        for (var idx = 0, len = commands.length; idx < len; idx ++) {\\n            this[commands[idx]] = (function(sCmd) {\\n                return function($editable, value) {\\n                    beforeCommand($editable);\\n\\n                    document.execCommand(sCmd, false, value);\\n\\n                    afterCommand($editable, true);\\n                };\\n            })(commands[idx]);\\n        }\\n        /* jshint ignore:end */\\n\\n        this.insertHorizontalRule = function() {\\n            var hrNode = $('<div />');\\n            hrNode.addClass('divider');\\n\\n            range.create().insertNode(hrNode[0]);\\n        };\\n\\n        /**\\n         * @method tab\\n         *\\n         * handle tab key\\n         *\\n         * @param {jQuery} $editable\\n         * @param {Object} options\\n         */\\n        this.tab = function($editable, options) {\\n            var rng = this.createRange($editable);\\n            if (rng.isCollapsed() && rng.isOnCell()) {\\n                table.tab(rng);\\n            } else {\\n                beforeCommand($editable);\\n                typing.insertTab($editable, rng, options.tabsize);\\n                afterCommand($editable);\\n            }\\n        };\\n\\n        /**\\n         * @method untab\\n         *\\n         * handle shift+tab key\\n         *\\n         */\\n        this.untab = function($editable) {\\n            var rng = this.createRange($editable);\\n            if (rng.isCollapsed() && rng.isOnCell()) {\\n                table.tab(rng, true);\\n            }\\n        };\\n\\n        /**\\n         * @method insertParagraph\\n         *\\n         * insert paragraph\\n         *\\n         * @param {Node} $editable\\n         */\\n        this.insertParagraph = function($editable) {\\n            beforeCommand($editable);\\n            typing.insertParagraph($editable);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * @method insertOrderedList\\n         *\\n         * @param {jQuery} $editable\\n         */\\n        this.insertOrderedList = function($editable) {\\n            beforeCommand($editable);\\n            bullet.insertOrderedList($editable);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * @param {jQuery} $editable\\n         */\\n        this.insertUnorderedList = function($editable) {\\n            beforeCommand($editable);\\n            bullet.insertUnorderedList($editable);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * @param {jQuery} $editable\\n         */\\n        this.indent = function($editable) {\\n            beforeCommand($editable);\\n            bullet.indent($editable);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * @param {jQuery} $editable\\n         */\\n        this.outdent = function($editable) {\\n            beforeCommand($editable);\\n            bullet.outdent($editable);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * insert image\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} sUrl\\n         */\\n        this.insertImage = function($editable, sUrl, filename) {\\n            async.createImage(sUrl, filename).then(function($image) {\\n                beforeCommand($editable);\\n                $image.css({\\n                    display: '',\\n                    width: Math.min($editable.width(), $image.width())\\n                });\\n                range.create().insertNode($image[0]);\\n                range.createFromNodeAfter($image[0]).select();\\n                afterCommand($editable);\\n            }).fail(function() {\\n                var $holder = dom.makeLayoutInfo($editable).holder();\\n                handler.bindCustomEvent(\\n                    $holder, $editable.data('callbacks'), 'image.upload.error'\\n                )();\\n            });\\n        };\\n\\n        /**\\n         * @method insertNode\\n         * insert node\\n         * @param {Node} $editable\\n         * @param {Node} node\\n         */\\n        this.insertNode = function($editable, node) {\\n            beforeCommand($editable);\\n            range.create().insertNode(node);\\n            range.createFromNodeAfter(node).select();\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * insert text\\n         * @param {Node} $editable\\n         * @param {String} text\\n         */\\n        this.insertText = function($editable, text) {\\n            beforeCommand($editable);\\n            var textNode = range.create().insertNode(dom.createText(text));\\n            range.create(textNode, dom.nodeLength(textNode)).select();\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * paste HTML\\n         * @param {Node} $editable\\n         * @param {String} markup\\n         */\\n        this.pasteHTML = function($editable, markup) {\\n            beforeCommand($editable);\\n            var contents = range.create().pasteHTML(markup);\\n            range.createFromNodeAfter(list.last(contents)).select();\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * formatBlock\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} tagName\\n         */\\n        this.formatBlock = function($editable, tagName) {\\n            beforeCommand($editable);\\n            // [workaround] for MSIE, IE need `<`\\n            tagName = agent.isMSIE ? '<' + tagName + '>' : tagName;\\n            document.execCommand('FormatBlock', false, tagName);\\n            afterCommand($editable);\\n        };\\n\\n        this.formatPara = function($editable) {\\n            beforeCommand($editable);\\n            this.formatBlock($editable, 'P');\\n            afterCommand($editable);\\n        };\\n\\n        /* jshint ignore:start */\\n        for (var idx = 1; idx <= 6; idx ++) {\\n            this['formatH' + idx] = function(idx) {\\n                return function($editable) {\\n                    this.formatBlock($editable, 'H' + idx);\\n                };\\n            }(idx);\\n        };\\n        /* jshint ignore:end */\\n\\n        /**\\n         * fontSize\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} value - px\\n         */\\n        this.fontSize = function($editable, value) {\\n            var rng = range.create();\\n            var isCollapsed = rng.isCollapsed();\\n\\n            if (isCollapsed) {\\n                var spans = style.styleNodes(rng);\\n                var firstSpan = list.head(spans);\\n\\n                $(spans).css({\\n                    'font-size': value + 'px'\\n                });\\n\\n                // [workaround] added styled bogus span for style\\n                //  - also bogus character needed for cursor position\\n                if (firstSpan && !dom.nodeLength(firstSpan)) {\\n                    firstSpan.innerHTML = dom.ZERO_WIDTH_NBSP_CHAR;\\n                    range.createFromNodeAfter(firstSpan.firstChild).select();\\n                    $editable.data(KEY_BOGUS, firstSpan);\\n                }\\n            } else {\\n                beforeCommand($editable);\\n                $(style.styleNodes(rng)).css({\\n                    'font-size': value + 'px'\\n                });\\n                afterCommand($editable);\\n            }\\n        };\\n\\n        /**\\n         * remove bogus node and character\\n         */\\n        this.removeBogus = function($editable) {\\n            var bogusNode = $editable.data(KEY_BOGUS);\\n            if (!bogusNode) {\\n                return;\\n            }\\n\\n            var textNode = list.find(list.from(bogusNode.childNodes), dom.isText);\\n\\n            var bogusCharIdx = textNode.nodeValue.indexOf(dom.ZERO_WIDTH\";\n  builder.string += \"_NBSP_CHAR);\\n            if (bogusCharIdx !== -1) {\\n                textNode.deleteData(bogusCharIdx, 1);\\n            }\\n\\n            if (dom.isEmpty(bogusNode)) {\\n                dom.remove(bogusNode);\\n            }\\n\\n            $editable.removeData(KEY_BOGUS);\\n        };\\n\\n        /**\\n         * lineHeight\\n         * @param {jQuery} $editable\\n         * @param {String} value\\n         */\\n        this.lineHeight = function($editable, value) {\\n            beforeCommand($editable);\\n            style.stylePara(range.create(), {\\n                lineHeight: value\\n            });\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * unlink\\n         *\\n         * @type command\\n         *\\n         * @param {jQuery} $editable\\n         */\\n        this.unlink = function($editable) {\\n            var rng = this.createRange($editable);\\n            if (rng.isOnAnchor()) {\\n                var anchor = dom.ancestor(rng.sc, dom.isAnchor);\\n                rng = range.createFromNode(anchor);\\n                rng.select();\\n\\n                beforeCommand($editable);\\n                document.execCommand('unlink');\\n                afterCommand($editable);\\n            }\\n        };\\n\\n        /**\\n         * create link (command)\\n         *\\n         * @param {jQuery} $editable\\n         * @param {Object} linkInfo\\n         * @param {Object} options\\n         */\\n        this.createLink = function($editable, linkInfo, options) {\\n            var linkUrl = linkInfo.url;\\n            var linkText = linkInfo.text;\\n            var isNewWindow = linkInfo.newWindow;\\n            var rng = linkInfo.range;\\n            var isTextChanged = rng.toString() !== linkText;\\n\\n            beforeCommand($editable);\\n\\n            if (options.onCreateLink) {\\n                linkUrl = options.onCreateLink(linkUrl);\\n            }\\n\\n            var anchors = [];\\n            if (isTextChanged) {\\n                // Create a new link when text changed.\\n                var anchor = rng.insertNode($('<A>' + linkText + '<\\/A>')[0]);\\n                anchors.push(anchor);\\n            } else {\\n                anchors = style.styleNodes(rng, {\\n                    nodeName: 'A',\\n                    expandClosestSibling: true,\\n                    onlyPartialContains: true\\n                });\\n            }\\n\\n            $.each(anchors, function(idx, anchor) {\\n                $(anchor).attr('href', linkUrl);\\n                if (isNewWindow) {\\n                    $(anchor).attr('target', '_blank');\\n                } else {\\n                    $(anchor).removeAttr('target');\\n                }\\n            });\\n\\n            var startRange = range.createFromNodeBefore(list.head(anchors));\\n            var startPoint = startRange.getStartPoint();\\n            var endRange = range.createFromNodeAfter(list.last(anchors));\\n            var endPoint = endRange.getEndPoint();\\n\\n            range.create(\\n                startPoint.node,\\n                startPoint.offset,\\n                endPoint.node,\\n                endPoint.offset\\n            ).select();\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * returns link info\\n         *\\n         * @return {Object}\\n         * @return {WrappedRange} return.range\\n         * @return {String} return.text\\n         * @return {Boolean} [return.isNewWindow=true]\\n         * @return {String} [return.url='']\\n         */\\n        this.getLinkInfo = function($editable) {\\n            this.focus($editable);\\n\\n            var rng = range.create().expand(dom.isAnchor);\\n\\n            // Get the first anchor on range(for edit).\\n            var $anchor = $(list.head(rng.nodes(dom.isAnchor)));\\n\\n            return {\\n                range: rng,\\n                text: rng.toString(),\\n                isNewWindow: $anchor.length ? $anchor.attr('target') === '_blank' : false,\\n                url: $anchor.length ? $anchor.attr('href') : ''\\n            };\\n        };\\n\\n        /**\\n         * setting color\\n         *\\n         * @param {Node} $editable\\n         * @param {Object} sObjColor  color code\\n         * @param {String} sObjColor.foreColor foreground color\\n         * @param {String} sObjColor.backColor background color\\n         */\\n        this.color = function($editable, sObjColor) {\\n            var oColor = JSON.parse(sObjColor);\\n            var foreColor = oColor.foreColor, backColor = oColor.backColor;\\n\\n            beforeCommand($editable);\\n\\n            if (foreColor) { document.execCommand('foreColor', false, foreColor); }\\n            if (backColor) { document.execCommand('backColor', false, backColor); }\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * insert Table\\n         *\\n         * @param {Node} $editable\\n         * @param {String} sDim dimension of table (ex : \\\"5x5\\\")\\n         */\\n        this.insertTable = function($editable, sDim) {\\n            var tOptions = sDim.split('x');\\n            beforeCommand($editable);\\n\\n            var rng = range.create().deleteContents();\\n            rng.insertNode(table.createTable(tOptions));\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * float me\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} value\\n         * @param {jQuery} $target\\n         */\\n        this.floatMe = function($editable, value, $target) {\\n            beforeCommand($editable);\\n            $target.css('float', value);\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * change image shape\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} value css class\\n         * @param {Node} $target\\n         */\\n        this.imageShape = function($editable, value, $target) {\\n            beforeCommand($editable);\\n\\n            $target.removeClass('img-rounded img-circle img-thumbnail img-bordered');\\n\\n            if (value) {\\n                $target.addClass(value);\\n            }\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * >>>>>>> CK\\n         * change image class\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} value css class\\n         * @param {Node} $target\\n         */\\n        this.imageClass = function($editable, value, $target) {\\n            beforeCommand($editable);\\n\\n            if (value) {\\n                if ($target.hasClass(value)) {\\n                    $target.removeClass(value);\\n                } else {\\n                    $target.addClass(value);\\n                }\\n            }\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * resize overlay element\\n         * @param {jQuery} $editable\\n         * @param {String} value\\n         * @param {jQuery} $target - target element\\n         */\\n        this.resize = function($editable, value, $target) {\\n            beforeCommand($editable);\\n\\n            $target.css({\\n                width: value * 100 + '%',\\n                height: ''\\n            });\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * @param {Position} pos\\n         * @param {jQuery} $target - target element\\n         * @param {Boolean} [bKeepRatio] - keep ratio\\n         */\\n        this.resizeTo = function(pos, $target, bKeepRatio) {\\n            var imageSize;\\n            if (bKeepRatio) {\\n                var newRatio = pos.y / pos.x;\\n                var ratio = $target.data('ratio');\\n                imageSize = {\\n                    width: ratio > newRatio ? pos.x : pos.y / ratio,\\n                    height: ratio > newRatio ? pos.x * ratio : pos.y\\n                };\\n            } else {\\n                imageSize = {\\n                    width: pos.x,\\n                    height: pos.y\\n                };\\n            }\\n\\n            $target.css(imageSize);\\n        };\\n\\n        /**\\n         * remove media object\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} value - dummy argument (for keep interface)\\n         * @param {jQuery} $target - target element\\n         */\\n        this.removeMedia = function($editable, value, $target) {\\n            beforeCommand($editable);\\n            $target.detach();\\n\\n            handler.bindCustomEvent(\\n                $(), $editable.data('callbacks'), 'media.delete'\\n            )($target, $editable);\\n\\n            afterCommand($editable);\\n        };\\n\\n        /**\\n         * set focus\\n         *\\n         * @param $editable\\n         */\\n        this.focus = function($editable) {\\n            $editable.focus();\\n\\n            // [workaround] for firefox bug http://goo.gl/lVfAaI\\n            if (agent.isFF && !range.create().isOnEditable()) {\\n                range.createFromNode($editable[0])\\n                    .normalize()\\n                    .collapse()\\n                    .select();\\n            }\\n        };\\n\\n        /**\\n         * returns whether contents is empty or not.\\n         *\\n         * @param {jQuery} $editable\\n         * @return {Boolean}\\n         */\\n        this.isEmpty = function($editable) {\\n            return dom.isEmpty($editable[0]) || dom.emptyPara === $editable.html();\\n        };\\n    };\\n\\n    /**\\n     * @class module.Button\\n     *\\n     * Button\\n     */\\n    var Button = function() {\\n        /**\\n         * update button status\\n         *\\n         * @param {jQuery} $container\\n         * @param {Object} styleInfo\\n         */\\n        this.update = function($container, styleInfo) {\\n            /**\\n             * handle dropdown's check mark (for fontname, fontsize, lineHeight).\\n             * @param {jQuery} $btn\\n             * @param {Number} value\\n             */\\n            var checkDropdownMenu = function($btn, value) {\\n                $btn.find('.dropdown-menu li').each(function() {\\n\\n                    var div = $(this).children('div');\\n                    var currentValue = div.data('value');\\n\\n                    // always compare string to avoid creating another func.\\n                    if ((currentValue + '') === (value + '')) {\\n                        div.children('i').removeClass('transparent');\\n                    } else {\\n                        div.children('i').addClass('transparent');\\n                    }\\n                });\\n            };\\n\\n            /**\\n             * update button state(active or not).\\n             *\\n             * @private\\n             * @param {String} selector\\n             * @param {Function} pred\\n             */\\n            var btnState = function(selector, pred) {\\n                var $btn = $container.find(selector);\\n\\n                $btn.toggleClass('active', pred());\\n            };\\n\\n            if (styleInfo.image) {\\n                var $img = $(styleInfo.image);\\n\\n                btnState('.btn[data-event=\\\"imageClass\\\"][data-value=\\\"img-rounded\\\"]', function() {\\n                    return $img.hasClass('img-rounded');\\n                });\\n                btnState('.btn[data-event=\\\"imageClass\\\"][data-value=\\\"img-circle\\\"]', function() {\\n                    return $img.hasClass('img-circle');\\n                });\\n                btnState('.btn[data-event=\\\"imageClass\\\"][data-value=\\\"img-thumbnail\\\"]', function() {\\n                    return $img.hasClass('img-thumbnail');\\n                });\\n                btnState('.btn[data-event=\\\"imageClass\\\"][data-value=\\\"img-bordered\\\"]', function() {\\n                    return $img.hasClass('img-bordered');\\n                });\\n                btnState('.btn[data-event=\\\"imageShape\\\"]:not([data-value])', function() {\\n                    return !$img.is('.img-rounded, .img-circle, .img-thumbnail, .img-bordered');\\n                });\\n\\n                var imgFloat = $img.css('float');\\n                btnState('.btn[data-event=\\\"floatMe\\\"][data-value=\\\"left\\\"]', function() {\\n                    return imgFloat === 'left';\\n                });\\n                btnState('.btn[data-event=\\\"floatMe\\\"][data-value=\\\"right\\\"]', function() {\\n                    return imgFloat === 'right';\\n                });\\n                btnState('.btn[data-event=\\\"floatMe\\\"][data-value=\\\"none\\\"]', function() {\\n                    return imgFloat !== 'left' && imgFloat !== 'right';\\n                });\\n\\n                var style = $img.attr('style');\\n                btnState('.btn[data-event=\\\"resize\\\"][data-value=\\\"1\\\"]', function() {\\n                    return !!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*100%/.test(style);\\n                });\\n                btnState('.btn[data-event=\\\"resize\\\"][data-value=\\\"0.5\\\"]', function() {\\n                    return !!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*50%/.test(style);\\n                });\\n                btnState('.btn[data-event=\\\"resize\\\"][data-value=\\\"0.25\\\"]', function() {\\n                    return !!/(^|\\\\s)(max-)?width\\\\s*:\\\\s*25%/.test(style);\\n                });\\n                return;\\n            }\\n\\n            // fontname\\n            var $fontname = $container.find('.note-fontname[data-name=fontname]');\\n            if ($fontname.length) {\\n                var selectedFont = styleInfo['font-family'];\\n                if (!!selectedFont) {\\n\\n                    var list = selectedFont.split(',');\\n                    for (var i = 0, len = list.length; i < len; i++) {\\n                        selectedFont = list[i].replace(/[\\\\'\\\\\\\"]/g, '').replace(/\\\\s+$/, '').replace(/^\\\\s+/, '');\\n                        if (agent.isFontInstalled(selectedFont)) {\\n                            break;\\n                        }\\n                    }\\n\\n                    $fontname.find('.note-current-fontname').text(selectedFont);\\n                    checkDropdownMenu($fontname, selectedFont);\\n\\n                }\\n            }\\n\\n            // fontsize\\n            var $fontsize = $container.find('.note-fontsize[data-name=fontsize]');\\n            $fontsize.find('.note-current-fontsize').text(styleInfo['font-size']);\\n            checkDropdownMenu($fontsize, parseFloat(styleInfo['font-size']));\\n\\n            // lineheight\\n            var $lineHeight = $container.find('.note-height[data-name=lineheight]');\\n            checkDropdownMenu($lineHeight, parseFloat(styleInfo['line-height']));\\n\\n            btnState('.btn[data-event=\\\"bold\\\"]', function() {\\n                return styleInfo['font-bold'] === 'bold';\\n            });\\n            btnState('.btn[data-event=\\\"italic\\\"]', function() {\\n                return styleInfo['font-italic'] === 'italic';\\n            });\\n            btnState('.btn[data-event=\\\"underline\\\"]', function() {\\n                return styleInfo['font-underline'] === 'underline';\\n            });\\n            btnState('.btn[data-event=\\\"strikethrough\\\"]', function() {\\n                return styleInfo['font-strikethrough'] === 'strikethrough';\\n            });\\n            btnState('.btn[data-event=\\\"superscript\\\"]', function() {\\n                return styleInfo['font-superscript'] === 'superscript';\\n            });\\n            btnState('.btn[data-event=\\\"subscript\\\"]', function() {\\n                return styleInfo['font-subscript'] === 'subscript';\\n            });\\n            btnState('.btn[data-event=\\\"justifyLeft\\\"]', function() {\\n                return styleInfo['text-align'] === 'left' || styleInfo['text-align'] === 'start';\\n            });\\n            btnState('.btn[data-event=\\\"justifyCenter\\\"]', function() {\\n                return styleInfo['text-align'] === 'center';\\n            });\\n            btnState('.btn[data-event=\\\"justifyRight\\\"]', function() {\\n                return styleInfo['text-align'] === 'right';\\n            });\\n            btnState('.btn[data-event=\\\"justifyFull\\\"]', function() {\\n                return styleInfo['text-align'] === 'justify';\\n            });\\n            btnState('.btn[data-event=\\\"insertUnorderedList\\\"]', function() {\\n                return styleInfo['list-style'] === 'unordered';\\n            });\\n            btnState('.btn[data-event=\\\"insertOrderedList\\\"]', function() {\\n                return styleInfo['list-style'] === 'ordered';\\n            });\\n        };\\n\\n        /**\\n         * update recent color\\n         *\\n         * @param {Node} button\\n         * @param {String} eventName\\n         * @param {Mixed} value\\n         */\\n        this.updateRecentColor = function(button, eventName, value) {\\n            var $color = $(button).closest('.note-color');\\n            var $recentColor = $color.find('.note-recent-color');\\n            var colorInfo = JSON.parse($recentColor.attr('data-value'));\\n            var sKey = eventName === 'backColor' ? 'background-color' : 'color';\\n\\n            colorInfo[eventName] = value;\\n            $recentColor.attr('data-value', JSON.stringify(colorInfo));\\n            $recentColor.css(sK\";\n  builder.string += \"ey, value);\\n        };\\n    };\\n\\n    /**\\n     * @class module.Toolbar\\n     *\\n     * Toolbar\\n     */\\n    var Toolbar = function() {\\n        var button = new Button();\\n\\n        this.update = function($toolbar, styleInfo) {\\n            button.update($toolbar, styleInfo);\\n        };\\n\\n        /**\\n         * @param {Node} button\\n         * @param {String} eventName\\n         * @param {String} value\\n         */\\n        this.updateRecentColor = function(buttonNode, eventName, value) {\\n            button.updateRecentColor(buttonNode, eventName, value);\\n        };\\n\\n        /**\\n         * activate buttons exclude codeview\\n         * @param {jQuery} $toolbar\\n         */\\n        this.activate = function($toolbar) {\\n            $toolbar.find('button, .btn')\\n                .not('.btn[data-event=\\\"codeview\\\"]')\\n                .removeClass('disabled');\\n        };\\n\\n        /**\\n         * deactivate buttons exclude codeview\\n         * @param {jQuery} $toolbar\\n         */\\n        this.deactivate = function($toolbar) {\\n            $toolbar.find('button, .btn')\\n                .not('.btn[data-event=\\\"codeview\\\"]')\\n                .addClass('disabled');\\n        };\\n\\n        /**\\n         * @param {jQuery} $container\\n         * @param {Boolean} [bFullscreen=false]\\n         */\\n        this.updateFullscreen = function($container, bFullscreen) {\\n            var $btn = $container.find('.btn[data-event=\\\"fullscreen\\\"]');\\n            $btn.toggleClass('active', bFullscreen);\\n        };\\n\\n        /**\\n         * @param {jQuery} $container\\n         * @param {Boolean} [isCodeview=false]\\n         */\\n        this.updateCodeview = function($container, isCodeview) {\\n            var $btn = $container.find('.btn[data-event=\\\"codeview\\\"]');\\n            $btn.toggleClass('active', isCodeview);\\n\\n            if (isCodeview) {\\n                this.deactivate($container);\\n            } else {\\n                this.activate($container);\\n            }\\n        };\\n\\n        /**\\n         * get button in toolbar\\n         *\\n         * @param {jQuery} $editable\\n         * @param {String} name\\n         * @return {jQuery}\\n         */\\n        this.get = function($editable, name) {\\n            var $toolbar = dom.makeLayoutInfo($editable).toolbar();\\n\\n            return $toolbar.find('[data-name=' + name + ']');\\n        };\\n\\n        /**\\n         * set button state\\n         * @param {jQuery} $editable\\n         * @param {String} name\\n         * @param {Boolean} [isActive=true]\\n         */\\n        this.setButtonState = function($editable, name, isActive) {\\n            isActive = (isActive === false) ? false : true;\\n\\n            var $button = this.get($editable, name);\\n            $button.toggleClass('active', isActive);\\n        };\\n    };\\n\\n    var EDITABLE_PADDING = 24;\\n\\n    var Statusbar = function() {\\n        var $document = $(document);\\n\\n        this.attach = function(layoutInfo, options) {\\n            if (!options.disableResizeEditor) {\\n                layoutInfo.statusbar().on('mousedown', hStatusbarMousedown);\\n            }\\n        };\\n\\n        /**\\n         * `mousedown` event handler on statusbar\\n         *\\n         * @param {MouseEvent} event\\n         */\\n        var hStatusbarMousedown = function(event) {\\n            event.preventDefault();\\n            event.stopPropagation();\\n\\n            var $editable = dom.makeLayoutInfo(event.target).editable();\\n            var editableTop = $editable.offset().top - $document.scrollTop();\\n\\n            var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n            var options = layoutInfo.editor().data('options');\\n\\n            $document.on('mousemove', function(event) {\\n                var nHeight = event.clientY - (editableTop + EDITABLE_PADDING);\\n\\n                nHeight = (options.minHeight > 0) ? Math.max(nHeight, options.minHeight) : nHeight;\\n                nHeight = (options.maxHeight > 0) ? Math.min(nHeight, options.maxHeight) : nHeight;\\n\\n                $editable.height(nHeight);\\n            }).one('mouseup', function() {\\n                $document.off('mousemove');\\n            });\\n        };\\n    };\\n\\n    /**\\n     * @class module.Popover\\n     *\\n     * Popover (http://getbootstrap.com/javascript/#popovers)\\n     *\\n     */\\n    var Popover = function() {\\n        var button = new Button();\\n\\n        /**\\n         * returns position from placeholder\\n         *\\n         * @private\\n         * @param {Node} placeholder\\n         * @param {Boolean} isAirMode\\n         * @return {Object}\\n         * @return {Number} return.left\\n         * @return {Number} return.top\\n         */\\n        var posFromPlaceholder = function(placeholder, isAirMode) {\\n            var $placeholder = $(placeholder);\\n            var pos = isAirMode ? $placeholder.offset() : $placeholder.position();\\n            var height = $placeholder.outerHeight(true); // include margin\\n\\n            // popover below placeholder.\\n            return {\\n                left: pos.left,\\n                top: pos.top + height\\n            };\\n        };\\n\\n        /**\\n         * show popover\\n         *\\n         * @private\\n         * @param {jQuery} popover\\n         * @param {Position} pos\\n         */\\n        var showPopover = function($popover, pos) {\\n            $popover.css({\\n                display: 'block',\\n                left: pos.left,\\n                top: pos.top\\n            });\\n        };\\n\\n        var PX_POPOVER_ARROW_OFFSET_X = 20;\\n\\n        /**\\n         * update current state\\n         * @param {jQuery} $popover - popover container\\n         * @param {Object} styleInfo - style object\\n         * @param {Boolean} isAirMode\\n         */\\n        this.update = function($popover, styleInfo, isAirMode) {\\n            button.update($popover, styleInfo);\\n\\n            var $linkPopover = $popover.find('.note-link-popover');\\n            if (styleInfo.anchor) {\\n                var $anchor = $linkPopover.find('a');\\n                var href = $(styleInfo.anchor).attr('href');\\n                var target = $(styleInfo.anchor).attr('target');\\n                $anchor.attr('href', href).html(href);\\n                if (!target) {\\n                    $anchor.removeAttr('target');\\n                } else {\\n                    $anchor.attr('target', '_blank');\\n                }\\n                showPopover($linkPopover, posFromPlaceholder(styleInfo.anchor, isAirMode));\\n            } else {\\n                $linkPopover.hide();\\n            }\\n\\n            var $imagePopover = $popover.find('.note-image-popover');\\n            if (styleInfo.image) {\\n                showPopover($imagePopover, posFromPlaceholder(styleInfo.image, isAirMode));\\n            } else {\\n                $imagePopover.hide();\\n            }\\n\\n            var $airPopover = $popover.find('.note-air-popover');\\n            if (isAirMode && !styleInfo.range.isCollapsed()) {\\n                var rect = list.last(styleInfo.range.getClientRects());\\n                if (rect) {\\n                    var bnd = func.rect2bnd(rect);\\n                    showPopover($airPopover, {\\n                        left: Math.max(bnd.left + bnd.width / 2 - PX_POPOVER_ARROW_OFFSET_X, 0),\\n                        top: bnd.top + bnd.height\\n                    });\\n                }\\n            } else {\\n                $airPopover.hide();\\n            }\\n        };\\n\\n        /**\\n         * @param {Node} button\\n         * @param {String} eventName\\n         * @param {String} value\\n         */\\n        this.updateRecentColor = function(button, eventName, value) {\\n            button.updateRecentColor(button, eventName, value);\\n        };\\n\\n        /**\\n         * hide all popovers\\n         * @param {jQuery} $popover - popover container\\n         */\\n        this.hide = function($popover) {\\n            $popover.children().hide();\\n        };\\n    };\\n\\n    /**\\n     * @class module.Handle\\n     *\\n     * Handle\\n     */\\n    var Handle = function(handler) {\\n        var $document = $(document);\\n\\n        /**\\n         * `mousedown` event handler on $handle\\n         *  - controlSizing: resize image\\n         *\\n         * @param {MouseEvent} event\\n         */\\n        var hHandleMousedown = function(event) {\\n            if (dom.isControlSizing(event.target)) {\\n                event.preventDefault();\\n                event.stopPropagation();\\n\\n                var layoutInfo = dom.makeLayoutInfo(event.target),\\n                    $handle = layoutInfo.handle(),\\n                    $popover = layoutInfo.popover(),\\n                    $editable = layoutInfo.editable(),\\n                    $editor = layoutInfo.editor();\\n\\n                var target = $handle.find('.note-control-selection').data('target'),\\n                    $target = $(target), posStart = $target.offset(),\\n                    scrollTop = $document.scrollTop();\\n\\n                var isAirMode = $editor.data('options').airMode;\\n\\n                $document.on('mousemove', function(event) {\\n                    handler.invoke('editor.resizeTo', {\\n                        x: event.clientX - posStart.left,\\n                        y: event.clientY - (posStart.top - scrollTop)\\n                    }, $target, !event.shiftKey);\\n\\n                    handler.invoke('handle.update', $handle, {image: target}, isAirMode);\\n                    handler.invoke('popover.update', $popover, {image: target}, isAirMode);\\n                }).one('mouseup', function() {\\n                    $document.off('mousemove');\\n                    handler.invoke('editor.afterCommand', $editable);\\n                });\\n\\n                if (!$target.data('ratio')) { // original ratio.\\n                    $target.data('ratio', $target.height() / $target.width());\\n                }\\n            }\\n        };\\n\\n        this.attach = function(layoutInfo) {\\n            layoutInfo.handle().on('mousedown', hHandleMousedown);\\n        };\\n\\n        /**\\n         * update handle\\n         * @param {jQuery} $handle\\n         * @param {Object} styleInfo\\n         * @param {Boolean} isAirMode\\n         */\\n        this.update = function($handle, styleInfo, isAirMode) {\\n            var $selection = $handle.find('.note-control-selection');\\n            if (styleInfo.image) {\\n                var $image = $(styleInfo.image);\\n                var pos = isAirMode ? $image.offset() : $image.position();\\n\\n                // include margin\\n                var imageSize = {\\n                    w: $image.outerWidth(true),\\n                    h: $image.outerHeight(true)\\n                };\\n\\n                $selection.css({\\n                    display: 'block',\\n                    left: pos.left,\\n                    top: pos.top,\\n                    width: imageSize.w,\\n                    height: imageSize.h\\n                }).data('target', styleInfo.image); // save current image element.\\n                var sizingText = imageSize.w + 'x' + imageSize.h;\\n                $selection.find('.note-control-selection-info').text(sizingText);\\n            } else {\\n                $selection.hide();\\n            }\\n        };\\n\\n        /**\\n         * hide\\n         *\\n         * @param {jQuery} $handle\\n         */\\n        this.hide = function($handle) {\\n            $handle.children().hide();\\n        };\\n    };\\n\\n    var Fullscreen = function(handler) {\\n        var $window = $(window);\\n        var $scrollbar = $('html, body');\\n\\n        /**\\n         * toggle fullscreen\\n         *\\n         * @param {Object} layoutInfo\\n         */\\n        this.toggle = function(layoutInfo) {\\n\\n            var $editor = layoutInfo.editor(),\\n                $toolbar = layoutInfo.toolbar(),\\n                $editable = layoutInfo.editable(),\\n                $codable = layoutInfo.codable();\\n\\n            var resize = function(size) {\\n                $editable.css('height', size.h);\\n                $codable.css('height', size.h);\\n                if ($codable.data('cmeditor')) {\\n                    $codable.data('cmeditor').setsize(null, size.h);\\n                }\\n            };\\n\\n            $editor.toggleClass('fullscreen');\\n            var isFullscreen = $editor.hasClass('fullscreen');\\n            if (isFullscreen) {\\n\\n                $editable.data('orgheight', $editable.css('height'));\\n\\n                $window.on('resize', function() {\\n                    resize({\\n                        h: $window.height() - $toolbar.outerHeight()\\n                    });\\n                }).trigger('resize');\\n\\n                $scrollbar.css('overflow', 'hidden');\\n                $toolbar.css('top', 0);\\n            } else {\\n                $window.off('resize');\\n                resize({\\n                    h: $editable.data('orgheight')\\n                });\\n                $scrollbar.css('overflow', 'visible');\\n            }\\n\\n            handler.invoke('toolbar.updateFullscreen', $toolbar, isFullscreen);\\n        };\\n    };\\n\\n\\n    var CodeMirror;\\n    if (agent.hasCodeMirror) {\\n        if (agent.isSupportAmd) {\\n            require(['CodeMirror'], function(cm) {\\n                CodeMirror = cm;\\n            });\\n        } else {\\n            CodeMirror = window.CodeMirror;\\n        }\\n    }\\n\\n    /**\\n     * @class Codeview\\n     */\\n    var Codeview = function(handler) {\\n\\n        this.sync = function(layoutInfo) {\\n            var isCodeview = handler.invoke('codeview.isActivated', layoutInfo);\\n            if (isCodeview && agent.hasCodeMirror) {\\n                layoutInfo.codable().data('cmEditor').save();\\n            }\\n        };\\n\\n        /**\\n         * @param {Object} layoutInfo\\n         * @return {Boolean}\\n         */\\n        this.isActivated = function(layoutInfo) {\\n            var $editor = layoutInfo.editor();\\n            return $editor.hasClass('codeview');\\n        };\\n\\n        /**\\n         * toggle codeview\\n         *\\n         * @param {Object} layoutInfo\\n         */\\n        this.toggle = function(layoutInfo) {\\n            if (this.isActivated(layoutInfo)) {\\n                this.deactivate(layoutInfo);\\n            } else {\\n                this.activate(layoutInfo);\\n            }\\n        };\\n\\n        //var originalValue;\\n        /**\\n         * activate code view\\n         *\\n         * @param {Object} layoutInfo\\n         */\\n        this.activate = function(layoutInfo) {\\n            var $editor = layoutInfo.editor(),\\n                $toolbar = layoutInfo.toolbar(),\\n                $editable = layoutInfo.editable(),\\n                $codable = layoutInfo.codable(),\\n                $popover = layoutInfo.popover(),\\n                $handle = layoutInfo.handle();\\n\\n            var options = $editor.data('options');\\n            var codeString = dom.html($editable, false);\\n\\n            // >>>>>>> CK indentation function\\n            function beautifyHTML(code, level, insideLastBlock, dictionary) {\\n                var openTag = code.indexOf('<');\\n                var closeTag = code.indexOf('>');\\n                var chunk;\\n\\n                if (openTag === 0) {\\n                    //first thing is a tag\\n                    chunk = code.substring(0, closeTag + 1);\\n                    code = code.substring(closeTag + 1);\\n\\n                    if (chunk.indexOf(\\\"<\\/\\\") === 0) {\\n                        level--;\\n                        nsideLastBlock = false;\\n                    } else {\\n                        if (insideLastBlock) {\\n                            level++;\\n                        }\\n\\n                        //check if current tag is a self closing tag (no indent next line in this case)\\n                        var found = false;\\n\\n                        for (var i = 0; i < dictionary.length; i++) {\\n                            if (chunk.indexOf(dictionary[i]) === 0) {\\n                                found = true;\\n                                break;\\n                            }\\n                        }\\n                        if (!found) {\\n                            insideLastBlock = true;\\n                        } else {\\n                            insideLastBlock = false;\\n                        }\\n                    }\\n                } else {\\n                    //first thing is content\\n                    chunk = code.substring(0, openTag);\\n                    code = code.substring(openTag);\\n\\n                    if (insideLastBlock) {\\n                        level++;\\n                    }\\n                    insideLastBlock = false;\\n                }\\n                chunk = new Array(level + 1).join('    ') + chunk.trim();\\n\\n                if (code.length === 0) {\\n                    return chunk;\\n                }\\n                return chunk + \\\"\\\\n\\\" + beautify\";\n  builder.string += \"HTML(code.trim(), level, insideLastBlock, dictionary);\\n            }\\n\\n            //originalValue = codeString;\\n\\n            var selfCloseTags = ['<img', '<br', '<hr'];\\n            codeString = beautifyHTML(codeString, 0, false, selfCloseTags);\\n            // CK end -----------------------\\n\\n            $codable.val(codeString);\\n\\n            var buttonHeight = $toolbar.find('.btn[data-event=codeview]').height();\\n            var areaHeight = $(window).height() - buttonHeight;\\n            $codable.height($editable.height());\\n\\n            handler.invoke('toolbar.updateCodeview', $toolbar, true);\\n            handler.invoke('popover.hide', $popover);\\n            handler.invoke('handle.hide', $handle);\\n\\n            $editor.addClass('codeview');\\n\\n            $codable.focus();\\n\\n            // activate CodeMirror as codable\\n            if (agent.hasCodeMirror) {\\n                var cmEditor = CodeMirror.fromTextArea($codable[0], options.codemirror);\\n\\n                // CodeMirror TernServer\\n                if (options.codemirror.tern) {\\n                    var server = new CodeMirror.TernServer(options.codemirror.tern);\\n                    cmEditor.ternServer = server;\\n                    cmEditor.on('cursorActivity', function(cm) {\\n                        server.updateArgHints(cm);\\n                    });\\n                }\\n\\n                // CodeMirror hasn't Padding.\\n                if ($editor.hasClass('fullscreen')) {\\n                    cmEditor.setSize(null, areaHeight);\\n                }\\n                else {\\n                    cmEditor.setSize(null, $editable.outerHeight());\\n                }\\n\\n                $codable.data('cmEditor', cmEditor);\\n            }\\n        };\\n\\n        /**\\n         * deactivate code view\\n         *\\n         * @param {Object} layoutInfo\\n         */\\n        this.deactivate = function(layoutInfo) {\\n            var $holder = layoutInfo.holder(),\\n                $editor = layoutInfo.editor(),\\n                $toolbar = layoutInfo.toolbar(),\\n                $editable = layoutInfo.editable(),\\n                $codable = layoutInfo.codable();\\n\\n            var options = $editor.data('options');\\n\\n            // deactivate CodeMirror as codable\\n            if (agent.hasCodeMirror) {\\n                var cmEditor = $codable.data('cmEditor');\\n                $codable.val(cmEditor.getValue());\\n                cmEditor.toTextArea();\\n            }\\n\\n            var value = dom.value($codable, options.prettifyHtml) || dom.emptyPara;\\n            //var value = originalValue;\\n            var isChange = $editable.html() !== value;\\n\\n            $editable.html(value);\\n            $editable.height(options.height ? $codable.height() : 'auto');\\n            $editor.removeClass('codeview');\\n\\n            if (isChange) {\\n                handler.bindCustomEvent(\\n                    $holder, $editable.data('callbacks'), 'change'\\n                )($editable.html(), $editable);\\n            }\\n\\n            $editable.focus();\\n\\n            handler.invoke('toolbar.updateCodeview', $toolbar, false);\\n        };\\n    };\\n\\n    var DragAndDrop = function(handler) {\\n        var $document = $(document);\\n\\n        /**\\n         * attach Drag and Drop Events\\n         *\\n         * @param {Object} layoutInfo - layout Informations\\n         * @param {Object} options\\n         */\\n        this.attach = function(layoutInfo, options) {\\n            if (options.airMode || options.disableDragAndDrop) {\\n                // prevent default drop event\\n                $document.on('drop', function(e) {\\n                    e.preventDefault();\\n                });\\n            } else {\\n                this.attachDragAndDropEvent(layoutInfo, options);\\n            }\\n        };\\n\\n        /**\\n         * attach Drag and Drop Events\\n         *\\n         * @param {Object} layoutInfo - layout Informations\\n         * @param {Object} options\\n         */\\n        this.attachDragAndDropEvent = function(layoutInfo, options) {\\n            var collection = $(),\\n                $editor = layoutInfo.editor(),\\n                $dropzone = layoutInfo.dropzone(),\\n                $dropzoneMessage = $dropzone.find('.note-dropzone-message');\\n\\n            // show dropzone on dragenter when dragging a object to document\\n            // -but only if the editor is visible, i.e. has a positive width and height\\n            $document.on('dragenter', function(e) {\\n                var isCodeview = handler.invoke('codeview.isActivated', layoutInfo);\\n                var hasEditorSize = $editor.width() > 0 && $editor.height() > 0;\\n                if (!isCodeview && !collection.length && hasEditorSize) {\\n                    $editor.addClass('dragover');\\n                    $dropzone.width($editor.width());\\n                    $dropzone.height($editor.height());\\n                    $dropzoneMessage.text(options.langInfo.image.dragImageHere);\\n                }\\n                collection = collection.add(e.target);\\n            }).on('dragleave', function(e) {\\n                collection = collection.not(e.target);\\n                if (!collection.length) {\\n                    $editor.removeClass('dragover');\\n                }\\n            }).on('drop', function() {\\n                collection = $();\\n                $editor.removeClass('dragover');\\n            });\\n\\n            // change dropzone's message on hover.\\n            $dropzone.on('dragenter', function() {\\n                $dropzone.addClass('hover');\\n                $dropzoneMessage.text(options.langInfo.image.dropImage);\\n            }).on('dragleave', function() {\\n                $dropzone.removeClass('hover');\\n                $dropzoneMessage.text(options.langInfo.image.dragImageHere);\\n            });\\n\\n            // attach dropImage\\n            $dropzone.on('drop', function(event) {\\n\\n                var dataTransfer = event.originalEvent.dataTransfer;\\n                var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n\\n                if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {\\n                    event.preventDefault();\\n                    layoutInfo.editable().focus();\\n                    handler.insertImages(layoutInfo, dataTransfer.files);\\n                } else {\\n                    var insertNodefunc = function() {\\n                        layoutInfo.holder().materialnote('insertNode', this);\\n                    };\\n\\n                    for (var i = 0, len = dataTransfer.types.length; i < len; i++) {\\n                        var type = dataTransfer.types[i];\\n                        var content = dataTransfer.getData(type);\\n\\n                        if (type.toLowerCase().indexOf('text') > -1) {\\n                            layoutInfo.holder().materialnote('pasteHTML', content);\\n                        } else {\\n                            $(content).each(insertNodefunc);\\n                        }\\n                    }\\n                }\\n            }).on('dragover', false); // prevent default dragover event\\n        };\\n    };\\n\\n    var Clipboard = function(handler) {\\n\\n        var $paste;\\n\\n        this.attach = function(layoutInfo) {\\n\\n            if (window.clipboardData || agent.isFF) {\\n                $paste = $('<div />').attr('contenteditable', true).css({\\n                    position : 'absolute',\\n                    left : -100000,\\n                    'opacity' : 0\\n                });\\n                layoutInfo.editable().after($paste);\\n                $paste.one('paste', hPasteClipboardImage);\\n\\n                layoutInfo.editable().on('keydown', function(e) {\\n                    if (e.ctrlKey && e.keyCode === 86) {  // CTRL+V\\n                        handler.invoke('saveRange', layoutInfo.editable());\\n                        if ($paste) {\\n                            $paste.focus();\\n                        }\\n                    }\\n                });\\n            }\\n\\n            layoutInfo.editable().on('paste', hPasteClipboardImage);\\n        };\\n\\n        /**\\n         * paste clipboard image\\n         *\\n         * @param {Event} event\\n         */\\n        var hPasteClipboardImage = function(event) {\\n\\n            var clipboardData = event.originalEvent.clipboardData;\\n            var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n            var $editable = layoutInfo.editable();\\n\\n            if (!clipboardData || !clipboardData.items || !clipboardData.items.length) {\\n\\n                var callbacks = $editable.data('callbacks');\\n                // only can run if it has onImageUpload method\\n                if (!callbacks.onImageUpload) {\\n                    return;\\n                }\\n\\n                setTimeout(function() {\\n                    if (!$paste) {\\n                        return;\\n                    }\\n\\n                    var imgNode = $paste[0].firstChild;\\n                    if (!imgNode) {\\n                        return;\\n                    }\\n\\n                    handler.invoke('restoreRange', $editable);\\n                    if (!dom.isImg(imgNode)) {\\n                        handler.invoke('pasteHTML', $editable, $paste.html());\\n                    } else {\\n                        var datauri = imgNode.src;\\n\\n                        var data = atob(datauri.split(',')[1]);\\n                        var array = new Uint8Array(data.length);\\n                        for (var i = 0; i < data.length; i++) {\\n                            array[i] = data.charCodeAt(i);\\n                        }\\n\\n                        var blob = new Blob([array], { type : 'image/png' });\\n                        blob.name = 'clipboard.png';\\n                        handler.invoke('focus', $editable);\\n                        handler.insertImages(layoutInfo, [blob]);\\n                    }\\n\\n                    $paste.remove();\\n\\n                }, 0);\\n\\n                return;\\n            }\\n\\n            var item = list.head(clipboardData.items);\\n            var isClipboardImage = item.kind === 'file' && item.type.indexOf('image/') !== -1;\\n\\n            if (isClipboardImage) {\\n                handler.insertImages(layoutInfo, [item.getAsFile()]);\\n            }\\n\\n            handler.invoke('editor.afterCommand', $editable);\\n        };\\n    };\\n\\n    var LinkDialog = function(handler) {\\n\\n        /**\\n         * toggle button status\\n         *\\n         * @private\\n         * @param {jQuery} $btn\\n         * @param {Boolean} isEnable\\n         */\\n        var toggleBtn = function($btn, isEnable) {\\n            $btn.toggleClass('disabled', !isEnable);\\n            $btn.attr('disabled', !isEnable);\\n        };\\n\\n        /**\\n         * bind enter key\\n         *\\n         * @private\\n         * @param {jQuery} $input\\n         * @param {jQuery} $btn\\n         */\\n        var bindEnterKey = function($input, $btn) {\\n            $input.on('keypress', function(event) {\\n                if (event.keyCode === key.code.ENTER) {\\n                    $btn.trigger('click');\\n                }\\n            });\\n        };\\n\\n        /**\\n         * Show link dialog and set event handlers on dialog controls.\\n         *\\n         * @param {jQuery} $editable\\n         * @param {jQuery} $dialog\\n         * @param {Object} linkInfo\\n         * @return {Promise}\\n         */\\n        this.showLinkDialog = function($editable, $dialog, linkInfo) {\\n            return $.Deferred(function(deferred) {\\n                var $linkDialog = $dialog.find('.note-link-dialog');\\n                var $linkText = $linkDialog.find('.note-link-text'),\\n                    $linkTextLabel = $linkText.next('label'),\\n                    $linkUrl = $linkDialog.find('.note-link-url'),\\n                    $linkBtn = $linkDialog.find('.note-link-btn'),\\n                    $closeBtn = $linkDialog.find('.btnClose');\\n                var $openInNewWindow = $linkDialog.find('input[type=checkbox]');\\n\\n                $linkDialog.openModal();\\n                $linkText.val(linkInfo.text);\\n                if (linkInfo.text.length > 0) $linkTextLabel.addClass('active');\\n\\n                $linkText.on('keyup', function() {\\n                    toggleBtn($linkBtn, $linkText.val() && $linkUrl.val());\\n                    // if linktext was modified by keyup,\\n                    // stop cloning text from linkUrl\\n                    linkInfo.text = $linkText.val();\\n                });\\n\\n                $closeBtn.click(function(event) {\\n                    event.preventDefault();\\n\\n                    $linkDialog.closeModal();\\n                });\\n\\n                // if no url was given, copy text to url\\n                if (!linkInfo.url) {\\n                    linkInfo.url = linkInfo.text || 'http://';\\n                    toggleBtn($linkBtn, linkInfo.text);\\n                }\\n\\n                $linkUrl.on('keyup', function() {\\n                    toggleBtn($linkBtn, $linkText.val() && $linkUrl.val());\\n                    // display same link on `Text to display` input\\n                    // when create a new link\\n                    if (!linkInfo.text) {\\n                        $linkTextLabel.addClass('active');\\n                        $linkText.val($linkUrl.val());\\n                    }\\n                }).val(linkInfo.url).trigger('focus').trigger('select');\\n\\n                bindEnterKey($linkUrl, $linkBtn);\\n                bindEnterKey($linkText, $linkBtn);\\n\\n                $openInNewWindow.prop('checked', linkInfo.newWindow);\\n\\n                $linkBtn.one('click', function(event) {\\n                    event.preventDefault();\\n\\n                    deferred.resolve({\\n                        range: linkInfo.range,\\n                        url: $linkUrl.val(),\\n                        text: $linkText.val(),\\n                        newWindow: $openInNewWindow.is(':checked')\\n                    });\\n\\n                    $('.note-link-text').val('');\\n                    $('.note-link-text').next('label').removeClass('active');\\n                    $('.note-link-url').val('');\\n                    $linkDialog.closeModal();\\n                });\\n            }).promise();\\n        };\\n\\n        /**\\n         * @param {Object} layoutInfo\\n         */\\n        this.show = function(layoutInfo) {\\n            var $editor = layoutInfo.editor(),\\n                $dialog = layoutInfo.dialog(),\\n                $editable = layoutInfo.editable(),\\n                $popover = layoutInfo.popover(),\\n                linkInfo = handler.invoke('editor.getLinkInfo', $editable);\\n\\n            var options = $editor.data('options');\\n\\n            handler.invoke('editor.saveRange', $editable);\\n            this.showLinkDialog($editable, $dialog, linkInfo).then(function(linkInfo) {\\n                handler.invoke('editor.restoreRange', $editable);\\n                handler.invoke('editor.createLink', $editable, linkInfo, options);\\n                // hide popover after creating link\\n                handler.invoke('popover.hide', $popover);\\n            }).fail(function() {\\n                handler.invoke('editor.restoreRange', $editable);\\n            });\\n        };\\n    };\\n\\n    var ImageDialog = function(handler) {\\n        /**\\n         * toggle button status\\n         *\\n         * @private\\n         * @param {jQuery} $btn\\n         * @param {Boolean} isEnable\\n         */\\n        var toggleBtn = function($btn, isEnable) {\\n            $btn.toggleClass('disabled', !isEnable);\\n            $btn.attr('disabled', !isEnable);\\n        };\\n\\n        /**\\n         * bind enter key\\n         *\\n         * @private\\n         * @param {jQuery} $input\\n         * @param {jQuery} $btn\\n         */\\n        var bindEnterKey = function($input, $btn) {\\n            $input.on('keypress', function(event) {\\n                if (event.keyCode === key.code.ENTER) {\\n                    $btn.trigger('click');\\n                }\\n            });\\n        };\\n\\n        this.show = function(layoutInfo) {\\n            var $dialog = layoutInfo.dialog(),\\n                $editable = layoutInfo.editable();\\n\\n            handler.invoke('editor.saveRange', $editable);\\n            this.showImageDialog($editable, $dialog).then(function(data) {\\n                handler.invoke('editor.restoreRange', $editable);\\n\\n                if (typeof data === 'string') {\\n                    // image url\\n                    handler.invoke('editor.insertImage', $editable, data);\\n                } else {\\n                    // array of files\\n                    handler.insertImages(layoutInfo, data);\\n                }\\n            }).fail(function() {\\n                handler.invoke('editor.restoreRange', $\";\n  builder.string += \"editable);\\n            });\\n        };\\n\\n        /**\\n         * show image dialog\\n         *\\n         * @param {jQuery} $editable\\n         * @param {jQuery} $dialog\\n         * @return {Promise}\\n         */\\n        this.showImageDialog = function($editable, $dialog) {\\n            return $.Deferred(function(deferred) {\\n                var $imageDialog = $dialog.find('.note-image-dialog');\\n                var $imageInput = $dialog.find('.note-image-input'),\\n                    $imageUrl = $dialog.find('.note-image-url'),\\n                    $imageBtn = $dialog.find('.note-image-btn'),\\n                    $closeBtn = $imageDialog.find('.btnClose');\\n\\n                $imageDialog.openModal();\\n                // Cloning imageInput to clear element.\\n                $imageInput.replaceWith($imageInput.clone()\\n                    .on('change', function() {\\n                        deferred.resolve(this.files || this.value);\\n                        $imageUrl.val('');\\n                        $imageDialog.closeModal();\\n                        deferred.resolve();\\n                    })\\n                    .val('')\\n                );\\n\\n                $imageBtn.click(function(event) {\\n                    event.preventDefault();\\n\\n                    deferred.resolve($imageUrl.val());\\n                    $imageUrl.val('');\\n                    $imageDialog.closeModal();\\n                    deferred.resolve();\\n                });\\n\\n                $closeBtn.click(function(event) {\\n                    event.preventDefault();\\n\\n                    $imageDialog.closeModal();\\n                });\\n\\n                $imageUrl.on('keyup paste', function(event) {\\n                    var url;\\n\\n                    if (event.type === 'paste') {\\n                        url = event.originalEvent.clipboardData.getData('text');\\n                    } else {\\n                        url = $imageUrl.val();\\n                    }\\n                    toggleBtn($imageBtn, url);\\n                });\\n\\n                bindEnterKey($imageUrl, $imageBtn);\\n            });\\n        };\\n    };\\n\\n    var HelpDialog = function(handler) {\\n        /**\\n         * show help dialog\\n         *\\n         * @param {jQuery} $editable\\n         * @param {jQuery} $dialog\\n         * @return {Promise}\\n         */\\n        this.showHelpDialog = function($editable, $dialog) {\\n            return $.Deferred(function(deferred) {\\n                var $helpDialog = $dialog.find('.note-help-dialog');\\n\\n                $helpDialog.openModal();\\n                deferred.resolve();\\n            }).promise();\\n        };\\n\\n        /**\\n         * @param {Object} layoutInfo\\n         */\\n        this.show = function(layoutInfo) {\\n            var $dialog = layoutInfo.dialog(),\\n                $editable = layoutInfo.editable();\\n\\n            handler.invoke('editor.saveRange', $editable, true);\\n            this.showHelpDialog($editable, $dialog).then(function() {\\n                handler.invoke('editor.restoreRange', $editable);\\n            });\\n        };\\n    };\\n\\n\\n    /**\\n     * @class EventHandler\\n     *\\n     * EventHandler\\n     *  - TODO: new instance per a editor\\n     */\\n    var EventHandler = function() {\\n        /**\\n         * Modules\\n         */\\n        var modules = this.modules = {\\n            editor: new Editor(this),\\n            toolbar: new Toolbar(this),\\n            statusbar: new Statusbar(this),\\n            popover: new Popover(this),\\n            handle: new Handle(this),\\n            fullscreen: new Fullscreen(this),\\n            codeview: new Codeview(this),\\n            dragAndDrop: new DragAndDrop(this),\\n            clipboard: new Clipboard(this),\\n            linkDialog: new LinkDialog(this),\\n            imageDialog: new ImageDialog(this),\\n            helpDialog: new HelpDialog(this)\\n        };\\n\\n        /**\\n         * invoke module's method\\n         *\\n         * @param {String} moduleAndMethod - ex) 'editor.redo'\\n         * @param {...*} arguments - arguments of method\\n         * @return {*}\\n         */\\n        this.invoke = function() {\\n            var moduleAndMethod = list.head(list.from(arguments));\\n            var args = list.tail(list.from(arguments));\\n\\n            var splits = moduleAndMethod.split('.');\\n            var hasSeparator = splits.length > 1;\\n            var moduleName = hasSeparator && list.head(splits);\\n            var methodName = hasSeparator ? list.last(splits) : list.head(splits);\\n\\n            var module = this.getModule(moduleName);\\n            var method = module[methodName];\\n\\n            return method && method.apply(module, args);\\n        };\\n\\n        /**\\n         * returns module\\n         *\\n         * @param {String} moduleName - name of module\\n         * @return {Module} - defaults is editor\\n         */\\n        this.getModule = function(moduleName) {\\n            return this.modules[moduleName] || this.modules.editor;\\n        };\\n\\n        /**\\n         * @param {jQuery} $holder\\n         * @param {Object} callbacks\\n         * @param {String} eventNamespace\\n         * @returns {Function}\\n         */\\n        var bindCustomEvent = this.bindCustomEvent = function($holder, callbacks, eventNamespace) {\\n            return function() {\\n                var callback = callbacks[func.namespaceToCamel(eventNamespace, 'on')];\\n                if (callback) {\\n                    callback.apply($holder[0], arguments);\\n                }\\n                return $holder.trigger('materialnote.' + eventNamespace, arguments);\\n            };\\n        };\\n\\n        /**\\n         * insert Images from file array.\\n         *\\n         * @private\\n         * @param {Object} layoutInfo\\n         * @param {File[]} files\\n         */\\n        this.insertImages = function(layoutInfo, files) {\\n            var $editor = layoutInfo.editor(),\\n                $editable = layoutInfo.editable(),\\n                $holder = layoutInfo.holder();\\n\\n            var callbacks = $editable.data('callbacks');\\n            var options = $editor.data('options');\\n\\n            // If onImageUpload options setted\\n            if (callbacks.onImageUpload) {\\n                bindCustomEvent($holder, callbacks, 'image.upload')(files);\\n                // else insert Image as dataURL\\n            } else {\\n                $.each(files, function(idx, file) {\\n                    var filename = file.name;\\n                    if (options.maximumImageFileSize && options.maximumImageFileSize < file.size) {\\n                        bindCustomEvent($holder, callbacks, 'image.upload.error')(options.langInfo.image.maximumFileSizeError);\\n                    } else {\\n                        async.readFileAsDataURL(file).then(function(sDataURL) {\\n                            modules.editor.insertImage($editable, sDataURL, filename);\\n                        }).fail(function() {\\n                            bindCustomEvent($holder, callbacks, 'image.upload.error')(options.langInfo.image.maximumFileSizeError);\\n                        });\\n                    }\\n                });\\n            }\\n        };\\n\\n        var commands = {\\n            /**\\n             * @param {Object} layoutInfo\\n             */\\n            showLinkDialog: function(layoutInfo) {\\n                modules.linkDialog.show(layoutInfo);\\n            },\\n\\n            /**\\n             * @param {Object} layoutInfo\\n             */\\n            showImageDialog: function(layoutInfo) {\\n                modules.imageDialog.show(layoutInfo);\\n            },\\n\\n            /**\\n             * @param {Object} layoutInfo\\n             */\\n            showHelpDialog: function(layoutInfo) {\\n                modules.helpDialog.show(layoutInfo);\\n            },\\n\\n            /**\\n             * @param {Object} layoutInfo\\n             */\\n            fullscreen: function(layoutInfo) {\\n                modules.fullscreen.toggle(layoutInfo);\\n            },\\n\\n            /**\\n             * @param {Object} layoutInfo\\n             */\\n            codeview: function(layoutInfo) {\\n                modules.codeview.toggle(layoutInfo);\\n            }\\n        };\\n\\n        var hMousedown = function(event) {\\n            //preventDefault Selection for FF, IE8+\\n            if (dom.isImg(event.target)) {\\n                event.preventDefault();\\n            }\\n        };\\n\\n        var hKeyupAndMouseup = function(event) {\\n            var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n            modules.editor.removeBogus(layoutInfo.editable());\\n            hToolbarAndPopoverUpdate(event);\\n        };\\n\\n        var hToolbarAndPopoverUpdate = function(event) {\\n            // delay for range after mouseup\\n            setTimeout(function() {\\n                var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n                var styleInfo = modules.editor.currentStyle(event.target);\\n                if (!styleInfo) { return; }\\n\\n                var isAirMode = layoutInfo.editor().data('options').airMode;\\n                if (!isAirMode) {\\n                    modules.toolbar.update(layoutInfo.toolbar(), styleInfo);\\n                }\\n\\n                modules.popover.update(layoutInfo.popover(), styleInfo, isAirMode);\\n                modules.handle.update(layoutInfo.handle(), styleInfo, isAirMode);\\n            }, 0);\\n        };\\n\\n        var hScroll = function(event) {\\n            var layoutInfo = dom.makeLayoutInfo(event.currentTarget || event.target);\\n            //hide popover and handle when scrolled\\n            modules.popover.hide(layoutInfo.popover());\\n            modules.handle.hide(layoutInfo.handle());\\n        };\\n\\n        var hToolbarAndPopoverMousedown = function(event) {\\n            // prevent default event when insertTable (FF, Webkit)\\n            var $btn = $(event.target).closest('[data-event]');\\n            if ($btn.length) {\\n                event.preventDefault();\\n            }\\n        };\\n\\n        var hToolbarAndPopoverClick = function(event) {\\n            var $btn = $(event.target).closest('[data-event]');\\n\\n            if ($btn.length) {\\n                var eventName = $btn.attr('data-event'),\\n                    value = $btn.attr('data-value'),\\n                    hide = $btn.attr('data-hide');\\n\\n                var layoutInfo = dom.makeLayoutInfo(event.target);\\n\\n                // before command: detect control selection element($target)\\n                var $target;\\n                if ($.inArray(eventName, ['resize', 'floatMe', 'removeMedia', 'imageShape', 'imageClass']) !== -1) {\\n                    var $selection = layoutInfo.handle().find('.note-control-selection');\\n                    $target = $($selection.data('target'));\\n                }\\n\\n                // If requested, hide the popover when the button is clicked.\\n                // Useful for things like showHelpDialog.\\n                if (hide) {\\n                    $btn.parents('.popover').hide();\\n                }\\n\\n                if ($.isFunction($.materialnote.pluginEvents[eventName])) {\\n                    $.materialnote.pluginEvents[eventName](event, modules.editor, layoutInfo, value);\\n                } else if (modules.editor[eventName]) { // on command\\n                    var $editable = layoutInfo.editable();\\n                    $editable.focus();\\n                    modules.editor[eventName]($editable, value, $target);\\n                    event.preventDefault();\\n                } else if (commands[eventName]) {\\n                    commands[eventName].call(this, layoutInfo);\\n                    event.preventDefault();\\n                }\\n\\n                // after command\\n                if ($.inArray(eventName, ['backColor', 'foreColor']) !== -1) {\\n                    var options = layoutInfo.editor().data('options', options);\\n                    var module = options.airMode ? modules.popover : modules.toolbar;\\n                    module.updateRecentColor(list.head($btn), eventName, value);\\n                }\\n\\n                hToolbarAndPopoverUpdate(event);\\n            }\\n        };\\n\\n        var gridUnit = 26;\\n        var hDimensionPickerMove = function(event, options) {\\n            var $picker = $(event.target.parentNode); // target is mousecatcher\\n            var $dropdown = $picker.parent();\\n            var $dimensionDisplay = $picker.next();\\n            var $catcher = $picker.find('.note-dimension-picker-mousecatcher');\\n            var $highlighted = $picker.find('.note-dimension-picker-highlighted');\\n            var $unhighlighted = $picker.find('.note-dimension-picker-unhighlighted');\\n            var $hoverableOption = $dropdown.find(\\\"[id$='-hoverable']\\\");\\n            var $borderedOption = $dropdown.find(\\\"[id$='-bordered']\\\");\\n            var $stripedOption = $dropdown.find(\\\"[id$='-striped']\\\");\\n            var $responsiveOption = $dropdown.find(\\\"[id$='-responsive']\\\");\\n\\n            var posOffset;\\n            // HTML5 with jQuery - e.offsetX is undefined in Firefox\\n            if (event.offsetX === undefined) {\\n                var posCatcher = $(event.target).offset();\\n\\n                posOffset = {\\n                    x: event.pageX - posCatcher.left,\\n                    y: event.pageY - posCatcher.top\\n                };\\n            } else {\\n                posOffset = {\\n                    x: event.offsetX,\\n                    y: event.offsetY\\n                };\\n            }\\n\\n            var dim = {\\n                c: Math.ceil(posOffset.x / gridUnit) || 1,\\n                r: Math.ceil(posOffset.y / gridUnit) || 1\\n            };\\n\\n            var tableOptions = [];\\n            if ($hoverableOption.is(':checked')) tableOptions.push('hoverable');\\n            if ($borderedOption.is(':checked')) tableOptions.push('bordered');\\n            if ($stripedOption.is(':checked')) tableOptions.push('striped');\\n            if ($responsiveOption.is(':checked')) tableOptions.push('responsive-table');\\n\\n            $highlighted.css({ width: (dim.c * gridUnit) + 'px', height: (dim.r * gridUnit) + 'px' });\\n            $catcher.attr('data-value', dim.c + 'x' + dim.r + 'x' + tableOptions.join('x'));\\n\\n            //if (3 < dim.c && dim.c < options.insertTableMaxSize.col) {\\n            $unhighlighted.css({ width: (options.insertTableMaxSize * gridUnit) + 'px'});\\n            //}\\n\\n            if (3 < dim.r && dim.r < options.insertTableMaxSize.row) {\\n                $unhighlighted.css({ height: ((dim.r + 1) * gridUnit) + 'px'});\\n            }\\n\\n            $dimensionDisplay.html(dim.c + ' x ' + dim.r);\\n        };\\n\\n        /**\\n         * bind KeyMap on keydown\\n         *\\n         * @param {Object} layoutInfo\\n         * @param {Object} keyMap\\n         */\\n        this.bindKeyMap = function(layoutInfo, keyMap) {\\n            var $editor = layoutInfo.editor();\\n            var $editable = layoutInfo.editable();\\n\\n            $editable.on('keydown', function(event) {\\n                var keys = [];\\n\\n                // modifier\\n                if (event.metaKey) { keys.push('CMD'); }\\n                if (event.ctrlKey && !event.altKey) { keys.push('CTRL'); }\\n                if (event.shiftKey) { keys.push('SHIFT'); }\\n\\n                // keycode\\n                var keyName = key.nameFromCode[event.keyCode];\\n                if (keyName) {\\n                    keys.push(keyName);\\n                }\\n\\n                var pluginEvent;\\n                var keyString = keys.join('+');\\n                var eventName = keyMap[keyString];\\n                if (eventName) {\\n                    // FIXME materialnote doesn't support event pipeline yet.\\n                    //  - Plugin -> Base Code\\n                    pluginEvent = $.materialnote.pluginEvents[keyString];\\n                    if ($.isFunction(pluginEvent)) {\\n                        if (pluginEvent(event, modules.editor, layoutInfo)) {\\n                            return false;\\n                        }\\n                    }\\n\\n                    pluginEvent = $.materialnote.pluginEvents[eventName];\\n\\n                    if ($.isFunction(pluginEvent)) {\\n                        pluginEvent(event, modules.editor, layoutInfo);\\n                    } else if (modules.editor[eventName]) {\\n                        modules.editor[eventName]($editable, $editor.data('options'));\\n                        event.preventDefault();\\n                    } else if (commands[eventName]) {\\n                        commands[eventName].call(this, layoutInfo);\\n                        event.preventDefault();\\n                    }\\n                } else if (key.isEdit(event.keyCode)) {\\n                    modules.editor\";\n  builder.string += \".afterCommand($editable);\\n                }\\n            });\\n        };\\n\\n        /**\\n         * attach eventhandler\\n         *\\n         * @param {Object} layoutInfo - layout Informations\\n         * @param {Object} options - user options include custom event handlers\\n         */\\n        this.attach = function(layoutInfo, options) {\\n            // handlers for editable\\n            if (options.shortcuts) {\\n                this.bindKeyMap(layoutInfo, options.keyMap[agent.isMac ? 'mac' : 'pc']);\\n            }\\n            layoutInfo.editable().on('mousedown', hMousedown);\\n            layoutInfo.editable().on('keyup mouseup', hKeyupAndMouseup);\\n            layoutInfo.editable().on('scroll', hScroll);\\n\\n            // handler for clipboard\\n            modules.clipboard.attach(layoutInfo, options);\\n\\n            // handler for handle and popover\\n            modules.handle.attach(layoutInfo, options);\\n            layoutInfo.popover().on('click', hToolbarAndPopoverClick);\\n            layoutInfo.popover().on('mousedown', hToolbarAndPopoverMousedown);\\n\\n            // handler for drag and drop\\n            modules.dragAndDrop.attach(layoutInfo, options);\\n\\n            // handlers for frame mode (toolbar, statusbar)\\n            if (!options.airMode) {\\n                // handler for toolbar\\n                layoutInfo.toolbar().on('click', hToolbarAndPopoverClick);\\n                layoutInfo.toolbar().on('mousedown', hToolbarAndPopoverMousedown);\\n\\n                // handler for statusbar\\n                modules.statusbar.attach(layoutInfo, options);\\n            }\\n\\n            // handler for table dimension\\n            var $catcherContainer = options.airMode ? layoutInfo.popover() :\\n                layoutInfo.toolbar();\\n            var $catcher = $catcherContainer.find('.note-dimension-picker-mousecatcher');\\n            $catcher.css({\\n                width: options.insertTableMaxSize.col * gridUnit + 'px',\\n                height: options.insertTableMaxSize.row * gridUnit + 'px'\\n            }).on('mousemove', function(event) {\\n                hDimensionPickerMove(event, options);\\n            });\\n\\n            // save options on editor\\n            layoutInfo.editor().data('options', options);\\n\\n            // ret styleWithCSS for backColor / foreColor clearing with 'inherit'.\\n            if (!agent.isMSIE) {\\n                // [workaround] for Firefox\\n                //  - protect FF Error: NS_ERROR_FAILURE: Failure\\n                setTimeout(function() {\\n                    document.execCommand('styleWithCSS', 0, options.styleWithSpan);\\n                }, 0);\\n            }\\n\\n            // History\\n            var history = new History(layoutInfo.editable());\\n            layoutInfo.editable().data('NoteHistory', history);\\n\\n            // All editor status will be saved on editable with jquery's data\\n            // for support multiple editor with singleton object.\\n            layoutInfo.editable().data('callbacks', {\\n                onInit: options.onInit,\\n                onFocus: options.onFocus,\\n                onBlur: options.onBlur,\\n                onKeydown: options.onKeydown,\\n                onKeyup: options.onKeyup,\\n                onMousedown: options.onMousedown,\\n                onEnter: options.onEnter,\\n                onPaste: options.onPaste,\\n                onBeforeCommand: options.onBeforeCommand,\\n                onChange: options.onChange,\\n                onImageUpload: options.onImageUpload,\\n                onImageUploadError: options.onImageUploadError,\\n                onMediaDelete: options.onMediaDelete,\\n                onToolbarClick: options.onToolbarClick\\n            });\\n\\n            // Textarea: auto filling the code before form submit.\\n            if (dom.isTextarea(list.head(layoutInfo.holder()))) {\\n                layoutInfo.holder().closest('form').submit(function() {\\n                    layoutInfo.holder().val(layoutInfo.holder().code());\\n                });\\n            }\\n        };\\n\\n        /**\\n         * attach jquery custom event\\n         *\\n         * @param {Object} layoutInfo - layout Informations\\n         */\\n        this.attachCustomEvent = function(layoutInfo, options) {\\n            var $holder = layoutInfo.holder();\\n            var $editable = layoutInfo.editable();\\n            var callbacks = $editable.data('callbacks');\\n\\n            $editable.focus(bindCustomEvent($holder, callbacks, 'focus'));\\n            $editable.blur(bindCustomEvent($holder, callbacks, 'blur'));\\n\\n            $editable.keydown(function(event) {\\n                if (event.keyCode === key.code.ENTER) {\\n                    bindCustomEvent($holder, callbacks, 'enter').call(this, event);\\n                }\\n                bindCustomEvent($holder, callbacks, 'keydown').call(this, event);\\n            });\\n            $editable.keyup(bindCustomEvent($holder, callbacks, 'keyup'));\\n\\n            $editable.on('mousedown', bindCustomEvent($holder, callbacks, 'mousedown'));\\n            $editable.on('mouseup', bindCustomEvent($holder, callbacks, 'mouseup'));\\n            $editable.on('scroll', bindCustomEvent($holder, callbacks, 'scroll'));\\n\\n            $editable.on('paste', bindCustomEvent($holder, callbacks, 'paste'));\\n\\n            // [workaround] for old IE - IE8 don't have input events\\n            //  - TODO check IE version\\n            var changeEventName = agent.isMSIE ? 'DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted' : 'input';\\n            $editable.on(changeEventName, function() {\\n                bindCustomEvent($holder, callbacks, 'change')($editable.html(), $editable);\\n            });\\n\\n            if (!options.airMode) {\\n                layoutInfo.toolbar().click(bindCustomEvent($holder, callbacks, 'toolbar.click'));\\n                layoutInfo.popover().click(bindCustomEvent($holder, callbacks, 'popover.click'));\\n            }\\n\\n            // Textarea: auto filling the code before form submit.\\n            if (dom.isTextarea(list.head($holder))) {\\n                $holder.closest('form').submit(function(e) {\\n                    bindCustomEvent($holder, callbacks, 'submit').call(this, e, $holder.code());\\n                });\\n            }\\n\\n            // fire init event\\n            bindCustomEvent($holder, callbacks, 'init')(layoutInfo);\\n\\n            // fire plugin init event\\n            for (var i = 0, len = $.materialnote.plugins.length; i < len; i++) {\\n                if ($.isFunction($.materialnote.plugins[i].init)) {\\n                    $.materialnote.plugins[i].init(layoutInfo);\\n                }\\n            }\\n        };\\n\\n        this.detach = function(layoutInfo, options) {\\n            layoutInfo.holder().off();\\n            layoutInfo.editable().off();\\n\\n            layoutInfo.popover().off();\\n            layoutInfo.handle().off();\\n            layoutInfo.dialog().off();\\n\\n            if (!options.airMode) {\\n                layoutInfo.dropzone().off();\\n                layoutInfo.toolbar().off();\\n                layoutInfo.statusbar().off();\\n            }\\n        };\\n    };\\n\\n    /**\\n     * @class Renderer\\n     *\\n     * renderer\\n     *\\n     * rendering toolbar and editable\\n     */\\n    var Renderer = function() {\\n\\n        /**\\n         * bootstrap button template\\n         * @private\\n         * @param {String} label button name\\n         * @param {Object} [options] button options\\n         * @param {String} [options.event] data-event\\n         * @param {String} [options.className] button's class name\\n         * @param {String} [options.value] data-value\\n         * @param {String} [options.title] button's title for popup\\n         * @param {String} [options.dropdown] dropdown html\\n         * @param {String} [options.hide] data-hide\\n         */\\n\\n        // >>>>>>> CK altered\\n        var tplButton = function(label, options) {\\n            var event = options.event;\\n            var value = options.value;\\n            var title = options.title;\\n            var style = options.style;\\n            var btnClassName = options.btnClassName;\\n            var className = options.className;\\n            var dropdown = options.dropdown;\\n            var hide = options.hide;\\n\\n            if (!dropdown) {\\n                var button = [\\n                    '<div class=\\\"waves-effect waves-light btn',\\n                    (className ? \\\" \\\" + className : '') + '\\\"',\\n                    (title ? ' title=\\\"' + title + '\\\"' : ''),\\n                    (style ? ' style=\\\"' + style + '\\\"' : ''),\\n                    (event ? ' data-event=\\\"' + event + '\\\"' : ''),\\n                    (value ? ' data-value=\\\\'' + value + '\\\\'' : ''),\\n                    (hide ? ' data-hide=\\\\'' + hide + '\\\\'' : ''),\\n                    ' tabindex=\\\"-1\\\">' + label + '<\\/div>'\\n                ].join('');\\n\\n                return button;\\n            } else {\\n                var list = [\\n                    '<div class=\\\"btn-group',\\n                    (className ? \\\" \\\" + className : '') + '\\\">',\\n                    '<button class=\\\"waves-effect waves-light btn dropdown ' + (btnClassName ? btnClassName : '') + '\\\"',\\n                    (title ? ' title=\\\"' + title + '\\\"' : ''),\\n                    (event ? ' data-event=\\\"' + event + '\\\"' : ''),\\n                    (value ? ' data-value=\\\\'' + value + '\\\\'' : ''),\\n                    (hide ? ' data-hide=\\\\'' + hide + '\\\\'' : ''),\\n                    '><i class=\\\"material-icons left\\\">arrow_drop_down<\\/i>' + label + '<\\/button>',\\n                    dropdown,\\n                    '<\\/div>'\\n                ].join('');\\n\\n                return list;\\n            }\\n        };\\n\\n        /**\\n         * bootstrap icon button template\\n         * @private\\n         * @param {String} iconClassName\\n         * @param {Object} [options]\\n         * @param {String} [options.event]\\n         * @param {String} [options.value]\\n         * @param {String} [options.title]\\n         * @param {String} [options.dropdown]\\n         */\\n        // >>>>>>> CK\\n        var tplIconButton = function(iconClassName, options) {\\n            var label = '<i class=\\\"material-icons\\\">' + iconClassName + '<\\/i>';\\n            return tplButton(label, options);\\n        };\\n\\n        /**\\n         * bootstrap popover template\\n         * @private\\n         * @param {String} className\\n         * @param {String} content\\n         */\\n        var tplPopover = function(className, content) {\\n            var $popover = $('<div class=\\\"' + className + ' popover bottom in\\\" style=\\\"display: none;\\\">' +\\n                '<div class=\\\"arrow\\\"><\\/div>' +\\n                '<div class=\\\"popover-content\\\">' +\\n                '<\\/div>' +\\n                '<\\/div>');\\n\\n            $popover.find('.popover-content').append(content);\\n            return $popover;\\n        };\\n\\n        /**\\n         * bootstrap dialog template\\n         *\\n         * @param {String} className\\n         * @param {String} [title='']\\n         * @param {String} body\\n         * @param {String} [footer='']\\n         */\\n        // >>>>>>> CK dialog\\n        var tplDialog = function(className, title, body, footer) {\\n\\n            var modal = [\\n                '<div class=\\\"' + className + ' modal modal-fixed-footer\\\">',\\n                '<div class=\\\"modal-content\\\">',\\n                (title ? '<h4>' + title + '<\\/h4>' : ''),\\n                '<p>' + body + '<\\/p>',\\n                '<\\/div>',\\n                (footer ? '<div class=\\\"modal-footer\\\">' + footer + '<\\/div>' : ''),\\n                '<\\/div>'\\n            ].join('');\\n\\n            return modal;\\n        };\\n\\n        var tplButtonInfo = {\\n            picture: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.image.image, {\\n                    event: 'showImageDialog',\\n                    title: lang.image.image,\\n                    hide: true\\n                });\\n            },\\n            link: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.link.link, {\\n                    event: 'showLinkDialog',\\n                    title: lang.link.link,\\n                    hide: true\\n                });\\n            },\\n            table: function(lang, options) {\\n                var dropdown = '<ul class=\\\"note-table dropdown-menu\\\">' +\\n                    '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"col s6 preventDropClose\\\"><input type=\\\"checkbox\\\" id=\\\"' + materialUniqueId + '-bordered\\\" checked=\\\"checked\\\" /><label for=\\\"' + materialUniqueId + '-bordered\\\">' + lang.table.bordered + '<\\/label><\\/div>' +\\n                    '<div class=\\\"col s6 preventDropClose\\\"><input type=\\\"checkbox\\\" id=\\\"' + materialUniqueId + '-striped\\\" checked=\\\"checked\\\" /><label for=\\\"' + materialUniqueId + '-striped\\\">' + lang.table.striped + '<\\/label><\\/div>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"col s6 preventDropClose\\\"><input type=\\\"checkbox\\\" id=\\\"' + materialUniqueId + '-hoverable\\\" checked=\\\"checked\\\" /><label for=\\\"' + materialUniqueId + '-hoverable\\\">' + lang.table.hoverable + '<\\/label><\\/div>' +\\n                    '<div class=\\\"col s6 preventDropClose\\\"><input type=\\\"checkbox\\\" id=\\\"' + materialUniqueId + '-responsive\\\" checked=\\\"checked\\\" /><label for=\\\"' + materialUniqueId + '-responsive\\\">' + lang.table.responsive + '<\\/label><\\/div>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"note-dimension-picker\\\">' +\\n                    '<div class=\\\"note-dimension-picker-mousecatcher\\\" data-event=\\\"insertTable\\\" data-value=\\\"1x1\\\"><\\/div>' +\\n                    '<div class=\\\"note-dimension-picker-highlighted\\\"><\\/div>' +\\n                    '<div class=\\\"note-dimension-picker-unhighlighted\\\"><\\/div>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"note-dimension-display\\\"> 1 x 1 <\\/div>' +\\n                    '<\\/ul>';\\n                return tplIconButton(options.iconPrefix + options.icons.table.table, {\\n                    title: lang.table.table,\\n                    dropdown: dropdown\\n                });\\n            },\\n            style: function(lang, options) {\\n                var items = options.styleTags.reduce(function(memo, v) {\\n                    var label = lang.style[v === 'p' ? 'normal' : v];\\n\\n                    return memo + '<li><div data-event=\\\"formatBlock\\\" data-value=\\\"' + v + '\\\">' +\\n                        ((v === 'p' || v === 'pre') ? label : '<' + v + '>' + label + '<\\/' + v + '>') +\\n                        '<\\/div><\\/li>';\\n                }, '');\\n\\n                return tplIconButton(options.iconPrefix + options.icons.style.style, {\\n                    title: lang.style.style,\\n                    dropdown: '<ul class=\\\"dropdown-menu largeDropdown\\\">' + items + '<\\/ul>'\\n                });\\n            },\\n            fontname: function(lang, options) {\\n                var realFontList = [];\\n                var items = options.fontNames.reduce(function(memo, v) {\\n                    if (!agent.isFontInstalled(v) && options.fontNamesIgnoreCheck.indexOf(v) === -1) {\\n                        return memo;\\n                    }\\n                    realFontList.push(v);\\n                    return memo + '<li><div data-event=\\\"fontName\\\" href=\\\"#\\\" data-value=\\\"' + v + '\\\" style=\\\"font-family:\\\\'' + v + '\\\\'\\\">' +\\n                        '<i class=\\\"material-icons tiny transparent\\\">' + options.iconPrefix + options.icons.misc.check + '<\\/i> ' + v + '<\\/div><\\/li>';\\n                }, '');\\n\\n                var hasDefaultFont = agent.isFontInstalled(options.defaultFontName);\\n                var defaultFontName = (hasDefaultFont) ? options.defaultFontName : realFontList[0];\\n                var label = '<div class=\\\"note-current-fontname\\\">' + defaultFontName + '<\\/div>';\\n\\n                return tplButton(label, {\\n                    title: lang.font.name,\\n                    className: 'note-fontname',\\n                    dropdown: '<ul class=\\\"dropdown-menu note-check\\\">' + items + '<\\/ul>'\\n                });\\n            },\\n            fontsize: function(lang, options) {\\n                var items = options.fontSizes.reduce(function(memo, v) {\\n                    return memo + '<li><div data-event=\\\"fontSize\\\" href=\\\"#\\\" data-value=\\\"' + v + '\\\">' +\\n                        '<i class=\\\"material-icons tiny transparent\\\">' + options.iconPrefix + options.icons.misc.check + '<\\/i> ' + v +\\n                        '<\\/div><\\/li>';\\n                }, '');\\n\\n                var label = '<span class=\\\"note-current-fontsize\\\">15<\\/span>';\\n                return tplButton(label, {\\n                    title: lang.font.size,\\n                    cl\";\n  builder.string += \"assName: 'note-fontsize',\\n                    dropdown: '<ul class=\\\"dropdown-menu note-check\\\">' + items + '<\\/ul>'\\n                });\\n            },\\n            color: function(lang, options) {\\n                // >>>>>>> CK\\n                var colorButtonLabel = '<i class=\\\"material-icons\\\">' + options.icons.color.recent + '<\\/i>',\\n                    colorButton = tplButton(colorButtonLabel, {\\n                        className: 'note-recent-color',\\n                        title: lang.color.recent,\\n                        style: \\\"color: \\\" + options.defaultTextColor + \\\"; background-color: \\\" + options.defaultBackColor + \\\";\\\",\\n                        event: 'color',\\n                        value: '{\\\"backColor\\\": \\\"' + options.defaultBackColor + '\\\"}'\\n                    });\\n\\n                var dropdown = '<ul id=\\\"colors\\\" class=\\\"dropdown-menu\\\">' +\\n                    '<li>' +\\n                    '<div class=\\\"col s12\\\">' +\\n                    '<ul class=\\\"tabs\\\">' +\\n                    '<li class=\\\"tab\\\"><a href=\\\"#' + materialUniqueId + '-foreColor\\\" class=\\\"active\\\">' + lang.color.foreground + '<\\/a><\\/li>' +\\n                    '<li class=\\\"tab\\\"><a href=\\\"#' + materialUniqueId + '-backColor\\\">' + lang.color.background + '<\\/a><\\/li>' +\\n                    '<\\/ul>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"col s12 colorTable\\\">' +\\n                    '<div id=\\\"' + materialUniqueId + '-foreColor\\\">' +\\n                    '<div class=\\\"note-color-reset waves-effect waves-light btn\\\" data-event=\\\"foreColor\\\" data-value=\\\"' + options.defaultTextColor + '\\\" title=\\\"' + lang.color.reset + '\\\">' +\\n                    lang.color.resetToDefault +\\n                    '<\\/div>' +\\n                    '<div class=\\\"colorName\\\"><\\/div>' +\\n                    '<div class=\\\"note-color-palette\\\" data-target-event=\\\"foreColor\\\"><\\/div>' +\\n                    '<\\/div>' +\\n                    '<div id=\\\"' + materialUniqueId + '-backColor\\\">' +\\n                    '<div class=\\\"note-color-reset waves-effect waves-light btn\\\" data-event=\\\"backColor\\\"' + ' data-value=\\\"' + options.defaultBackColor + '\\\" title=\\\"' + lang.color.transparent + '\\\">' +\\n                    lang.color.setTransparent +\\n                    '<\\/div>' +\\n                    '<div class=\\\"colorName\\\"><\\/div>' +\\n                    '<div class=\\\"note-color-palette\\\" data-target-event=\\\"backColor\\\"><\\/div>' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    '<\\/li>' +\\n                    '<\\/ul>';\\n\\n                var moreButton = tplButton('', {\\n                    title: lang.color.more,\\n                    className: 'closeLeft',\\n                    dropdown: dropdown\\n                });\\n\\n                return moreButton + colorButton;\\n            },\\n            bold: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.bold, {\\n                    event: 'bold',\\n                    title: lang.font.bold\\n                });\\n            },\\n            italic: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.italic, {\\n                    event: 'italic',\\n                    title: lang.font.italic\\n                });\\n            },\\n            underline: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.underline, {\\n                    event: 'underline',\\n                    title: lang.font.underline\\n                });\\n            },\\n            strikethrough: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.strikethrough, {\\n                    event: 'strikethrough',\\n                    title: lang.font.strikethrough\\n                });\\n            },\\n            superscript: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.superscript, {\\n                    event: 'superscript',\\n                    title: lang.font.superscript\\n                });\\n            },\\n            subscript: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.subscript, {\\n                    event: 'subscript',\\n                    title: lang.font.subscript\\n                });\\n            },\\n            clear: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.font.clear, {\\n                    event: 'removeFormat',\\n                    title: lang.font.clear\\n                });\\n            },\\n            ul: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.lists.unordered, {\\n                    event: 'insertUnorderedList',\\n                    title: lang.lists.unordered\\n                });\\n            },\\n            ol: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.lists.ordered, {\\n                    event: 'insertOrderedList',\\n                    title: lang.lists.ordered\\n                });\\n            },\\n            //>>>>>>> CK paragraph single buttons\\n            leftButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.left, {\\n                    title: lang.paragraph.left,\\n                    event: 'justifyLeft'\\n                });\\n            },\\n            centerButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.center, {\\n                    title: lang.paragraph.center,\\n                    event: 'justifyCenter'\\n                });\\n            },\\n            rightButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.right, {\\n                    title: lang.paragraph.right,\\n                    event: 'justifyRight'\\n                });\\n            },\\n            justifyButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.justify, {\\n                    title: lang.paragraph.justify,\\n                    event: 'justifyFull'\\n                });\\n            },\\n            outdentButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.outdent, {\\n                    title: lang.paragraph.outdent,\\n                    event: 'outdent'\\n                });\\n            },\\n            indentButton: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.indent, {\\n                    title: lang.paragraph.indent,\\n                    event: 'indent'\\n                });\\n            },\\n\\n            paragraph: function(lang, options) {\\n                var leftButton = tplIconButton(options.iconPrefix + options.icons.paragraph.left, {\\n                    title: lang.paragraph.left,\\n                    event: 'justifyLeft'\\n                });\\n                var centerButton = tplIconButton(options.iconPrefix + options.icons.paragraph.center, {\\n                    title: lang.paragraph.center,\\n                    event: 'justifyCenter'\\n                });\\n                var rightButton = tplIconButton(options.iconPrefix + options.icons.paragraph.right, {\\n                    title: lang.paragraph.right,\\n                    event: 'justifyRight'\\n                });\\n                var justifyButton = tplIconButton(options.iconPrefix + options.icons.paragraph.justify, {\\n                    title: lang.paragraph.justify,\\n                    event: 'justifyFull'\\n                });\\n\\n                var outdentButton = tplIconButton(options.iconPrefix + options.icons.paragraph.outdent, {\\n                    title: lang.paragraph.outdent,\\n                    event: 'outdent'\\n                });\\n                var indentButton = tplIconButton(options.iconPrefix + options.icons.paragraph.indent, {\\n                    title: lang.paragraph.indent,\\n                    event: 'indent'\\n                });\\n\\n                var dropdown = '<ul class=\\\"dropdown-menu\\\">' +\\n                    '<div class=\\\"note-align btn-group\\\">' +\\n                    leftButton + centerButton + rightButton + justifyButton +\\n                    '<\\/div>' +\\n                    '<div class=\\\"note-list btn-group\\\">' +\\n                    indentButton + outdentButton +\\n                    '<\\/div>' +\\n                    '<\\/ul>';\\n\\n                return tplIconButton(options.iconPrefix + options.icons.paragraph.paragraph, {\\n                    title: lang.paragraph.paragraph,\\n                    dropdown: dropdown\\n                });\\n            },\\n            lineheight: function(lang, options) {\\n                var items = options.lineHeights.reduce(function(memo, v) {\\n                    return memo + '<li><div data-event=\\\"lineHeight\\\" href=\\\"#\\\" data-value=\\\"' + parseFloat(v) + '\\\">' +\\n                        '<i class=\\\"material-icons tiny transparent\\\">' + options.iconPrefix + options.icons.misc.check + '<\\/i> ' + v +\\n                        '<\\/div><\\/li>';\\n                }, '');\\n\\n                return tplIconButton(options.iconPrefix + options.icons.font.height, {\\n                    title: lang.font.height,\\n                    className: 'note-height',\\n                    dropdown: '<ul class=\\\"dropdown-menu note-check\\\">' + items + '<\\/ul>'\\n                });\\n\\n            },\\n            help: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.options.help, {\\n                    event: 'showHelpDialog',\\n                    title: lang.options.help,\\n                    hide: true\\n                });\\n            },\\n            fullscreen: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.options.fullscreen, {\\n                    event: 'fullscreen',\\n                    title: lang.options.fullscreen\\n                });\\n            },\\n            codeview: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.options.codeview, {\\n                    event: 'codeview',\\n                    title: lang.options.codeview\\n                });\\n            },\\n            undo: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.history.undo, {\\n                    event: 'undo',\\n                    title: lang.history.undo\\n                });\\n            },\\n            redo: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.history.redo, {\\n                    event: 'redo',\\n                    title: lang.history.redo\\n                });\\n            },\\n            hr: function(lang, options) {\\n                return tplIconButton(options.iconPrefix + options.icons.hr.insert, {\\n                    event: 'insertHorizontalRule',\\n                    title: lang.hr.insert\\n                });\\n            }\\n        };\\n\\n        var tplPopovers = function(lang, options) {\\n            var tplLinkPopover = function() {\\n                var linkButton = tplIconButton(options.iconPrefix + options.icons.link.edit, {\\n                    title: lang.link.edit,\\n                    event: 'showLinkDialog',\\n                    hide: true\\n                });\\n                var unlinkButton = tplIconButton(options.iconPrefix + options.icons.link.unlink, {\\n                    title: lang.link.unlink,\\n                    event: 'unlink'\\n                });\\n                var content = '<a href=\\\"http://www.google.com\\\" target=\\\"_blank\\\">www.google.com<\\/a>&nbsp;&nbsp;' +\\n                    '<div class=\\\"note-insert btn-group\\\">' +\\n                    linkButton + unlinkButton +\\n                    '<\\/div>';\\n                return tplPopover('note-link-popover', content);\\n            };\\n\\n            var tplImagePopover = function() {\\n                var fullButton = tplButton('<span class=\\\"note-fontsize-10\\\">100%<\\/span>', {\\n                    title: lang.image.resizeFull,\\n                    event: 'resize',\\n                    value: '1'\\n                });\\n                var halfButton = tplButton('<span class=\\\"note-fontsize-10\\\">50%<\\/span>', {\\n                    title: lang.image.resizeHalf,\\n                    event: 'resize',\\n                    value: '0.5'\\n                });\\n                var quarterButton = tplButton('<span class=\\\"note-fontsize-10\\\">25%<\\/span>', {\\n                    title: lang.image.resizeQuarter,\\n                    event: 'resize',\\n                    value: '0.25'\\n                });\\n\\n                var leftButton = tplIconButton(options.iconPrefix + options.icons.image.floatLeft, {\\n                    title: lang.image.floatLeft,\\n                    event: 'floatMe',\\n                    value: 'left'\\n                });\\n                var rightButton = tplIconButton(options.iconPrefix + options.icons.image.floatRight, {\\n                    title: lang.image.floatRight,\\n                    event: 'floatMe',\\n                    value: 'right'\\n                });\\n                var justifyButton = tplIconButton(options.iconPrefix + options.icons.image.floatNone, {\\n                    title: lang.image.floatNone,\\n                    event: 'floatMe',\\n                    value: 'none'\\n                });\\n\\n                var roundedButton = tplIconButton(options.iconPrefix + options.icons.image.shapeRounded, {\\n                    title: lang.image.shapeRounded,\\n                    event: 'imageClass',\\n                    value: 'img-rounded'\\n                });\\n                var circleButton = tplIconButton(options.iconPrefix + options.icons.image.shapeCircle, {\\n                    title: lang.image.shapeCircle,\\n                    event: 'imageClass',\\n                    value: 'img-circle'\\n                });\\n                var thumbnailButton = tplIconButton(options.iconPrefix + options.icons.image.shapeThumbnail, {\\n                    title: lang.image.shapeThumbnail,\\n                    event: 'imageClass',\\n                    value: 'img-thumbnail'\\n                });\\n                var borderedButton = tplIconButton(options.iconPrefix + options.icons.image.bordered, {\\n                    title: lang.image.bordered,\\n                    event: 'imageClass',\\n                    value: 'img-bordered'\\n                });\\n                var noneButton = tplIconButton(options.iconPrefix + options.icons.image.shapeNone, {\\n                    title: lang.image.shapeNone,\\n                    event: 'imageShape',\\n                    value: ''\\n                });\\n\\n                var removeButton = tplIconButton(options.iconPrefix + options.icons.image.remove, {\\n                    title: lang.image.remove,\\n                    event: 'removeMedia',\\n                    value: 'none'\\n                });\\n\\n                var content = //'<div class=\\\"btn-group\\\">' + fullButton + halfButton + quarterButton + '<\\/div>' +\\n                    '<div class=\\\"btn-group\\\">' + leftButton + rightButton + justifyButton + '<\\/div>' +\\n                    '<div class=\\\"btn-group\\\">' + roundedButton + circleButton + thumbnailButton + borderedButton + noneButton + '<\\/div>' +\\n                    '<div class=\\\"btn-group\\\">' + removeButton + '<\\/div>';\\n                return tplPopover('note-image-popover', content);\\n            };\\n\\n            var tplAirPopover = function() {\\n                var $content = $('<div />');\\n                for (var idx = 0, len = options.airPopover.length; idx < len; idx ++) {\\n                    var group = options.airPopover[idx];\\n\\n                    var $group = $('<div class=\\\"note-' + group[0] + ' btn-group\\\">');\\n                    for (var i = 0, lenGroup = group[1].length; i < lenGroup; i++) {\\n                        var $button = $(tplButtonInfo[group[1][i]](lang, options));\\n\\n                        $button.attr('data-name', group[1][i]);\\n\\n                        $group.append($button);\\n                    }\\n                    $content.append($group);\\n                }\\n\\n                return tplPopover('note-air-popover', $content.children());\\n            };\\n\\n            var $notePopover = $('<div class=\\\"note-popover\\\" />');\\n\\n            $notePopover.append(tplLinkPopover());\\n            $notePopover.append(tplImagePopover());\\n\\n            if (options.airMode) {\\n   \";\n  builder.string += \"             $notePopover.append(tplAirPopover());\\n            }\\n\\n            return $notePopover;\\n        };\\n\\n        var tplHandles = function() {\\n            return '<div class=\\\"note-handle\\\">' +\\n                '<div class=\\\"note-control-selection\\\">' +\\n                '<div class=\\\"note-control-selection-bg\\\"><\\/div>' +\\n                '<div class=\\\"note-control-sizing note-control-se\\\"><\\/div>' +\\n                '<div class=\\\"note-control-selection-info\\\"><\\/div>' +\\n                '<\\/div>' +\\n                '<\\/div>';\\n        };\\n\\n        /**\\n         * shortcut table template\\n         * @param {String} title\\n         * @param {String} body\\n         */\\n        var tplShortcut = function(title, keys) {\\n            var keyClass = 'note-shortcut-col col-xs-6 note-shortcut-';\\n            var body = [];\\n\\n            for (var i in keys) {\\n                if (keys.hasOwnProperty(i)) {\\n                    body.push(\\n                        '<tr><td>' + keys[i].kbd + '<\\/td><td>' + keys[i].text + '<\\/td><\\/tr>'\\n                    );\\n                }\\n            }\\n\\n            return '<thead><tr><th>' + title + '<\\/th><th>' + '(keys)' + '<\\/th><\\/tr><\\/thead>' +\\n                '<tbody>' + body.join('') + '<\\/tbody>';\\n        };\\n\\n        var tplShortcutText = function(lang) {\\n            var keys = [\\n                { kbd: '\\u2318 + B', text: lang.font.bold },\\n                { kbd: '\\u2318 + I', text: lang.font.italic },\\n                { kbd: '\\u2318 + U', text: lang.font.underline },\\n                { kbd: '\\u2318 + \\\\\\\\', text: lang.font.clear }\\n            ];\\n\\n            return tplShortcut(lang.shortcut.textFormatting, keys);\\n        };\\n\\n        var tplShortcutAction = function(lang) {\\n            var keys = [\\n                { kbd: '\\u2318 + Z', text: lang.history.undo },\\n                { kbd: '\\u2318 + \\u21E7 + Z', text: lang.history.redo },\\n                { kbd: '\\u2318 + ]', text: lang.paragraph.indent },\\n                { kbd: '\\u2318 + [', text: lang.paragraph.outdent },\\n                { kbd: '\\u2318 + ENTER', text: lang.hr.insert }\\n            ];\\n\\n            return tplShortcut(lang.shortcut.action, keys);\\n        };\\n\\n        var tplShortcutPara = function(lang) {\\n            var keys = [\\n                { kbd: '\\u2318 + \\u21E7 + L', text: lang.paragraph.left },\\n                { kbd: '\\u2318 + \\u21E7 + E', text: lang.paragraph.center },\\n                { kbd: '\\u2318 + \\u21E7 + R', text: lang.paragraph.right },\\n                { kbd: '\\u2318 + \\u21E7 + J', text: lang.paragraph.justify },\\n                { kbd: '\\u2318 + \\u21E7 + NUM7', text: lang.lists.ordered },\\n                { kbd: '\\u2318 + \\u21E7 + NUM8', text: lang.lists.unordered }\\n            ];\\n\\n            return tplShortcut(lang.shortcut.paragraphFormatting, keys);\\n        };\\n\\n        var tplShortcutStyle = function(lang) {\\n            var keys = [\\n                { kbd: '\\u2318 + NUM0', text: lang.style.normal },\\n                { kbd: '\\u2318 + NUM1', text: lang.style.h1 },\\n                { kbd: '\\u2318 + NUM2', text: lang.style.h2 },\\n                { kbd: '\\u2318 + NUM3', text: lang.style.h3 },\\n                { kbd: '\\u2318 + NUM4', text: lang.style.h4 },\\n                { kbd: '\\u2318 + NUM5', text: lang.style.h5 },\\n                { kbd: '\\u2318 + NUM6', text: lang.style.h6 }\\n            ];\\n\\n            return tplShortcut(lang.shortcut.documentStyle, keys);\\n        };\\n\\n        var tplExtraShortcuts = function(lang, options) {\\n            var extraKeys = options.extraKeys;\\n            var keys = [];\\n\\n            for (var key in extraKeys) {\\n                if (extraKeys.hasOwnProperty(key)) {\\n                    keys.push({ kbd: key, text: extraKeys[key] });\\n                }\\n            }\\n\\n            return tplShortcut(lang.shortcut.extraKeys, keys);\\n        };\\n\\n        var tplShortcutTable = function(lang, options) {\\n            var template = [\\n                '<table class=\\\"striped hoverable\\\">' + tplShortcutAction(lang, options) + '<\\/table>',\\n                '<table class=\\\"striped hoverable\\\">' + tplShortcutStyle(lang, options) + '<\\/table>',\\n                '<table class=\\\"striped hoverable\\\">' + tplShortcutText(lang, options) + '<\\/table>',\\n                '<table class=\\\"striped hoverable\\\">' + tplShortcutPara(lang, options) + '<\\/table>'\\n            ].join('<br>');\\n\\n            if (options.extraKeys) {\\n                //template.push('<table class=\\\"striped hoverable\\\">' + tplExtraShortcuts(lang, options) + '<\\/table>');\\n            }\\n            return template;\\n        };\\n\\n        var replaceMacKeys = function(sHtml) {\\n            return sHtml.replace(/\\u2318/g, 'Ctrl').replace(/\\u21E7/g, 'Shift');\\n        };\\n\\n        var tplDialogInfo = {\\n            image: function(lang, options) {\\n                var imageLimitation = '';\\n\\n                if (options.maximumImageFileSize) {\\n                    var unit = Math.floor(Math.log(options.maximumImageFileSize) / Math.log(1024));\\n                    var readableSize = (options.maximumImageFileSize / Math.pow(1024, unit)).toFixed(2) * 1 + ' ' + ' KMGTP'[unit] + 'B';\\n\\n                    imageLimitation = '<small>' + lang.image.maximumFileSize + ' : ' + readableSize + '<\\/small>';\\n                }\\n\\n                var body = '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"col s12\\\">' +\\n                    '<div class=\\\"file-field input-field\\\">' +\\n                    '<div class=\\\"btn\\\">' +\\n                    '<span>' + lang.image.image + '<\\/span>' +\\n                    '<input class=\\\"note-image-input\\\" name=\\\"files\\\" type=\\\"file\\\" />' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"file-path-wrapper\\\">' +\\n                    '<input class=\\\"file-path\\\" type=\\\"text\\\" />' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"input-field col s12\\\">' +\\n                    '<input class=\\\"note-image-url\\\" type=\\\"text\\\" />' +\\n                    '<label>' + lang.image.url + '<\\/label>' +\\n                    '<\\/div>' +\\n                    '<\\/div>';\\n\\n                var footer = '<button href=\\\"#\\\" class=\\\"waves-effect waves-light btn note-image-btn disabled\\\" disabled>' + lang.image.insert + '<\\/button>' +\\n                    '<button class=\\\"waves-effect waves-light btn btnClose\\\">' + lang.shortcut.close + '<\\/button>';\\n                return tplDialog('note-image-dialog', lang.image.insert, body, footer);\\n            },\\n\\n            link: function(lang, options) {\\n                var body = '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"input-field col s12\\\">' +\\n                    '<input class=\\\"note-link-text\\\" type=\\\"text\\\" />' +\\n                    '<label>' + lang.link.textToDisplay + '<\\/label>' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    '<div class=\\\"row\\\">' +\\n                    '<div class=\\\"input-field col s12\\\">' +\\n                    '<input class=\\\"note-link-url\\\" type=\\\"text\\\" value=\\\"http://\\\" />' +\\n                    '<label class=\\\"active\\\">' + lang.link.url + '<\\/label>' +\\n                    '<\\/div>' +\\n                    '<\\/div>' +\\n                    (!options.disableLinkTarget ?\\n                        '<div class=\\\"row\\\">' +\\n                        '<div class=\\\"col s12\\\">' +\\n                        '<input type=\\\"checkbox\\\" id=\\\"' + materialUniqueId + '-noteInsertLinkNewWindow\\\" checked=\\\"checked\\\" />' +\\n                        '<label for=\\\"' + materialUniqueId + '-noteInsertLinkNewWindow\\\">' + lang.link.openInNewWindow + '<\\/label>' +\\n                        '<\\/div>' +\\n                        '<\\/div>'\\n                            : ''\\n                    );\\n\\n                var footer = '<button href=\\\"#\\\" class=\\\"waves-effect waves-light btn note-link-btn disabled\\\" disabled>' + lang.link.insert + '<\\/button>' +\\n                    '<button class=\\\"waves-effect waves-light btn btnClose\\\">' + lang.shortcut.close + '<\\/button>';\\n                return tplDialog('note-link-dialog', lang.link.insert, body, footer);\\n            },\\n\\n            help: function(lang, options) {\\n                var body = (agent.isMac ? tplShortcutTable(lang, options) : replaceMacKeys(tplShortcutTable(lang, options)));\\n                var footer = '<button href=\\\"#\\\" class=\\\"waves-effect waves-light btn modal-close\\\">' + lang.shortcut.close + '<\\/button>';\\n\\n                return tplDialog('note-help-dialog', lang.shortcut.shortcuts, body, footer);\\n            }\\n        };\\n\\n        var tplDialogs = function(lang, options) {\\n            var dialogs = '';\\n\\n            $.each(tplDialogInfo, function(idx, tplDialog) {\\n                dialogs += tplDialog(lang, options);\\n            });\\n\\n            return '<div class=\\\"note-dialog\\\">' + dialogs + '<\\/div>';\\n        };\\n\\n        var tplStatusbar = function() {\\n            return '<div class=\\\"note-resizebar\\\">' +\\n                '<div class=\\\"note-icon-bar\\\"><\\/div>' +\\n                '<div class=\\\"note-icon-bar\\\"><\\/div>' +\\n                '<div class=\\\"note-icon-bar\\\"><\\/div>' +\\n                '<\\/div>';\\n        };\\n\\n        var representShortcut = function(str) {\\n            if (agent.isMac) {\\n                str = str.replace('CMD', '\\u2318').replace('SHIFT', '\\u21E7');\\n            }\\n\\n            return str.replace('BACKSLASH', '\\\\\\\\')\\n                .replace('SLASH', '/')\\n                .replace('LEFTBRACKET', '[')\\n                .replace('RIGHTBRACKET', ']');\\n        };\\n\\n        /**\\n         * createTooltip\\n         * @param {jQuery} $container\\n         * @param {Object} keyMap\\n         * @param {String} [sPlacement]\\n         */\\n        // >>>>>>> CK\\n        var createTooltip = function($container, keyMap, sPlacement) {\\n            $(document).ready(function() {\\n                var invertedKeyMap = func.invertObject(keyMap);\\n                var $buttons = $container.find('.btn');\\n\\n                $buttons.each(function(i, elBtn) {\\n                    var $btn = $(elBtn);\\n                    var sShortcut = invertedKeyMap[$btn.data('event')];\\n                    var text = $btn.attr('title');\\n\\n                    if (sShortcut) {\\n                        $btn.attr('data-tooltip', function(i, v) {\\n                            text = text + ' (' + representShortcut(sShortcut) + ')';\\n\\n                            $(this).removeAttr('title');\\n                            return text;\\n                        });\\n                    }\\n                    $btn.attr('data-position', 'bottom');\\n                    $btn.attr('data-tooltip', text);\\n                    $btn.removeAttr('title');\\n                }).ckTooltip({\\n                    container: $container,\\n                    position: 'top',\\n                    delay: 30\\n                });\\n            });\\n        };\\n\\n        // >>>>>>> CK\\n        // createPalette\\n        var createPalette = function($container, options) {\\n            var colorInfo = options.colors;\\n            var colorTitles = options.colorTitles;\\n\\n            $container.find('.note-color-palette').each(function() {\\n                var $palette = $(this), eventName = $palette.attr('data-target-event');\\n                var paletteContents = [];\\n\\n                for (var row = 0, lenRow = colorInfo.length; row < lenRow; row++) {\\n                    var colors = colorInfo[row];\\n                    var titles = colorTitles[row];\\n                    var buttons = [];\\n\\n                    for (var col = 0, lenCol = colors.length; col < lenCol; col++) {\\n                        var color = colors[col];\\n                        var title = titles[col];\\n\\n                        buttons.push(['<button type=\\\"button\\\" class=\\\"note-color-btn\\\" style=\\\"background-color:', color,\\n                            ';\\\" data-event=\\\"', eventName,\\n                            '\\\" data-value=\\\"', color,\\n                            '\\\" data-description=\\\"', title,\\n                            '\\\" data-toggle=\\\"button\\\" tabindex=\\\"-1\\\"><\\/button>'].join(''));\\n                    }\\n                    paletteContents.push('<div class=\\\"note-color-row\\\">' + buttons.join('') + '<\\/div>');\\n                }\\n                $palette.html(paletteContents.join(''));\\n\\n                $palette.find('button').mouseenter(function() {\\n                    $palette.siblings('.colorName').html($(this).data('description'));\\n                });\\n                $palette.mouseleave(function() {\\n                    $(this).siblings('.colorName').html('');\\n                });\\n            });\\n        };\\n\\n        /**\\n         * create materialnote layout (air mode)\\n         *\\n         * @param {jQuery} $holder\\n         * @param {Object} options\\n         */\\n        this.createLayoutByAirMode = function($holder, options) {\\n            var langInfo = options.langInfo;\\n            var keyMap = options.keyMap[agent.isMac ? 'mac' : 'pc'];\\n            var id = func.uniqueId();\\n\\n            $holder.addClass('note-air-editor note-editable');\\n            $holder.attr({\\n                'id': 'note-editor-' + id,\\n                'contentEditable': true\\n            });\\n\\n            var body = document.body;\\n\\n            // create Popover\\n            var $popover = $(tplPopovers(langInfo, options));\\n            $popover.addClass('note-air-layout');\\n            $popover.attr('id', 'note-popover-' + id);\\n            $popover.appendTo(body);\\n            createTooltip($popover, keyMap);\\n            createPalette($popover, options);\\n\\n            // create Handle\\n            var $handle = $(tplHandles());\\n            $handle.addClass('note-air-layout');\\n            $handle.attr('id', 'note-handle-' + id);\\n            $handle.appendTo(body);\\n\\n            // create Dialog\\n            var $dialog = $(tplDialogs(langInfo, options));\\n            $dialog.addClass('note-air-layout');\\n            $dialog.attr('id', 'note-dialog-' + id);\\n            $dialog.find('button.close, a.modal-close').click(function() {\\n                $(this).closest('.modal').closeModal();\\n            });\\n            $dialog.appendTo(body);\\n        };\\n\\n        /**\\n         * create materialnote layout (normal mode)\\n         *\\n         * @param {jQuery} $holder\\n         * @param {Object} options\\n         */\\n        this.createLayoutByFrame = function($holder, options) {\\n            var langInfo = options.langInfo;\\n\\n            //01. create Editor\\n            var $editor = $('<div class=\\\"note-editor\\\"><\\/div>');\\n            if (options.width) {\\n                $editor.width(options.width);\\n            }\\n\\n            //02. statusbar (resizebar)\\n            if (options.height > 0) {\\n                $('<div class=\\\"note-statusbar\\\">' + (options.disableResizeEditor ? '' : tplStatusbar()) + '<\\/div>').prependTo($editor);\\n            }\\n\\n            //03. create Editable\\n            var isContentEditable = !$holder.is(':disabled');\\n            var $editable = $('<div class=\\\"note-editable\\\" contentEditable=\\\"' + isContentEditable + '\\\"><\\/div>')\\n                .prependTo($editor);\\n            if (options.height) {\\n                $editable.height(options.height);\\n            }\\n            if (options.direction) {\\n                $editable.attr('dir', options.direction);\\n            }\\n            var placeholder = $holder.attr('placeholder') || options.placeholder;\\n            if (placeholder) {\\n                $editable.attr('data-placeholder', placeholder);\\n            }\\n\\n            $editable.html(dom.html($holder));\\n\\n            //031. create codable\\n            $('<textarea class=\\\"note-codable\\\"><\\/textarea>').prependTo($editor);\\n\\n            //04. create Toolbar\\n            var $toolbar = $('<div class=\\\"note-toolbar btn-toolbar\\\" />');\\n            for (var idx = 0, len = options.toolbar.length; idx < len; idx ++) {\\n                var groupName = options.toolbar[idx][0];\\n                var groupButtons = options.toolbar[idx][1];\\n\\n                var $group = $('<div class=\\\"note-' + groupName + ' btn-group\\\" />');\\n                for (var i = 0, btnLength = groupButtons.length; i < btnLength; i++) {\\n                    var buttonInfo = tplButtonInfo[groupButtons[i]];\\n                    // continue creating toolbar even if a button doesn't exist\\n                    if (!$.isFunction(buttonInfo)) { continue; }\\n\\n                    var $button = $(buttonInfo(langInfo, options));\\n                    $button.attr('data-name', groupButtons[i]);  // set button's alias, becuase to get button element from $toolbar\\n                    $group.append($button);\\n                }\\n                $toolbar.append($group);\\n            }\\n\\n            $toolbar.prependTo($editor);\\n         \";\n  builder.string += \"   var keyMap = options.keyMap[agent.isMac ? 'mac' : 'pc'];\\n            createPalette($toolbar, options);\\n            createTooltip($toolbar, keyMap, 'bottom');\\n\\n\\n            // >>>>>>> CK - following toolbar\\n            // following toolbar\\n            function followingBar() {\\n                $(window).scroll(function() {\\n                    var isFullscreen = $editor.hasClass('fullscreen');\\n\\n                    if (isFullscreen) {\\n                        return false;\\n                    }\\n\\n                    var toolbar = $editor.children('.note-toolbar');\\n                    var toolbarHeight = toolbar.outerHeight();\\n                    var editable = $editor.children('.note-editable');\\n                    var editableHeight = editable.outerHeight();\\n                    var editorWidth = $editor.width;\\n                    var toolbarOffset, editorOffsetTop, editorOffsetBottom;\\n                    var activateOffset, deactivateOffsetTop, deactivateOffsetBottom;\\n                    var currentOffset;\\n                    var relativeOffset;\\n                    var otherBarHeight;\\n\\n                    // check if the web app is currently using another static bar\\n                    otherBarHeight = $(\\\".\\\" + options.otherStaticBarClass).outerHeight();\\n                    if (!otherBarHeight) otherBarHeight = 0;\\n\\n                    currentOffset = $(document).scrollTop();\\n                    toolbarOffset = toolbar.offset().top;\\n                    editorOffsetTop = $editor.offset().top;\\n                    editorOffsetBottom = editorOffsetTop + editableHeight;\\n                    activateOffset = toolbarOffset - otherBarHeight;\\n                    deactivateOffsetBottom = editorOffsetBottom - otherBarHeight;\\n                    deactivateOffsetTop = editorOffsetTop - otherBarHeight;\\n\\n                    if ((currentOffset > activateOffset) && (currentOffset < deactivateOffsetBottom)) {\\n                        relativeOffset = currentOffset - $editor.offset().top + otherBarHeight;\\n                        toolbar.css({'top': relativeOffset + 'px', 'z-index': 2000});\\n                    } else {\\n                        if ((currentOffset < toolbarOffset) && (currentOffset < deactivateOffsetBottom)) {\\n                            toolbar.css({'top': 0, 'z-index': 1052});\\n\\n                            if (currentOffset > deactivateOffsetTop) {\\n                                relativeOffset = currentOffset - $editor.offset().top + otherBarHeight;\\n                                toolbar.css({'top': relativeOffset + 'px', 'z-index': 2000});\\n                            }\\n                        }\\n                    }\\n                });\\n            }\\n            if (options.followingToolbar) {\\n                followingBar();\\n            }\\n\\n            //05. create Popover\\n            var $popover = $(tplPopovers(langInfo, options)).prependTo($editor);\\n            createPalette($popover, options);\\n            createTooltip($popover, keyMap);\\n\\n            //06. handle(control selection, ...)\\n            $(tplHandles()).prependTo($editor);\\n\\n            //07. create Dialog\\n            var $dialog = $(tplDialogs(langInfo, options)).prependTo($editor);\\n            $dialog.find('button.close, a.modal-close').click(function() {\\n                $(this).closest('.modal').closeModal();\\n            });\\n\\n            //08. create Dropzone\\n            $('<div class=\\\"note-dropzone\\\"><div class=\\\"note-dropzone-message\\\"><\\/div><\\/div>').prependTo($editor);\\n\\n            //09. Editor/Holder switch\\n            $editor.insertAfter($holder);\\n            $holder.hide();\\n        };\\n\\n        this.hasNoteEditor = function($holder) {\\n            return this.noteEditorFromHolder($holder).length > 0;\\n        };\\n\\n        this.noteEditorFromHolder = function($holder) {\\n            if ($holder.hasClass('note-air-editor')) {\\n                return $holder;\\n            } else if ($holder.next().hasClass('note-editor')) {\\n                return $holder.next();\\n            } else {\\n                return $();\\n            }\\n        };\\n\\n        /**\\n         * create materialnote layout\\n         *\\n         * @param {jQuery} $holder\\n         * @param {Object} options\\n         */\\n        this.createLayout = function($holder, options) {\\n            if (options.airMode) {\\n                this.createLayoutByAirMode($holder, options);\\n            } else {\\n                this.createLayoutByFrame($holder, options);\\n            }\\n        };\\n\\n        /**\\n         * returns layoutInfo from holder\\n         *\\n         * @param {jQuery} $holder - placeholder\\n         * @return {Object}\\n         */\\n        this.layoutInfoFromHolder = function($holder) {\\n            var $editor = this.noteEditorFromHolder($holder);\\n            if (!$editor.length) {\\n                return;\\n            }\\n\\n            // connect $holder to $editor\\n            $editor.data('holder', $holder);\\n\\n            return dom.buildLayoutInfo($editor);\\n        };\\n\\n        /**\\n         * removeLayout\\n         *\\n         * @param {jQuery} $holder - placeholder\\n         * @param {Object} layoutInfo\\n         * @param {Object} options\\n         *\\n         */\\n        this.removeLayout = function($holder, layoutInfo, options) {\\n            if (options.airMode) {\\n                $holder.removeClass('note-air-editor note-editable')\\n                    .removeAttr('id contentEditable');\\n\\n                layoutInfo.popover().remove();\\n                layoutInfo.handle().remove();\\n                layoutInfo.dialog().remove();\\n            } else {\\n                $holder.html(layoutInfo.editable().html());\\n\\n                layoutInfo.editor().remove();\\n                $holder.show();\\n            }\\n        };\\n\\n        /**\\n         *\\n         * @return {Object}\\n         * @return {function(label, options=):string} return.button {@link #tplButton function to make text button}\\n         * @return {function(iconClass, options=):string} return.iconButton {@link #tplIconButton function to make icon button}\\n         * @return {function(className, title=, body=, footer=):string} return.dialog {@link #tplDialog function to make dialog}\\n         */\\n        this.getTemplate = function() {\\n            return {\\n                button: tplButton,\\n                iconButton: tplIconButton,\\n                dialog: tplDialog\\n            };\\n        };\\n\\n        /**\\n         * add button information\\n         *\\n         * @param {String} name button name\\n         * @param {Function} buttonInfo function to make button, reference to {@link #tplButton},{@link #tplIconButton}\\n         */\\n        this.addButtonInfo = function(name, buttonInfo) {\\n            tplButtonInfo[name] = buttonInfo;\\n        };\\n\\n        /**\\n         *\\n         * @param {String} name\\n         * @param {Function} dialogInfo function to make dialog, reference to {@link #tplDialog}\\n         */\\n        this.addDialogInfo = function(name, dialogInfo) {\\n            tplDialogInfo[name] = dialogInfo;\\n        };\\n    };\\n\\n\\n    // jQuery namespace for materialnote\\n    /**\\n     * @class $.materialnote\\n     *\\n     * materialnote attribute\\n     *\\n     * @mixin defaults\\n     * @singleton\\n     *\\n     */\\n    $.materialnote = $.materialnote || {};\\n\\n    // extends default settings\\n    //  - $.materialnote.version\\n    //  - $.materialnote.options\\n    //  - $.materialnote.lang\\n    $.extend($.materialnote, defaults);\\n\\n    var renderer = new Renderer();\\n    var eventHandler = new EventHandler();\\n\\n    $.extend($.materialnote, {\\n        /** @property {Renderer} */\\n        renderer: renderer,\\n        /** @property {EventHandler} */\\n        eventHandler: eventHandler,\\n        /**\\n         * @property {Object} core\\n         * @property {core.agent} core.agent\\n         * @property {core.dom} core.dom\\n         * @property {core.range} core.range\\n         */\\n        core: {\\n            agent: agent,\\n            list : list,\\n            dom: dom,\\n            range: range\\n        },\\n        /**\\n         * @property {Object}\\n         * pluginEvents event list for plugins\\n         * event has name and callback function.\\n         *\\n         * ```\\n         * $.materialnote.addPlugin({\\n     *     events : {\\n     *          'hello' : function(layoutInfo, value, $target) {\\n     *              console.log('event name is hello, value is ' + value );\\n     *          }\\n     *     }\\n     * })\\n         * ```\\n         *\\n         * * event name is data-event property.\\n         * * layoutInfo is a materialnote layout information.\\n         * * value is data-value property.\\n         */\\n        pluginEvents: {},\\n\\n        plugins : []\\n    });\\n\\n    /**\\n     * @method addPlugin\\n     *\\n     * add Plugin in materialnote\\n     *\\n     * materialnote can make a own plugin.\\n     *\\n     * ### Define plugin\\n     * ```\\n     * // get template function\\n     * var tmpl = $.materialnote.renderer.getTemplate();\\n     *\\n     * // add a button\\n     * $.materialnote.addPlugin({\\n   *     buttons : {\\n   *        // \\\"hello\\\"  is button's namespace.\\n   *        \\\"hello\\\" : function(lang, options) {\\n   *            // make icon button by template function\\n   *            return tmpl.iconButton(options.iconPrefix + 'header', {\\n   *                // callback function name when button clicked\\n   *                event : 'hello',\\n   *                // set data-value property\\n   *                value : 'hello',\\n   *                hide : true\\n   *            });\\n   *        }\\n   *\\n   *     },\\n   *\\n   *     events : {\\n   *        \\\"hello\\\" : function(layoutInfo, value) {\\n   *            // here is event code\\n   *        }\\n   *     }\\n   * });\\n     * ```\\n     * ### Use a plugin in toolbar\\n     *\\n     * ```\\n     *    $(\\\"#editor\\\").materialnote({\\n   *    ...\\n   *    toolbar : [\\n   *        // display hello plugin in toolbar\\n   *        ['group', [ 'hello' ]]\\n   *    ]\\n   *    ...\\n   *    });\\n     * ```\\n     *\\n     *\\n     * @param {Object} plugin\\n     * @param {Object} [plugin.buttons] define plugin button. for detail, see to Renderer.addButtonInfo\\n     * @param {Object} [plugin.dialogs] define plugin dialog. for detail, see to Renderer.addDialogInfo\\n     * @param {Object} [plugin.events] add event in $.materialnote.pluginEvents\\n     * @param {Object} [plugin.langs] update $.materialnote.lang\\n     * @param {Object} [plugin.options] update $.materialnote.options\\n     */\\n    $.materialnote.addPlugin = function(plugin) {\\n\\n        // save plugin list\\n        $.materialnote.plugins.push(plugin);\\n\\n        if (plugin.buttons) {\\n            $.each(plugin.buttons, function(name, button) {\\n                renderer.addButtonInfo(name, button);\\n            });\\n        }\\n\\n        if (plugin.dialogs) {\\n            $.each(plugin.dialogs, function(name, dialog) {\\n                renderer.addDialogInfo(name, dialog);\\n            });\\n        }\\n\\n        if (plugin.events) {\\n            $.each(plugin.events, function(name, event) {\\n                $.materialnote.pluginEvents[name] = event;\\n            });\\n        }\\n\\n        if (plugin.langs) {\\n            $.each(plugin.langs, function(locale, lang) {\\n                if ($.materialnote.lang[locale]) {\\n                    $.extend($.materialnote.lang[locale], lang);\\n                }\\n            });\\n        }\\n\\n        if (plugin.options) {\\n            $.extend($.materialnote.options, plugin.options);\\n        }\\n    };\\n\\n    /*\\n     * extend $.fn\\n     */\\n    $.fn.extend({\\n        /**\\n         * @method\\n         * Initialize materialnote\\n         *  - create editor layout and attach Mouse and keyboard events.\\n         *\\n         * ```\\n         * $(\\\"#materialnote\\\").materialnote( { options ..} );\\n         * ```\\n         *\\n         * @member $.fn\\n         * @param {Object|String} options reference to $.materialnote.options\\n         * @return {this}\\n         */\\n        materialnote: function() {\\n\\n            // check first argument's type\\n            //  - {String}: External API call {{module}}.{{method}}\\n            //  - {Object}: init options\\n            var type = $.type(list.head(arguments));\\n            var isExternalAPICalled = type === 'string';\\n            var hasInitOptions = type === 'object';\\n\\n            // extend default options with custom user options\\n            var options = hasInitOptions ? list.head(arguments) : {};\\n\\n            options = $.extend({}, $.materialnote.options, options);\\n            options.icons = $.extend({}, $.materialnote.options.icons, options.icons);\\n\\n            // Include langInfo in options for later use, e.g. for image drag-n-drop\\n            // Setup language info with en-US as default\\n            options.langInfo = $.extend(true, {}, $.materialnote.lang['en-US'], $.materialnote.lang[options.lang]);\\n\\n            // override plugin options\\n            if (!isExternalAPICalled && hasInitOptions) {\\n                for (var i = 0, len = $.materialnote.plugins.length; i < len; i++) {\\n                    var plugin = $.materialnote.plugins[i];\\n\\n                    if (options.plugin[plugin.name]) {\\n                        $.materialnote.plugins[i] = $.extend(true, plugin, options.plugin[plugin.name]);\\n                    }\\n                }\\n            }\\n\\n            this.each(function(idx, holder) {\\n                // >>>>>>> CK set id for this editor\\n                materialUniqueId = $(holder).attr('id');\\n\\n                var $holder = $(holder);\\n\\n                // if layout isn't created yet, createLayout and attach events\\n                if (!renderer.hasNoteEditor($holder)) {\\n                    renderer.createLayout($holder, options);\\n\\n                    var layoutInfo = renderer.layoutInfoFromHolder($holder);\\n                    $holder.data('layoutInfo', layoutInfo);\\n\\n                    eventHandler.attach(layoutInfo, options);\\n                    eventHandler.attachCustomEvent(layoutInfo, options);\\n\\n                }\\n            });\\n\\n            var $first = this.first();\\n            if ($first.length) {\\n                var layoutInfo = renderer.layoutInfoFromHolder($first);\\n\\n                // external API\\n                if (isExternalAPICalled) {\\n                    var moduleAndMethod = list.head(list.from(arguments));\\n                    var args = list.tail(list.from(arguments));\\n\\n                    // TODO now external API only works for editor\\n                    var params = [moduleAndMethod, layoutInfo.editable()].concat(args);\\n                    return eventHandler.invoke.apply(eventHandler, params);\\n                } else if (options.focus) {\\n                    // focus on first editable element for initialize editor\\n                    layoutInfo.editable().focus();\\n                }\\n            }\\n\\n\\n\\n            // >>>>>>> CK dropdowns - tabs activation\\n            $(this).each(function(index, editor) {\\n                var tabs;\\n                var tabContainer;\\n                var toolbar;\\n                var isAir = false;\\n\\n                if ($(editor).hasClass('note-air-editor')) {\\n                    var id = $(this).attr('id');\\n                    if (id) id = id.substring(id.lastIndexOf('-') + 1, id.length);\\n\\n                    editor = $('#note-popover-' + id).find('.note-air-popover');\\n                    tabContainer = editor.find('ul.tabs');\\n                    tabs = editor.find('li.tab a');\\n                    toolbar = $(editor).find('.popover-content button.dropdown');\\n                    isAir = true;\\n                } else {\\n                    editor = $(editor).next('.note-editor');\\n                    tabContainer = editor.find('ul.tabs');\\n                    tabs = editor.find('li.tab a');\\n                    toolbar = $(editor).find('.note-toolbar button.dropdown');\\n                }\\n                var go = true;\\n\\n                function handleDropdowns(select, bar) {\\n                    var list = $(select).next('ul.dropdown-menu');\\n                    var container = $(select).parent('.btn-group');\\n\\n                    list.slideUp(0);\\n\\n                    $('.preventDropClose').click(function(event) {\\n                        event.stopPropagation();\\n                    });\\n\\n                    $(select).click(function(event) {\\n                        // calculate dropdown open position to avoid overflow from editor\\n                        var btnOffset = Math.round($(select).parent('.btn-group').offset().left - toolbar.offset().left);\\n                        var listBorderWidth = parseInt(list.css(\\\"border-left\";\n  builder.string += \"-width\\\"));\\n                        var editorWidth = editor.outerWidth();\\n                        var listOffset = listBorderWidth;\\n\\n                        list.css({'max-width': editorWidth + 'px'});\\n\\n                        var listWidth = list.outerWidth();\\n                        var th = listWidth + btnOffset;\\n\\n                        if (th >= editorWidth) {\\n                            listOffset = th - editorWidth;\\n\\n                            if (!isAir) {\\n                                listOffset = listOffset + listBorderWidth;\\n                            }\\n                        }\\n\\n                        list.css({'left': '-' + listOffset + 'px'});\\n\\n                        var reopen = true;\\n\\n                        if (list.is(':visible')) reopen = false;\\n\\n                        bar.find('ul.dropdown-menu').slideUp(200);\\n\\n                        if (reopen) {\\n                            list.slideToggle(200);\\n                        }\\n                        event.stopPropagation();\\n                    });\\n\\n                    tabs.unbind().click(function(event) {\\n                        go = false;\\n                    });\\n                }\\n\\n                $(window).click(function(event) {\\n                    if (go) editor.find('ul.dropdown-menu').slideUp(200);\\n                    go = true;\\n                    event.stopPropagation();\\n                });\\n\\n                // dropdowns\\n                toolbar.each(function(index, select) {\\n                    handleDropdowns(select, editor);\\n                });\\n\\n                // activate tabs\\n                tabContainer.tabs();\\n            });\\n\\n            return this;\\n        },\\n\\n        /**\\n         * @method\\n         *\\n         * get the HTML contents of note or set the HTML contents of note.\\n         *\\n         * * get contents\\n         * ```\\n         * var content = $(\\\"#materialnote\\\").code();\\n         * ```\\n         * * set contents\\n         *\\n         * ```\\n         * $(\\\"#materialnote\\\").code(html);\\n         * ```\\n         *\\n         * @member $.fn\\n         * @param {String} [html] - HTML contents(optional, set)\\n         * @return {this|String} - context(set) or HTML contents of note(get).\\n         */\\n        code: function(html) {\\n            // get the HTML contents of note\\n            if (html === undefined) {\\n                var $holder = this.first();\\n                if (!$holder.length) {\\n                    return;\\n                }\\n\\n                var layoutInfo = renderer.layoutInfoFromHolder($holder);\\n                var $editable = layoutInfo && layoutInfo.editable();\\n\\n                if ($editable && $editable.length) {\\n                    var isCodeview = eventHandler.invoke('codeview.isActivated', layoutInfo);\\n                    eventHandler.invoke('codeview.sync', layoutInfo);\\n                    return isCodeview ? layoutInfo.codable().val() :\\n                        layoutInfo.editable().html();\\n                }\\n                return dom.value($holder);\\n            }\\n\\n            // set the HTML contents of note\\n            this.each(function(i, holder) {\\n                var layoutInfo = renderer.layoutInfoFromHolder($(holder));\\n                var $editable = layoutInfo && layoutInfo.editable();\\n                if ($editable) {\\n                    $editable.html(html);\\n                }\\n            });\\n\\n            return this;\\n        },\\n\\n        /**\\n         * @method\\n         *\\n         * destroy Editor Layout and detach Key and Mouse Event\\n         *\\n         * @member $.fn\\n         * @return {this}\\n         */\\n        destroy: function() {\\n            this.each(function(idx, holder) {\\n                var $holder = $(holder);\\n\\n                if (!renderer.hasNoteEditor($holder)) {\\n                    return;\\n                }\\n\\n                var info = renderer.layoutInfoFromHolder($holder);\\n                var options = info.editor().data('options');\\n\\n                eventHandler.detach(info, options);\\n                renderer.removeLayout($holder, info, options);\\n            });\\n\\n            return this;\\n        }\\n\\n    });\\n}));\\n\\n(function ($) {\\n    $.fn.ckTooltip = function (options) {\\n        var timeout = null,\\n            counter = null,\\n            started = false,\\n            counterInterval = null,\\n            margin = 5;\\n\\n        // Defaults\\n        var defaults = {\\n            delay: 350\\n        };\\n        options = $.extend(defaults, options);\\n\\n        return this.each(function(){\\n            var origin = $(this);\\n\\n            // Create Text span\\n            var tooltip_text = $('<span><\\/span>').text(origin.attr('data-tooltip'));\\n\\n            // Create tooltip\\n            var newTooltip = $('<div><\\/div>');\\n            newTooltip.addClass('material-tooltip').append(tooltip_text);\\n            newTooltip.appendTo($('body'));\\n\\n            var backdrop = $('<div><\\/div>').addClass('backdrop');\\n            backdrop.appendTo(newTooltip);\\n            backdrop.css({ top: 0, left:0 });\\n\\n            //Destroy previously binded events\\n            //$(this).off('mouseenter mouseleave');\\n\\n            $.event.special.destroyed = {\\n                remove: function(o) {\\n                    if (o.handler) {\\n                        o.handler();\\n                    }\\n                }\\n            };\\n            $(this).bind('destroyed', function() {\\n                newTooltip.remove();\\n            });\\n\\n            // Mouse In\\n            $(this).on({\\n                mouseenter: function(e) {\\n                    var tooltip_delay = origin.data(\\\"delay\\\");\\n\\n                    tooltip_delay = (tooltip_delay === undefined || tooltip_delay === '') ? options.delay : tooltip_delay;\\n                    counter = 0;\\n                    counterInterval = setInterval(function(){\\n                        counter += 10;\\n\\n                        if (counter >= tooltip_delay && started === false) {\\n                            started = true;\\n                            newTooltip.css({ display: 'block', left: '0px', top: '0px' });\\n\\n                            // Set Tooltip text\\n                            newTooltip.children('span').text(origin.attr('data-tooltip'));\\n\\n                            // Tooltip positioning\\n                            var originWidth = origin.outerWidth();\\n                            var originHeight = origin.outerHeight();\\n                            var tooltipPosition =  origin.attr('data-position');\\n                            var tooltipHeight = newTooltip.outerHeight();\\n                            var tooltipWidth = newTooltip.outerWidth();\\n                            var tooltipVerticalMovement = '0px';\\n                            var tooltipHorizontalMovement = '0px';\\n                            var scale_factor = 8;\\n\\n                            if (tooltipPosition === \\\"top\\\") {\\n                                // Top Position\\n                                newTooltip.css({\\n                                    top: origin.offset().top - tooltipHeight - margin,\\n                                    left: origin.offset().left + originWidth/2 - tooltipWidth/2\\n                                });\\n                                tooltipVerticalMovement = '-10px';\\n                                backdrop.css({\\n                                    borderRadius: '14px 14px 0 0',\\n                                    transformOrigin: '50% 90%',\\n                                    marginTop: tooltipHeight,\\n                                    marginLeft: (tooltipWidth/2) - (backdrop.width()/2)\\n\\n                                });\\n                            }\\n                            // Left Position\\n                            else if (tooltipPosition === \\\"left\\\") {\\n                                newTooltip.css({\\n                                    top: origin.offset().top + originHeight/2 - tooltipHeight/2,\\n                                    left: origin.offset().left - tooltipWidth - margin\\n                                });\\n                                tooltipHorizontalMovement = '-10px';\\n                                backdrop.css({\\n                                    width: '14px',\\n                                    height: '14px',\\n                                    borderRadius: '14px 0 0 14px',\\n                                    transformOrigin: '95% 50%',\\n                                    marginTop: tooltipHeight/2,\\n                                    marginLeft: tooltipWidth\\n                                });\\n                            }\\n                            // Right Position\\n                            else if (tooltipPosition === \\\"right\\\") {\\n                                newTooltip.css({\\n                                    top: origin.offset().top + originHeight/2 - tooltipHeight/2,\\n                                    left: origin.offset().left + originWidth + margin\\n                                });\\n                                tooltipHorizontalMovement = '+10px';\\n                                backdrop.css({\\n                                    width: '14px',\\n                                    height: '14px',\\n                                    borderRadius: '0 14px 14px 0',\\n                                    transformOrigin: '5% 50%',\\n                                    marginTop: tooltipHeight/2,\\n                                    marginLeft: '0px'\\n                                });\\n                            }\\n                            else {\\n                                // Bottom Position\\n                                newTooltip.css({\\n                                    top: origin.offset().top + origin.outerHeight() + margin,\\n                                    left: origin.offset().left + originWidth/2 - tooltipWidth/2\\n                                });\\n                                tooltipVerticalMovement = '+10px';\\n                                backdrop.css({\\n                                    marginLeft: (tooltipWidth/2) - (backdrop.width()/2)\\n                                });\\n                            }\\n\\n                            // Calculate Scale to fill\\n                            scale_factor = tooltipWidth / 8;\\n                            if (scale_factor < 8) {\\n                                scale_factor = 8;\\n                            }\\n                            if (tooltipPosition === \\\"right\\\" || tooltipPosition === \\\"left\\\") {\\n                                scale_factor = tooltipWidth / 10;\\n                                if (scale_factor < 6)\\n                                    scale_factor = 6;\\n                            }\\n\\n                            newTooltip.velocity({ opacity: 1, marginTop: tooltipVerticalMovement, marginLeft: tooltipHorizontalMovement}, { duration: 150, queue: false });\\n                            backdrop.css({ display: 'block' })\\n                                .velocity({opacity:1},{duration: 50, delay: 0, queue: false})\\n                                .velocity({scale: scale_factor}, {duration: 150, delay: 0, queue: false, easing: 'easeInOutQuad'});\\n                        }\\n                    }, 10); // End Interval\\n\\n                    // Mouse Out\\n                },\\n                mouseleave: function(){\\n                    // Reset State\\n                    clearInterval(counterInterval);\\n                    counter = 0;\\n\\n                    // Animate back\\n                    newTooltip.velocity({\\n                        opacity: 0, marginTop: 0, marginLeft: 0}, { duration: 150, queue: false, delay: 50 }\\n                    );\\n                    backdrop.velocity({opacity: 0, scale: 1}, {\\n                        duration:150,\\n                        delay: 50, queue: false,\\n                        complete: function(){\\n                            backdrop.css('display', 'none');\\n                            newTooltip.css('display', 'none');\\n                            started = false;}\\n                    });\\n                }\\n            });\\n        });\\n    };\\n\\n}(jQuery));\\n\";\n  return builder.string;\n}\n;\nvar Lgwt_material_design_addins_client_richeditor_MaterialRichEditorDebugClientBundle_1default_1InlineClientBundleGenerator$2_2_classLit = createForClass('gwt.material.design.addins.client.richeditor', 'MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator/2', 1734);\nfunction $clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugCssInitializer(){\n  $clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugCssInitializer = emptyMethod;\n  richEditorDebugCss = new MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$1;\n}\n\nfunction $clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugJsInitializer(){\n  $clinit_MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$richEditorDebugJsInitializer = emptyMethod;\n  richEditorDebugJs = new MaterialRichEditorDebugClientBundle_default_InlineClientBundleGenerator$2;\n}\n\nfunction $clinit_ToolbarButton(){\n  $clinit_ToolbarButton = emptyMethod;\n  STYLE = new ToolbarButton('STYLE', 0, 'style');\n  BOLD_0 = new ToolbarButton('BOLD', 1, 'bold');\n  ITALIC = new ToolbarButton('ITALIC', 2, 'italic');\n  UNDERLINE = new ToolbarButton('UNDERLINE', 3, 'underline');\n  STRIKETHROUGH = new ToolbarButton('STRIKETHROUGH', 4, 'strikethrough');\n  CLEAR = new ToolbarButton('CLEAR', 5, 'clear');\n  SUPERSCRIPT = new ToolbarButton('SUPERSCRIPT', 6, 'superscript');\n  SUBSCRIPT = new ToolbarButton('SUBSCRIPT', 7, 'subscript');\n  FONT_SIZE = new ToolbarButton('FONT_SIZE', 8, 'fontsize');\n  FONT_NAME = new ToolbarButton('FONT_NAME', 9, 'fontname');\n  COLOR = new ToolbarButton('COLOR', 10, 'color');\n  UNDO = new ToolbarButton('UNDO', 11, 'undo');\n  REDO = new ToolbarButton('REDO', 12, 'redo');\n  HELP_0 = new ToolbarButton('HELP', 13, 'help');\n  CK_IMAGE_UPLOAD = new ToolbarButton('CK_IMAGE_UPLOAD', 14, 'ckImageUploader');\n  CK_IMAGE_VIDEO = new ToolbarButton('CK_IMAGE_VIDEO', 15, 'ckVideoEmbeeder');\n  LINK_0 = new ToolbarButton('LINK', 16, 'link');\n  PICTURE = new ToolbarButton('PICTURE', 17, 'picture');\n  TABLE_1 = new ToolbarButton('TABLE', 18, 'table');\n  HR = new ToolbarButton('HR', 19, 'hr');\n  CODE_VIEW = new ToolbarButton('CODE_VIEW', 20, 'codeview');\n  FULLSCREEN = new ToolbarButton('FULLSCREEN', 21, 'fullscreen');\n  UL = new ToolbarButton('UL', 22, 'ul');\n  OL = new ToolbarButton('OL', 23, 'ol');\n  PARAGRAPH = new ToolbarButton('PARAGRAPH', 24, 'paragraph');\n  LEFT_2 = new ToolbarButton('LEFT', 25, 'leftButton');\n  CENTER_3 = new ToolbarButton('CENTER', 26, 'centerButton');\n  RIGHT_3 = new ToolbarButton('RIGHT', 27, 'rightButton');\n  JUSTIFY_1 = new ToolbarButton('JUSTIFY', 28, 'justifyButton');\n  OUTDENT = new ToolbarButton('OUTDENT', 29, 'outdentButton');\n  INDENT = new ToolbarButton('INDENT', 30, 'indentButton');\n  LINE_HEIGHT = new ToolbarButton('LINE_HEIGHT', 31, 'lineheight');\n}\n\nfunction ToolbarButton(enum$name, enum$ordinal, id_0){\n  Enum.call(this, enum$name, enum$ordinal);\n  this.id_0 = id_0;\n}\n\nfunction values_26(){\n  $clinit_ToolbarButton();\n  return initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [STYLE, BOLD_0, ITALIC, UNDERLINE, STRIKETHROUGH, CLEAR, SUPERSCRIPT, SUBSCRIPT, FONT_SIZE, FONT_NAME, COLOR, UNDO, REDO, HELP_0, CK_IMAGE_UPLOAD, CK_IMAGE_VIDEO, LINK_0, PICTURE, TABLE_1, HR, CODE_VIEW, FULLSCREEN, UL, OL, PARAGRAPH, LEFT_2, CENTER_3, RIGHT_3, JUSTIFY_1, OUTDENT, INDENT, LINE_HEIGHT]);\n}\n\ndefineClass(68, 22, {68:1, 7:1, 30:1, 22:1}, ToolbarButton);\nvar BOLD_0, CENTER_3, CK_IMAGE_UPLOAD, CK_IMAGE_VIDEO, CLEAR, CODE_VIEW, COLOR, FONT_NAME, FONT_SIZE, FULLSCREEN, HELP_0, HR, INDENT, ITALIC, JUSTIFY_1, LEFT_2, LINE_HEIGHT, LINK_0, OL, OUTDENT, PARAGRAPH, PICTURE, REDO, RIGHT_3, STRIKETHROUGH, STYLE, SUBSCRIPT, SUPERSCRIPT, TABLE_1, UL, UNDERLINE, UNDO;\nvar Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit = createForEnum('gwt.material.design.addins.client.richeditor.base.constants', 'ToolbarButton', 68, values_26);\nfunction RichEditorPresenter(eventBus, view, proxy){\n  $clinit_PresenterWidget();\n  Presenter.call(this, eventBus, view, proxy, ($clinit_ApplicationPresenter() , SLOT_MainContent));\n}\n\ndefineClass(670, 53, $intern_55, RichEditorPresenter);\n_.onReveal = function onReveal_13(){\n  $clinit_SetPageTitleEvent();\n  $fireEvent_1(this, new SetPageTitleEvent('Rich Editor', 'Provides a great Rich Editor with amazing options built with Material Design Look and Feel.'));\n}\n;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorPresenter_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorPresenter', 670);\nfunction $onSetHTML(this$static){\n  $setHTML(this$static.richEditor, $getText(this$static.txtHTML.valueBoxBase));\n}\n\nfunction RichEditorView(){\n  ViewImpl.call(this);\n  $initWidget_0(this, $build_f_HTMLPanel1_8(new RichEditorView_BinderImpl$Widgets(this)));\n  $setHTML(this.richEditor, '<h2 style=\"text-align: center; \"> <span style=\"color: rgb(101, 31, 255);\"> I Love Material Design <\\/span> <\\/h2> <p style=\"text-align: center;\"> <span style=\"font-size: 17px;\"> Using <\\/span> <span style=\"font-weight: bold; font-size: 17px; text-decoration: underline;\"> Airmode <\\/span> <span style=\"font-size: 17px;\"> you can directly modify this html. <\\/span> <\\/p> <p style=\"text-align: center;\"> <br> <\\/p> <table class=\"hoverable bordered striped responsive-table\"> <thead> <tr> <th> Country <\\/th> <th> Capital <\\/th> <th> Currency <\\/th> <\\/tr> <\\/thead> <tbody> <tr> <td> Philippines <\\/td> <td> Manila <\\/td> <td> Peso <\\/td> <\\/tr> <tr> <td> Japan <\\/td> <td> Tokyo <\\/td> <td> Yen <\\/td> <\\/tr> <\\/tbody> <\\/table> <p> <\\/p>');\n  $setHTML(this.airmodeRichEditor, '<h2 style=\"text-align: center; \"> <span style=\"color: rgb(101, 31, 255);\"> I Love Material Design <\\/span> <\\/h2> <p style=\"text-align: center;\"> <span style=\"font-size: 17px;\"> Using <\\/span> <span style=\"font-weight: bold; font-size: 17px; text-decoration: underline;\"> Airmode <\\/span> <span style=\"font-size: 17px;\"> you can directly modify this html. <\\/span> <\\/p> <p style=\"text-align: center;\"> <br> <\\/p> <table class=\"hoverable bordered striped responsive-table\"> <thead> <tr> <th> Country <\\/th> <th> Capital <\\/th> <th> Currency <\\/th> <\\/tr> <\\/thead> <tbody> <tr> <td> Philippines <\\/td> <td> Manila <\\/td> <td> Peso <\\/td> <\\/tr> <tr> <td> Japan <\\/td> <td> Tokyo <\\/td> <td> Yen <\\/td> <\\/tr> <\\/tbody> <\\/table> <p> <\\/p>');\n  $setStyleOptions(this.optionRichEditor, initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [($clinit_ToolbarButton() , STYLE), BOLD_0, ITALIC]));\n  $setParaOptions(this.optionRichEditor, initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [LEFT_2, RIGHT_3, JUSTIFY_1]));\n  $setMiscOptions(this.optionRichEditor, initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, [CODE_VIEW, FULLSCREEN]));\n  $setUndoOptions(this.optionRichEditor, initValues(getClassLiteralForArray(Lgwt_material_design_addins_client_richeditor_base_constants_ToolbarButton_2_classLit, 1), $intern_8, 68, 0, []));\n  $setHTML(this.optionRichEditor, '<div style=\"text-align: left;\"> <span style=\"font-size: 37px; font-weight: bold;\"> Options <\\/span> <\\/div> <div style=\"text-align: left;\"> <ul> <li> <span style=\"line-height: 1.5;\"> optionRichEditor.setStyleOptions(ToolbarButton. <span style=\"font-weight: bold;\"> STYLE <\\/span> , ToolbarButton. <span style=\"font-weight: bold;\"> BOLD <\\/span> , ToolbarButton. <span style=\"font-weight: bold;\"> ITALIC <\\/span> ); <\\/span> <br> <\\/li> <li> optionRichEditor.setParaOptions(ToolbarButton. <span style=\"font-weight: bold;\"> LEFT <\\/span> ,&nbsp;ToolbarButton. <span style=\"font-weight: bold;\"> RIGHT <\\/span> , ToolbarButton. <span style=\"font-weight: bold;\"> JUSTIFY <\\/span> ); <\\/li> <li> optionRichEditor.setMiscOptions(ToolbarButton. <span style=\"font-weight: bold;\"> CODE_VIEW <\\/span> , ToolbarButton. <span style=\"font-weight: bold;\"> FULLSCREEN <\\/span> ); <\\/li> <li> optionRichEditor.setUndoOptions(); <\\/li> <\\/ul> <\\/div>');\n  $setHTML(this.clearRichEditor, '<h2>I Love <\\/h2>');\n}\n\ndefineClass(906, 56, $intern_56, RichEditorView);\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView', 906);\nfunction RichEditorView_BinderImpl(){\n}\n\ndefineClass(1191, 1, {}, RichEditorView_BinderImpl);\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl', 1191);\nfunction $build_f_HTMLPanel1_8(this$static){\n  var __attachRecord__, f_HTMLPanel1, f_MaterialTitle2, f_PrettyPre3, f_richeditor$MaterialRichEditor4, f_MaterialTitle5, f_MaterialRow6, richEditor, f_PrettyPre8, f_MaterialTitle9, airmodeRichEditor, f_PrettyPre10, f_MaterialTitle11, f_richeditor$MaterialRichEditor12, f_PrettyPre13, f_MaterialTitle14, optionRichEditor, f_PrettyPre15, f_MaterialTitle16, btnClear, btnInsertText, clearRichEditor, f_PrettyPre17, sb, txtHTML, f_MaterialColumn7, btnSetHTML, btnGetHTML, sb_0, sb_1, sb_2, sb_3, sb_4;\n  f_HTMLPanel1 = new HTMLPanel($html7(this$static.domId0, this$static.domId1, this$static.domId2, this$static.domId3, this$static.domId4, this$static.domId5, this$static.domId6, this$static.domId7, this$static.domId8, this$static.domId9, this$static.domId10, this$static.domId11, this$static.domId12, this$static.domId13, this$static.domId14, this$static.domId15, this$static.domId16, this$static.domId17, this$static.domId18, this$static.domId19, this$static.domId20).html_0);\n  __attachRecord__ = attachToDom(($clinit_DOM() , f_HTMLPanel1.element));\n  $get_0(this$static.domId0Element);\n  $get_0(this$static.domId1Element);\n  $get_0(this$static.domId2Element);\n  $get_0(this$static.domId3Element);\n  $get_0(this$static.domId4Element);\n  $get_0(this$static.domId5Element);\n  $get_0(this$static.domId6Element);\n  $get_0(this$static.domId7Element);\n  $get_0(this$static.domId8Element);\n  $get_0(this$static.domId9Element);\n  $get_0(this$static.domId10Element);\n  $get_0(this$static.domId11Element);\n  $get_0(this$static.domId12Element);\n  $get_0(this$static.domId13Element);\n  $get_0(this$static.domId14Element);\n  $get_0(this$static.domId15Element);\n  $get_0(this$static.domId16Element);\n  $get_0(this$static.domId17Element);\n  $get_0(this$static.domId18Element);\n  $get_0(this$static.domId19Element);\n  $get_0(this$static.domId20Element);\n  __attachRecord__.origParent?$insertBefore(__attachRecord__.origParent, __attachRecord__.element, __attachRecord__.origSibling):orphan(__attachRecord__.element);\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle2 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle2.header), 'Usage') , f_MaterialTitle2), $get_0(this$static.domId0Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre3 = new PrettyPre , $setHTML_0(f_PrettyPre3, (sb = new StringBuilder , sb.string += '\\u2003&lt;!-- Addin Import --&gt;<br> xmlns:ma=\"urn:import:gwt.material.design.addins.client\"<br><br> &lt;!-- Addin Usage --&gt;<br> \\u2003&lt;ma:richeditor.MaterialRichEditor placeholder=\"Type everything about Material Design\"/&gt;' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb.string)).html_0) , setStyleName(f_PrettyPre3.element, 'lang-xml', true) , setStyleName(f_PrettyPre3.element, 'z-depth-1', true) , f_PrettyPre3), $get_0(this$static.domId1Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_richeditor$MaterialRichEditor4 = new MaterialRichEditor , f_richeditor$MaterialRichEditor4.placeholder = 'Type everything about Material Design' , f_richeditor$MaterialRichEditor4), $get_0(this$static.domId2Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle5 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle5.header), 'Set/Get HTML') , $setText_9(f_MaterialTitle5.paragraph, 'We provided a method to easily set the html content of the rich editor component') , f_MaterialTitle5), $get_0(this$static.domId3Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialRow6 = new MaterialRow , $add_12(f_MaterialRow6, (txtHTML = new MaterialTextBox , txtHTML.type_0 != ($clinit_InputType() , SEARCH_1)?$setText_7(txtHTML.lblName, 'Any HTML'):$setAttribute($getElement(txtHTML.valueBoxBase), 'placeholder', 'Any HTML') , $setGrid((!txtHTML.gridMixin_0 && (txtHTML.gridMixin_0 = new GridMixin(txtHTML)) , txtHTML.gridMixin_0), 's12 l3 m3') , this$static.owner.txtHTML = txtHTML , txtHTML)) , $add_12(f_MaterialRow6, (f_MaterialColumn7 = new MaterialColumn , $add_12(f_MaterialColumn7, (btnSetHTML = new MaterialButton , btnSetHTML.span_1.setText('Set HTML') , $add_12(btnSetHTML, btnSetHTML.span_1) , $setWaves(btnSetHTML, ($clinit_WavesType() , DEFAULT_7)) , btnSetHTML.element.style['margin'] = ($clinit_Style$Unit() , '8.0px') , $addDomHandler(btnSetHTML, this$static.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames3, ($clinit_ClickEvent() , $clinit_ClickEvent() , TYPE_1)) , btnSetHTML)) , $add_12(f_MaterialColumn7, (btnGetHTML = new MaterialButton , btnGetHTML.span_1.setText('Get HTML') , $add_12(btnGetHTML, btnGetHTML.span_1) , $setWaves(btnGetHTML, DEFAULT_7) , btnGetHTML.element.style['margin'] = '8.0px' , $addDomHandler(btnGetHTML, this$static.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames4, (null , TYPE_1)) , btnGetHTML)) , $setGrid((!f_MaterialColumn7.gridMixin_0 && (f_MaterialColumn7.gridMixin_0 = new GridMixin(f_MaterialColumn7)) , f_MaterialColumn7.gridMixin_0), 's12 m4 l4') , f_MaterialColumn7)) , f_MaterialRow6), $get_0(this$static.domId4Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (richEditor = new MaterialRichEditor , this$static.owner.richEditor = richEditor , richEditor), $get_0(this$static.domId5Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre8 = new PrettyPre , $setHTML_0(f_PrettyPre8, (sb_0 = new StringBuilder , sb_0.string += '\\u2003richEditor.setHTML(\"&lt;b&gt;I Love Material Design&lt;/b&gt;\");<br> richEditor.getHTML();' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb_0.string)).html_0) , setStyleName(f_PrettyPre8.element, 'lang-java', true) , setStyleName(f_PrettyPre8.element, 'z-depth-1', true) , f_PrettyPre8), $get_0(this$static.domId6Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle9 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle9.header), 'Air mode') , $setText_9(f_MaterialTitle9.paragraph, 'Air-mode gives clearer interface with hiddened toolbar. To reveal toolbar, select a text where you want to shape up. Simply turn on airMode and just focus on text.') , f_MaterialTitle9), $get_0(this$static.domId7Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (airmodeRichEditor = new MaterialRichEditor , airmodeRichEditor.airMode = true , this$static.owner.airmodeRichEditor = airmodeRichEditor , airmodeRichEditor), $get_0(this$static.domId8Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre10 = new PrettyPre , $setHTML_0(f_PrettyPre10, (sb_1 = new StringBuilder , sb_1.string += '&lt;ma:richeditor.MaterialRichEditor ui:field=\"airmodeRichEditor\" airMode=\"true\" /&gt;' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb_1.string)).html_0) , setStyleName(f_PrettyPre10.element, 'lang-xml', true) , setStyleName(f_PrettyPre10.element, 'z-depth-1', true) , f_PrettyPre10), $get_0(this$static.domId9Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle11 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle11.header), 'Height') , $setText_9(f_MaterialTitle11.paragraph, \"The height param applied to Editor's zone\") , f_MaterialTitle11), $get_0(this$static.domId10Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_richeditor$MaterialRichEditor12 = new MaterialRichEditor , f_richeditor$MaterialRichEditor12.element.style['height'] = '200px' , undefined , f_richeditor$MaterialRichEditor12), $get_0(this$static.domId11Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre13 = new PrettyPre , $setHTML_0(f_PrettyPre13, (sb_2 = new StringBuilder , sb_2.string += '&lt;ma:richeditor.MaterialRichEditor height=\"200px\"/&gt;' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb_2.string)).html_0) , setStyleName(f_PrettyPre13.element, 'lang-xml', true) , setStyleName(f_PrettyPre13.element, 'z-depth-1', true) , f_PrettyPre13), $get_0(this$static.domId12Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle14 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle14.header), 'Controlling Options') , $setText_9(f_MaterialTitle14.paragraph, 'You can set Options and remove what you want or even place it. Options style, fonts, colors, undo, ckMedia, misc, para and height are placed respectively.') , f_MaterialTitle14), $get_0(this$static.domId13Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (optionRichEditor = new MaterialRichEditor , this$static.owner.optionRichEditor = optionRichEditor , optionRichEditor), $get_0(this$static.domId14Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre15 = new PrettyPre , $setHTML_0(f_PrettyPre15, (sb_3 = new StringBuilder , sb_3.string += '\\u2003optionRichEditor.setStyleOptions(ToolbarButton.STYLE, ToolbarButton.BOLD, ToolbarButton.ITALIC);<br> optionRichEditor.setParaOptions(ToolbarButton.LEFT, ToolbarButton.RIGHT, ToolbarButton.JUSTIFY);<br> optionRichEditor.setMiscOptions(ToolbarButton.CODE_VIEW, ToolbarButton.FULLSCREEN);<br> // Without undo options<br> optionRichEditor.setUndoOptions();<br>' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb_3.string)).html_0) , setStyleName(f_PrettyPre15.element, 'lang-java', true) , setStyleName(f_PrettyPre15.element, 'z-depth-1', true) , f_PrettyPre15), $get_0(this$static.domId15Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_MaterialTitle16 = new MaterialTitle , $setInnerHTML($getElement(f_MaterialTitle16.header), 'Clear and Insert Text') , f_MaterialTitle16), $get_0(this$static.domId16Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (btnClear = new MaterialButton , btnClear.span_1.setText('Clear') , $add_12(btnClear, btnClear.span_1) , $setWaves(btnClear, DEFAULT_7) , $addDomHandler(btnClear, this$static.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames1, (null , TYPE_1)) , btnClear), $get_0(this$static.domId17Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (btnInsertText = new MaterialButton , btnInsertText.span_1.setText('Insert Material Design') , $add_12(btnInsertText, btnInsertText.span_1) , $setWaves(btnInsertText, DEFAULT_7) , $addDomHandler(btnInsertText, this$static.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames2, (null , TYPE_1)) , btnInsertText), $get_0(this$static.domId18Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (clearRichEditor = new MaterialRichEditor , this$static.owner.clearRichEditor = clearRichEditor , clearRichEditor), $get_0(this$static.domId19Element));\n  $addAndReplaceElement_1(f_HTMLPanel1, (f_PrettyPre17 = new PrettyPre , $setHTML_0(f_PrettyPre17, (sb_4 = new StringBuilder , sb_4.string += '\\u2003richEditor.clear(); // Clearing the rich editor <br> richEditor.insertText(\"Material Design\"); // Inserting text into rich editor <br>' , new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb_4.string)).html_0) , setStyleName(f_PrettyPre17.element, 'lang-java', true) , setStyleName(f_PrettyPre17.element, 'z-depth-1', true) , f_PrettyPre17), $get_0(this$static.domId20Element));\n  return f_HTMLPanel1;\n}\n\nfunction RichEditorView_BinderImpl$Widgets(owner){\n  var style;\n  this.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames1 = new RichEditorView_BinderImpl$Widgets$1(this);\n  this.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames2 = new RichEditorView_BinderImpl$Widgets$2(this);\n  this.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames3 = new RichEditorView_BinderImpl$Widgets$3(this);\n  this.handlerMethodWithNameVeryUnlikelyToCollideWithUserFieldNames4 = new RichEditorView_BinderImpl$Widgets$4(this);\n  this.owner = owner;\n  style = (new RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator , $clinit_RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$styleInitializer() , style_4);\n  $ensureInjected_9(style);\n  this.domId0 = $createUniqueId($doc);\n  this.domId1 = $createUniqueId($doc);\n  this.domId2 = $createUniqueId($doc);\n  this.domId3 = $createUniqueId($doc);\n  this.domId4 = $createUniqueId($doc);\n  this.domId5 = $createUniqueId($doc);\n  this.domId6 = $createUniqueId($doc);\n  this.domId7 = $createUniqueId($doc);\n  this.domId8 = $createUniqueId($doc);\n  this.domId9 = $createUniqueId($doc);\n  this.domId10 = $createUniqueId($doc);\n  this.domId11 = $createUniqueId($doc);\n  this.domId12 = $createUniqueId($doc);\n  this.domId13 = $createUniqueId($doc);\n  this.domId14 = $createUniqueId($doc);\n  this.domId15 = $createUniqueId($doc);\n  this.domId16 = $createUniqueId($doc);\n  this.domId17 = $createUniqueId($doc);\n  this.domId18 = $createUniqueId($doc);\n  this.domId19 = $createUniqueId($doc);\n  this.domId20 = $createUniqueId($doc);\n  this.domId0Element = new LazyDomElement(this.domId0);\n  this.domId1Element = new LazyDomElement(this.domId1);\n  this.domId2Element = new LazyDomElement(this.domId2);\n  this.domId3Element = new LazyDomElement(this.domId3);\n  this.domId4Element = new LazyDomElement(this.domId4);\n  this.domId5Element = new LazyDomElement(this.domId5);\n  this.domId6Element = new LazyDomElement(this.domId6);\n  this.domId7Element = new LazyDomElement(this.domId7);\n  this.domId8Element = new LazyDomElement(this.domId8);\n  this.domId9Element = new LazyDomElement(this.domId9);\n  this.domId10Element = new LazyDomElement(this.domId10);\n  this.domId11Element = new LazyDomElement(this.domId11);\n  this.domId12Element = new LazyDomElement(this.domId12);\n  this.domId13Element = new LazyDomElement(this.domId13);\n  this.domId14Element = new LazyDomElement(this.domId14);\n  this.domId15Element = new LazyDomElement(this.domId15);\n  this.domId16Element = new LazyDomElement(this.domId16);\n  this.domId17Element = new LazyDomElement(this.domId17);\n  this.domId18Element = new LazyDomElement(this.domId18);\n  this.domId19Element = new LazyDomElement(this.domId19);\n  this.domId20Element = new LazyDomElement(this.domId20);\n}\n\ndefineClass(1192, 1, {}, RichEditorView_BinderImpl$Widgets);\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl$Widgets_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl/Widgets', 1192);\nfunction RichEditorView_BinderImpl$Widgets$1(this$1){\n  this.this$11 = this$1;\n}\n\ndefineClass(1193, 1, $intern_64, RichEditorView_BinderImpl$Widgets$1);\n_.onClick = function onClick_52(event_0){\n  $clear_4(this.this$11.owner.clearRichEditor);\n}\n;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl$Widgets$1_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl/Widgets/1', 1193);\nfunction RichEditorView_BinderImpl$Widgets$2(this$1){\n  this.this$11 = this$1;\n}\n\ndefineClass(1194, 1, $intern_64, RichEditorView_BinderImpl$Widgets$2);\n_.onClick = function onClick_53(event_0){\n  $insertText_0(this.this$11.owner.clearRichEditor);\n}\n;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl$Widgets$2_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl/Widgets/2', 1194);\nfunction RichEditorView_BinderImpl$Widgets$3(this$1){\n  this.this$11 = this$1;\n}\n\ndefineClass(1195, 1, $intern_64, RichEditorView_BinderImpl$Widgets$3);\n_.onClick = function onClick_54(event_0){\n  $onSetHTML(this.this$11.owner);\n}\n;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl$Widgets$3_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl/Widgets/3', 1195);\nfunction RichEditorView_BinderImpl$Widgets$4(this$1){\n  this.this$11 = this$1;\n}\n\ndefineClass(1196, 1, $intern_64, RichEditorView_BinderImpl$Widgets$4);\n_.onClick = function onClick_55(event_0){\n  fireToast(this.this$11.owner.richEditor.html_0);\n}\n;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl$Widgets$4_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl/Widgets/4', 1196);\nfunction RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator(){\n}\n\ndefineClass(1558, 1, {}, RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator);\nvar style_4;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl_1GenBundle_1default_1InlineClientBundleGenerator_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator', 1558);\nfunction $ensureInjected_9(this$static){\n  if (!this$static.injected) {\n    this$static.injected = true;\n    $clinit_StyleInjector();\n    $push_1(toInject, '');\n    schedule();\n    return true;\n  }\n  return false;\n}\n\nfunction RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$1(){\n}\n\ndefineClass(1559, 1, {}, RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$1);\n_.getName = function getName_71(){\n  return 'style';\n}\n;\n_.injected = false;\nvar Lgwt_material_design_demo_client_application_addins_richeditor_RichEditorView_1BinderImpl_1GenBundle_1default_1InlineClientBundleGenerator$1_2_classLit = createForClass('gwt.material.design.demo.client.application.addins.richeditor', 'RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator/1', 1559);\nfunction $clinit_RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$styleInitializer(){\n  $clinit_RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$styleInitializer = emptyMethod;\n  style_4 = new RichEditorView_BinderImpl_GenBundle_default_InlineClientBundleGenerator$1;\n}\n\nfunction $html7(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9, arg10, arg11, arg12, arg13, arg14, arg15, arg16, arg17, arg18, arg19, arg20){\n  var sb;\n  sb = new StringBuilder;\n  sb.string += \"<span id='\";\n  $append_3(sb, htmlEscape(arg0));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg1));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg2));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg3));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg4));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg5));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg6));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg7));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg8));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg9));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg10));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg11));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg12));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg13));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg14));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg15));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg16));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg17));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg18));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg19));\n  sb.string += \"'><\\/span> <span id='\";\n  $append_3(sb, htmlEscape(arg20));\n  sb.string += \"'><\\/span>\";\n  return new OnlyToBeUsedInGeneratedCodeStringBlessedAsSafeHtml(sb.string);\n}\n\nfunction $get_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$_annotation$$none$$(this$static){\n  var result;\n  if (!this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$_annotation$$none$$) {\n    result = new RichEditorPresenter($get_Key$type$com$google$web$bindery$event$shared$EventBus$_annotation$$none$$($getFragment_com_google_web_bindery_event_shared(this$static.injector)), $get_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorView$_annotation$$none$$(this$static), $get_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$MyProxy$_annotation$$none$$(this$static));\n    $automaticBind(($getFragment_com_gwtplatform_mvp_client(this$static.injector) , result), $get_Key$type$com$gwtplatform$mvp$client$AutobindDisable$_annotation$$none$$($getFragment_com_gwtplatform_mvp_client(this$static.injector)));\n    this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$_annotation$$none$$ = result;\n  }\n  return this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$_annotation$$none$$;\n}\n\nfunction $get_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorView$_annotation$$none$$(this$static){\n  var result;\n  if (!this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorView$_annotation$$none$$) {\n    result = new RichEditorView(new RichEditorView_BinderImpl);\n    this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorView$_annotation$$none$$ = result;\n  }\n  return this$static.singleton_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorView$_annotation$$none$$;\n}\n\ndefineClass(571, 1, $intern_80);\n_.onSuccess_0 = function onSuccess_6(){\n  $onSuccess_0(this.val$callback2, $get_Key$type$gwt$material$design$demo$client$application$addins$richeditor$RichEditorPresenter$_annotation$$none$$(this.this$11.this$01));\n}\n;\n$entry(onLoad_0)(7);\n\n//# sourceURL=gwtmaterialdemo-7.js\n")
